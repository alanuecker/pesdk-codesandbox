"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t,o,n,r=require("./index-888bc306.js"),i=e(require("react")),a=e(require("react-dom")),s=require("./engine.production.min.js"),l=require("styled-components"),c=e(l),u=function(e){if(s.isRGBAArray(e)){var t=r.__read(e,4);return"rgba("+255*(n=t[0])+", "+255*(i=t[1])+", "+255*(a=t[2])+", "+t[3]+")"}if(s.isRGBAObject(e))return"rgba("+255*(n=e.r)+", "+255*(i=e.g)+", "+255*(a=e.b)+", "+e.a+")";if(s.isRGBArray(e)){var o=r.__read(e,3),n=o[0],i=o[1],a=o[2];return h(n,i,a)}if(s.isRGBObject(e)){n=e.r,i=e.g,a=e.b;return h(n,i,a)}return e},d={black:[0,0,0,1],white:[1,1,1,1],gray:[191/255,191/255,191/255,1],blue:[.4,134/255,1,1],skyBlue:[.4,.8,1,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[1,247/255,99/255,1]},p={transparent:[0,0,0,0],black:[0,0,0,1],white:[1,1,1,1],blue:[.4,134/255,1,1],skyBlue:[.4,.8,1,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[1,247/255,99/255,1]},h=function(e,t,o){return"#"+f(255*e)+f(255*t)+f(255*o)},f=function(e){var t=Number(e).toString(16);return t.length<2&&(t="0"+t),t},g=[r.Tool.LIBRARY,[r.Tool.TRANSFORM,r.Tool.FILTER,r.Tool.ADJUSTMENT],[r.Tool.FOCUS,r.Tool.FRAME,r.Tool.OVERLAY],[r.Tool.TEXT,r.Tool.TEXT_DESIGN,r.Tool.STICKER,r.Tool.BRUSH]],m={order:"default",language:"en",theme:"dark",layout:"advanced",mainCanvasActions:[r.CanvasAction.UNDO,r.CanvasAction.REDO,r.CanvasAction.EXPORT,r.CanvasAction.CLOSE],displayResizeWarning:!0,engine:{license:"",crossOrigin:"anonymous",downscaleOptions:{maxMegaPixels:{desktop:10,mobile:5}}},enableZoom:!0,assetBaseUrl:"assets/",defaultTool:r.Tool.FILTER,tools:g,snapping:new r.SnappingConfiguration,filter:new r.FilterConfiguration,focus:new r.FocusConfiguration,adjustment:new r.AdjustmentConfiguration,library:new r.LibraryConfiguration,overlay:new r.OverlayConfiguration,sticker:new r.StickerConfiguration,text:new r.TextConfiguration,textdesign:new r.TextDesignConfiguration,frame:new r.FrameConfiguration,brush:new r.BrushConfiguration,transform:new r.TransformConfiguration,export:{image:{exportType:r.ExportFormat.IMAGE,format:r.ImageFormat.PNG,quality:.9,enableDownload:!0},filename:"photoeditorsdk-export"},custom:{}};(t=exports.CardType||(exports.CardType={})).LARGE="large",t.MEDIUM="medium",t.SMALL="small",(o=exports.ModalType||(exports.ModalType={})).ERROR="error",o.WARNING="warning",o.INFO="info",o.TEXT_EDIT="textEdit";var y=((n={})[r.AdjustmentIdentifier.BRIGHTNESS]=0,n[r.AdjustmentIdentifier.SATURATION]=0,n[r.AdjustmentIdentifier.CONTRAST]=0,n[r.AdjustmentIdentifier.GAMMA]=0,n[r.AdjustmentIdentifier.CLARITY]=0,n[r.AdjustmentIdentifier.EXPOSURE]=0,n[r.AdjustmentIdentifier.SHADOWS]=0,n[r.AdjustmentIdentifier.HIGHLIGHTS]=0,n[r.AdjustmentIdentifier.WHITES]=0,n[r.AdjustmentIdentifier.BLACKS]=0,n[r.AdjustmentIdentifier.TEMPERATURE]=0,n[r.AdjustmentIdentifier.SHARPNESS]=0,n),b=function(e,t){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function v(e,t){function o(){this.constructor=e}b(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}var _=function(){return(_=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function x(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var n,r,i=o.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a}function S(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(x(arguments[t]));return e}var w=[];Object.freeze(w);var k={};Object.freeze(k);var C={};function O(){return"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:C}function T(){return++Je.mobxGuid}function E(e){throw P(!1,e),"X"}function P(e,t){if(!e)throw new Error("[mobx] "+(t||"An invariant failed, however the error is obfuscated because this is an production build."))}var M=[];function z(e,t){return"production"!==process.env.NODE_ENV&&(t?z("'"+e+"', use '"+t+"' instead."):-1===M.indexOf(e)&&(M.push(e),console.error("[mobx] Deprecated: "+e),!0))}function R(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var I=function(){};function D(e){return null!==e&&"object"==typeof e}function j(e){if(null===e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function A(e,t,o){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:o})}function L(e,t,o){Object.defineProperty(e,t,{enumerable:!1,writable:!1,configurable:!0,value:o})}function F(e,t){"production"===process.env.NODE_ENV||function(e,t){var o=Object.getOwnPropertyDescriptor(e,t);return!o||!1!==o.configurable&&!1!==o.writable}(e,t)||E("Cannot make property '"+t+"' observable, it is not configurable and writable in the target object")}function B(e,t){var o="isMobX"+e;return t.prototype[o]=!0,function(e){return D(e)&&!0===e[o]}}function N(e){return void 0!==O().Map&&e instanceof O().Map}function H(e){return e instanceof Set}function V(e){for(var t=[];;){var o=e.next();if(o.done)break;t.push(o.value)}return t}function W(){return"function"==typeof Symbol&&Symbol.toPrimitive||"@@toPrimitive"}function G(e){return null===e?null:"object"==typeof e?""+e:e}function U(){return"function"==typeof Symbol&&Symbol.iterator||"@@iterator"}function X(e,t){L(e,U(),t)}function Y(e){return e[U()]=q,e}function K(){return"function"==typeof Symbol&&Symbol.toStringTag||"@@toStringTag"}function q(){return this}var $=function(){function e(e){void 0===e&&(e="Atom@"+T()),this.name=e,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=Se.NOT_TRACKING}return e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.reportObserved=function(){return rt(this)},e.prototype.reportChanged=function(){ot(),function(e){if(e.lowestObserverState===Se.STALE)return;e.lowestObserverState=Se.STALE;var t=e.observers,o=t.length;for(;o--;){var n=t[o];n.dependenciesState===Se.UP_TO_DATE&&(n.isTracing!==we.NONE&&it(n,e),n.onBecomeStale()),n.dependenciesState=Se.STALE}}(this),nt()},e.prototype.toString=function(){return this.name},e}(),Z=B("Atom",$);function J(e,t,o){void 0===t&&(t=I),void 0===o&&(o=I);var n,r=new $(e);return Ot("onBecomeObserved",r,t,n),Ct(r,o),r}function Q(e,t){return e===t}var ee={identity:Q,structural:function(e,t){return ko(e,t)},default:function(e,t){return function(e,t){return"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}(e,t)||Q(e,t)},shallow:function(e,t){return ko(e,t,1)}},te={},oe={};function ne(e,t){var o=t?te:oe;return o[e]||(o[e]={configurable:!0,enumerable:t,get:function(){return re(this),this[e]},set:function(t){re(this),this[e]=t}})}function re(e){if(!0!==e.__mobxDidRunLazyInitializers){var t=e.__mobxDecorators;if(t)for(var o in A(e,"__mobxDidRunLazyInitializers",!0),t){var n=t[o];n.propertyCreator(e,n.prop,n.descriptor,n.decoratorTarget,n.decoratorArguments)}}}function ie(e,t){return function(){var o,n=function(n,r,i,a){if(!0===a)return t(n,r,i,n,o),null;if("production"===process.env.NODE_ENV||ae(arguments)||E("This function is a decorator, but it wasn't invoked like a decorator"),!Object.prototype.hasOwnProperty.call(n,"__mobxDecorators")){var s=n.__mobxDecorators;A(n,"__mobxDecorators",_({},s))}return n.__mobxDecorators[r]={prop:r,propertyCreator:t,descriptor:i,decoratorTarget:n,decoratorArguments:o},ne(r,e)};return ae(arguments)?(o=w,n.apply(null,arguments)):(o=Array.prototype.slice.call(arguments),n)}}function ae(e){return(2===e.length||3===e.length)&&"string"==typeof e[1]||4===e.length&&!0===e[3]}function se(e,t,o){return Rt(e)?e:Array.isArray(e)?_e.array(e,{name:o}):j(e)?_e.object(e,void 0,{name:o}):N(e)?_e.map(e,{name:o}):H(e)?_e.set(e,{name:o}):e}function le(e){return e}function ce(e){var t=ie(!0,(function(t,o,n,r,i){"production"!==process.env.NODE_ENV&&P(!n||!n.get,'@observable cannot be used on getter (property "'+o+'"), use @computed instead.'),function(e,t,o,n){var r=go(e);if(F(e,t),Bt(r)){var i=Ht(r,{object:e,name:t,type:"add",newValue:o});if(!i)return;o=i.newValue}var a=r.values[t]=new Ue(o,n,r.name+"."+t,!1);o=a.value,Object.defineProperty(e,t,function(e){return mo[e]||(mo[e]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.read(this,e)},set:function(t){this.$mobx.write(this,e,t)}})}(t)),r.keys&&r.keys.push(t);!function(e,t,o,n){var r=Vt(e),i=pt(),a=r||i?{type:"add",object:t,name:o,newValue:n}:null;i&&ft(_(_({},a),{name:e.name,key:o}));r&&Gt(e,a);i&&mt()}(r,e,t,o)}(t,o,n?n.initializer?n.initializer.call(t):n.value:void 0,e)})),o="undefined"!=typeof process&&process.env&&"production"!==process.env.NODE_ENV?function(){return arguments.length<2?E("Incorrect decorator invocation. @observable decorator doesn't expect any arguments"):t.apply(null,arguments)}:t;return o.enhancer=e,o}var ue={deep:!0,name:void 0,defaultDecorator:void 0},de={deep:!1,name:void 0,defaultDecorator:void 0};function pe(e){/^(deep|name|equals|defaultDecorator)$/.test(e)||E("invalid option for (extend)observable: "+e)}function he(e){if(null==e)return ue;if("string"==typeof e)return{name:e,deep:!0};if("production"!==process.env.NODE_ENV){if("object"!=typeof e)return E("expected options object");Object.keys(e).forEach(pe)}return e}function fe(e){return e.defaultDecorator?e.defaultDecorator.enhancer:!1===e.deep?le:se}Object.freeze(ue),Object.freeze(de);var ge=ce(se),me=ce((function(e,t,o){return null==e?e:_o(e)||io(e)||co(e)||ho(e)?e:Array.isArray(e)?_e.array(e,{name:o,deep:!1}):j(e)?_e.object(e,void 0,{name:o,deep:!1}):N(e)?_e.map(e,{name:o,deep:!1}):H(e)?_e.set(e,{name:o,deep:!1}):E("production"!==process.env.NODE_ENV&&"The shallow modifier / decorator can only used in combination with arrays, objects, maps and sets")})),ye=ce(le),be=ce((function(e,t,o){if("production"!==process.env.NODE_ENV&&Rt(e))throw"observable.struct should not be used with observable values";return ko(e,t)?t:e}));var ve={box:function(e,t){arguments.length>2&&xe("box");var o=he(t);return new Ue(e,fe(o),o.name,!0,o.equals)},shallowBox:function(e,t){return arguments.length>2&&xe("shallowBox"),z("observable.shallowBox","observable.box(value, { deep: false })"),_e.box(e,{name:t,deep:!1})},array:function(e,t){arguments.length>2&&xe("array");var o=he(t);return new Qt(e,fe(o),o.name)},shallowArray:function(e,t){return arguments.length>2&&xe("shallowArray"),z("observable.shallowArray","observable.array(values, { deep: false })"),_e.array(e,{name:t,deep:!1})},map:function(e,t){arguments.length>2&&xe("map");var o=he(t);return new so(e,fe(o),o.name)},shallowMap:function(e,t){return arguments.length>2&&xe("shallowMap"),z("observable.shallowMap","observable.map(values, { deep: false })"),_e.map(e,{name:t,deep:!1})},set:function(e,t){arguments.length>2&&xe("set");var o=he(t);return new po(e,fe(o),o.name)},object:function(e,t,o){"string"==typeof arguments[1]&&xe("object");var n=he(o);return Tt({},e,t,n)},shallowObject:function(e,t){return"string"==typeof arguments[1]&&xe("shallowObject"),z("observable.shallowObject","observable.object(values, {}, { deep: false })"),_e.object(e,{},{name:t,deep:!1})},ref:ye,shallow:me,deep:ge,struct:be},_e=function(e,t,o){if("string"==typeof arguments[1])return ge.apply(null,arguments);if(Rt(e))return e;var n=j(e)?_e.object(e,t,o):Array.isArray(e)?_e.array(e,t):N(e)?_e.map(e,t):H(e)?_e.set(e,t):e;if(n!==e)return n;E("production"!==process.env.NODE_ENV&&"The provided value could not be converted into an observable. If you want just create an observable reference to the object use 'observable.box(value)'")};function xe(e){E("Expected one or two arguments to observable."+e+". Did you accidentally try to use observable."+e+" as decorator?")}Object.keys(ve).forEach((function(e){return _e[e]=ve[e]}));var Se,we,ke=ie(!1,(function(e,t,o,n,r){var i=o.get,a=o.set,s=r[0]||{};!function(e,t,o){var n=go(e);o.name=n.name+"."+t,o.context=e,n.values[t]=new Ye(o),Object.defineProperty(e,t,function(e){return yo[e]||(yo[e]={configurable:Je.computedConfigurable,enumerable:!1,get:function(){return bo(this).read(this,e)},set:function(t){bo(this).write(this,e,t)}})}(t))}(e,t,_({get:i,set:a},s))})),Ce=ke({equals:ee.structural}),Oe=function(e,t,o){if("string"==typeof t)return ke.apply(null,arguments);if(null!==e&&"object"==typeof e&&1===arguments.length)return ke.apply(null,arguments);"production"!==process.env.NODE_ENV&&(P("function"==typeof e,"First argument to `computed` should be an expression."),P(arguments.length<3,"Computed takes one or two arguments if used as function"));var n="object"==typeof t?t:{};return n.get=e,n.set="function"==typeof t?t:n.set,n.name=n.name||e.name||"",new Ye(n)};Oe.struct=Ce,function(e){e[e.NOT_TRACKING=-1]="NOT_TRACKING",e[e.UP_TO_DATE=0]="UP_TO_DATE",e[e.POSSIBLY_STALE=1]="POSSIBLY_STALE",e[e.STALE=2]="STALE"}(Se||(Se={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(we||(we={}));var Te=function(e){this.cause=e};function Ee(e){return e instanceof Te}function Pe(e){switch(e.dependenciesState){case Se.UP_TO_DATE:return!1;case Se.NOT_TRACKING:case Se.STALE:return!0;case Se.POSSIBLY_STALE:for(var t=Ae(!0),o=De(),n=e.observing,r=n.length,i=0;i<r;i++){var a=n[i];if(Ke(a)){if(Je.disableErrorBoundaries)a.get();else try{a.get()}catch(e){return je(o),Le(t),!0}if(e.dependenciesState===Se.STALE)return je(o),Le(t),!0}}return Fe(e),je(o),Le(t),!1}}function Me(e){var t=e.observers.length>0;Je.computationDepth>0&&t&&E("production"!==process.env.NODE_ENV&&"Computed values are not allowed to cause side effects by changing observables that are already being observed. Tried to modify: "+e.name),Je.allowStateChanges||!t&&"strict"!==Je.enforceActions||E("production"!==process.env.NODE_ENV&&(Je.enforceActions?"Since strict-mode is enabled, changing observed observable values outside actions is not allowed. Please wrap the code in an `action` if this change is intended. Tried to modify: ":"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, the render function of a React component? Tried to modify: ")+e.name)}function ze(e,t,o){var n=Ae(!0);Fe(e),e.newObserving=new Array(e.observing.length+100),e.unboundDepsCount=0,e.runId=++Je.runId;var r,i=Je.trackingDerivation;if(Je.trackingDerivation=e,!0===Je.disableErrorBoundaries)r=t.call(o);else try{r=t.call(o)}catch(e){r=new Te(e)}return Je.trackingDerivation=i,function(e){for(var t=e.observing,o=e.observing=e.newObserving,n=Se.UP_TO_DATE,r=0,i=e.unboundDepsCount,a=0;a<i;a++){0===(s=o[a]).diffValue&&(s.diffValue=1,r!==a&&(o[r]=s),r++),s.dependenciesState>n&&(n=s.dependenciesState)}o.length=r,e.newObserving=null,i=t.length;for(;i--;){0===(s=t[i]).diffValue&&et(s,e),s.diffValue=0}for(;r--;){var s;1===(s=o[r]).diffValue&&(s.diffValue=0,Qe(s,e))}n!==Se.UP_TO_DATE&&(e.dependenciesState=n,e.onBecomeStale())}(e),0===e.observing.length&&function(e){if("production"===process.env.NODE_ENV)return;(Je.reactionRequiresObservable||e.requiresObservable)&&console.warn("[mobx] Derivation "+e.name+" is created/updated without reading any observable value")}(e),Le(n),r}function Re(e){var t=e.observing;e.observing=[];for(var o=t.length;o--;)et(t[o],e);e.dependenciesState=Se.NOT_TRACKING}function Ie(e){var t=De(),o=e();return je(t),o}function De(){var e=Je.trackingDerivation;return Je.trackingDerivation=null,e}function je(e){Je.trackingDerivation=e}function Ae(e){var t=Je.allowStateReads;return Je.allowStateReads=e,t}function Le(e){Je.allowStateReads=e}function Fe(e){if(e.dependenciesState!==Se.UP_TO_DATE){e.dependenciesState=Se.UP_TO_DATE;for(var t=e.observing,o=t.length;o--;)t[o].lowestObserverState=Se.UP_TO_DATE}}var Be=0,Ne=1;function He(e,t){"production"!==process.env.NODE_ENV&&(P("function"==typeof t,"`action` can only be invoked on functions"),"string"==typeof e&&e||E("actions should have valid names, got: '"+e+"'"));var o=function(){return Ve(e,t,this,arguments)};return o.isMobxAction=!0,o}function Ve(e,t,o,n){var r=function(e,t,o){var n=pt()&&!!e,r=0;if(n){r=Date.now();var i=o&&o.length||0,a=new Array(i);if(i>0)for(var s=0;s<i;s++)a[s]=o[s];ft({type:"action",name:e,object:t,arguments:a})}var l=De();ot();var c=We(!0),u=Ae(!0),d={prevDerivation:l,prevAllowStateChanges:c,prevAllowStateReads:u,notifySpy:n,startTime:r,actionId:Ne++,parentActionId:Be};return Be=d.actionId,d}(e,o,n);try{return t.apply(o,n)}catch(e){throw r.error=e,e}finally{!function(e){Be!==e.actionId&&E("invalid action stack. did you forget to finish an action?");Be=e.parentActionId,void 0!==e.error&&(Je.suppressReactionErrors=!0);Ge(e.prevAllowStateChanges),Le(e.prevAllowStateReads),nt(),je(e.prevDerivation),e.notifySpy&&mt({time:Date.now()-e.startTime});Je.suppressReactionErrors=!1}(r)}}function We(e){var t=Je.allowStateChanges;return Je.allowStateChanges=e,t}function Ge(e){Je.allowStateChanges=e}var Ue=function(e){function t(t,o,n,r,i){void 0===n&&(n="ObservableValue@"+T()),void 0===r&&(r=!0),void 0===i&&(i=ee.default);var a=e.call(this,n)||this;return a.enhancer=o,a.name=n,a.equals=i,a.hasUnreportedChange=!1,a.value=o(t,void 0,n),r&&pt()&&ht({type:"create",name:a.name,newValue:""+a.value}),a}return v(t,e),t.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.prototype.set=function(e){var t=this.value;if((e=this.prepareNewValue(e))!==Je.UNCHANGED){var o=pt();o&&ft({type:"update",name:this.name,newValue:e,oldValue:t}),this.setNewValue(e),o&&mt()}},t.prototype.prepareNewValue=function(e){if(Me(this),Bt(this)){var t=Ht(this,{object:this,type:"update",newValue:e});if(!t)return Je.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value,this.name),this.equals(this.value,e)?Je.UNCHANGED:e},t.prototype.setNewValue=function(e){var t=this.value;this.value=e,this.reportChanged(),Vt(this)&&Gt(this,{type:"update",object:this,newValue:e,oldValue:t})},t.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},t.prototype.intercept=function(e){return Nt(this,e)},t.prototype.observe=function(e,t){return t&&e({object:this,type:"update",newValue:this.value,oldValue:void 0}),Wt(this,e)},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.value+"]"},t.prototype.valueOf=function(){return G(this.get())},t}($);Ue.prototype[W()]=Ue.prototype.valueOf;var Xe=B("ObservableValue",Ue),Ye=function(){function e(e){this.dependenciesState=Se.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=Se.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+T(),this.value=new Te(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=we.NONE,P(e.get,"missing option for computed: get"),this.derivation=e.get,this.name=e.name||"ComputedValue@"+T(),e.set&&(this.setter=He(this.name+"-setter",e.set)),this.equals=e.equals||(e.compareStructural||e.struct?ee.structural:ee.default),this.scope=e.context,this.requiresReaction=!!e.requiresReaction,this.keepAlive=!!e.keepAlive}return e.prototype.onBecomeStale=function(){!function(e){if(e.lowestObserverState!==Se.UP_TO_DATE)return;e.lowestObserverState=Se.POSSIBLY_STALE;var t=e.observers,o=t.length;for(;o--;){var n=t[o];n.dependenciesState===Se.UP_TO_DATE&&(n.dependenciesState=Se.POSSIBLY_STALE,n.isTracing!==we.NONE&&it(n,e),n.onBecomeStale())}}(this)},e.prototype.onBecomeUnobserved=function(){},e.prototype.onBecomeObserved=function(){},e.prototype.get=function(){this.isComputing&&E("Cycle detected in computation "+this.name+": "+this.derivation),0!==Je.inBatch||0!==this.observers.length||this.keepAlive?(rt(this),Pe(this)&&this.trackAndCompute()&&function(e){if(e.lowestObserverState===Se.STALE)return;e.lowestObserverState=Se.STALE;var t=e.observers,o=t.length;for(;o--;){var n=t[o];n.dependenciesState===Se.POSSIBLY_STALE?n.dependenciesState=Se.STALE:n.dependenciesState===Se.UP_TO_DATE&&(e.lowestObserverState=Se.UP_TO_DATE)}}(this)):Pe(this)&&(this.warnAboutUntrackedRead(),ot(),this.value=this.computeValue(!1),nt());var e=this.value;if(Ee(e))throw e.cause;return e},e.prototype.peek=function(){var e=this.computeValue(!1);if(Ee(e))throw e.cause;return e},e.prototype.set=function(e){if(this.setter){P(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else P(!1,"production"!==process.env.NODE_ENV&&"[ComputedValue '"+this.name+"'] It is not possible to assign a new value to a computed value.")},e.prototype.trackAndCompute=function(){pt()&&ht({object:this.scope,type:"compute",name:this.name});var e=this.value,t=this.dependenciesState===Se.NOT_TRACKING,o=this.computeValue(!0),n=t||Ee(e)||Ee(o)||!this.equals(e,o);return n&&(this.value=o),n},e.prototype.computeValue=function(e){var t;if(this.isComputing=!0,Je.computationDepth++,e)t=ze(this,this.derivation,this.scope);else if(!0===Je.disableErrorBoundaries)t=this.derivation.call(this.scope);else try{t=this.derivation.call(this.scope)}catch(e){t=new Te(e)}return Je.computationDepth--,this.isComputing=!1,t},e.prototype.suspend=function(){this.keepAlive||(Re(this),this.value=void 0)},e.prototype.observe=function(e,t){var o=this,n=!0,r=void 0;return function(e,t){void 0===t&&(t=k);"production"!==process.env.NODE_ENV&&(P("function"==typeof e,"Autorun expects a function as first argument"),P(!1==("function"==typeof(o=e)&&!0===o.isMobxAction),"Autorun does not accept actions since actions are untrackable"));var o;var n,r=t&&t.name||e.name||"Autorun@"+T();if(t.scheduler||t.delay){var i=function(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:kt}(t),a=!1;n=new at(r,(function(){a||(a=!0,i((function(){a=!1,n.isDisposed||n.track(s)})))}),t.onError,t.requiresObservable)}else n=new at(r,(function(){this.track(s)}),t.onError,t.requiresObservable);function s(){e(n)}return n.schedule(),n.getDisposer()}((function(){var i=o.get();if(!n||t){var a=De();e({type:"update",object:o,newValue:i,oldValue:r}),je(a)}n=!1,r=i}))},e.prototype.warnAboutUntrackedRead=function(){"production"!==process.env.NODE_ENV&&(!0===this.requiresReaction&&E("[mobx] Computed value "+this.name+" is read outside a reactive context"),this.isTracing!==we.NONE&&console.log("[mobx.trace] '"+this.name+"' is being read outside a reactive context. Doing a full recompute"),Je.computedRequiresReaction&&console.warn("[mobx] Computed value "+this.name+" is being read outside a reactive context. Doing a full recompute"))},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},e.prototype.valueOf=function(){return G(this.get())},e}();Ye.prototype[W()]=Ye.prototype.valueOf;var Ke=B("ComputedValue",Ye),qe=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},$e=!0,Ze=!1,Je=function(){var e=O();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&($e=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new qe).version&&($e=!1),$e?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new qe):(setTimeout((function(){Ze||E("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")}),1),new qe)}();function Qe(e,t){var o=e.observers.length;o&&(e.observersIndexes[t.__mapid]=o),e.observers[o]=t,e.lowestObserverState>t.dependenciesState&&(e.lowestObserverState=t.dependenciesState)}function et(e,t){if(1===e.observers.length)e.observers.length=0,tt(e);else{var o=e.observers,n=e.observersIndexes,r=o.pop();if(r!==t){var i=n[t.__mapid]||0;i?n[r.__mapid]=i:delete n[r.__mapid],o[i]=r}delete n[t.__mapid]}}function tt(e){!1===e.isPendingUnobservation&&(e.isPendingUnobservation=!0,Je.pendingUnobservations.push(e))}function ot(){Je.inBatch++}function nt(){if(0==--Je.inBatch){lt();for(var e=Je.pendingUnobservations,t=0;t<e.length;t++){var o=e[t];o.isPendingUnobservation=!1,0===o.observers.length&&(o.isBeingObserved&&(o.isBeingObserved=!1,o.onBecomeUnobserved()),o instanceof Ye&&o.suspend())}Je.pendingUnobservations=[]}}function rt(e){!function(e){"production"!==process.env.NODE_ENV&&!Je.allowStateReads&&Je.observableRequiresReaction&&console.warn("[mobx] Observable "+e.name+" being read outside a reactive context")}(e);var t=Je.trackingDerivation;return null!==t?(t.runId!==e.lastAccessedBy&&(e.lastAccessedBy=t.runId,t.newObserving[t.unboundDepsCount++]=e,e.isBeingObserved||(e.isBeingObserved=!0,e.onBecomeObserved())),!0):(0===e.observers.length&&Je.inBatch>0&&tt(e),!1)}function it(e,t){if(console.log("[mobx.trace] '"+e.name+"' is invalidated due to a change in: '"+t.name+"'"),e.isTracing===we.BREAK){var o=[];!function e(t,o,n){if(o.length>=1e3)return void o.push("(and many more)");o.push(""+new Array(n).join("\t")+t.name),t.dependencies&&t.dependencies.forEach((function(t){return e(t,o,n+1)}))}((n=e,Et(xo(n,r))),o,1),new Function("debugger;\n/*\nTracing '"+e.name+"'\n\nYou are entering this break point because derivation '"+e.name+"' is being traced and '"+t.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(e instanceof Ye?e.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+o.join("\n")+"\n*/\n    ")()}var n,r}var at=function(){function e(e,t,o,n){void 0===e&&(e="Reaction@"+T()),void 0===n&&(n=!1),this.name=e,this.onInvalidate=t,this.errorHandler=o,this.requiresObservable=n,this.observing=[],this.newObserving=[],this.dependenciesState=Se.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+T(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=we.NONE}return e.prototype.onBecomeStale=function(){this.schedule()},e.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Je.pendingReactions.push(this),lt())},e.prototype.isScheduled=function(){return this._isScheduled},e.prototype.runReaction=function(){if(!this.isDisposed){if(ot(),this._isScheduled=!1,Pe(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&pt()&&ht({name:this.name,type:"scheduled-reaction"})}catch(e){this.reportExceptionInDerivation(e)}}nt()}},e.prototype.track=function(e){ot();var t,o=pt();o&&(t=Date.now(),ft({name:this.name,type:"reaction"})),this._isRunning=!0;var n=ze(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Re(this),Ee(n)&&this.reportExceptionInDerivation(n.cause),o&&mt({time:Date.now()-t}),nt()},e.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler)this.errorHandler(e,this);else{if(Je.disableErrorBoundaries)throw e;var o="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";Je.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(o,e),pt()&&ht({type:"error",name:this.name,message:o,error:""+e}),Je.globalReactionErrorHandlers.forEach((function(o){return o(e,t)}))}},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(ot(),Re(this),nt()))},e.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e.$mobx=this,e},e.prototype.toString=function(){return"Reaction["+this.name+"]"},e.prototype.trace=function(e){void 0===e&&(e=!1),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=!1;"boolean"==typeof e[e.length-1]&&(o=e.pop());var n=Lt(e);if(!n)return E("production"!==process.env.NODE_ENV&&"'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");n.isTracing===we.NONE&&console.log("[mobx.trace] '"+n.name+"' tracing enabled");n.isTracing=o?we.BREAK:we.LOG}(this,e)},e}(),st=function(e){return e()};function lt(){Je.inBatch>0||Je.isRunningReactions||st(ct)}function ct(){Je.isRunningReactions=!0;for(var e=Je.pendingReactions,t=0;e.length>0;){100==++t&&(console.error("Reaction doesn't converge to a stable state after 100 iterations. Probably there is a cycle in the reactive function: "+e[0]),e.splice(0));for(var o=e.splice(0),n=0,r=o.length;n<r;n++)o[n].runReaction()}Je.isRunningReactions=!1}var ut=B("Reaction",at);function dt(e){var t=st;st=function(o){return e((function(){return t(o)}))}}function pt(){return!!Je.spyListeners.length}function ht(e){if(Je.spyListeners.length)for(var t=Je.spyListeners,o=0,n=t.length;o<n;o++)t[o](e)}function ft(e){ht(_(_({},e),{spyReportStart:!0}))}var gt={spyReportEnd:!0};function mt(e){ht(e?_(_({},e),{spyReportEnd:!0}):gt)}function yt(e){return Je.spyListeners.push(e),R((function(){Je.spyListeners=Je.spyListeners.filter((function(t){return t!==e}))}))}function bt(){E("production"!==process.env.NODE_ENV&&"@action fields are not reassignable")}function vt(e){return function(t,o,n){if(n){if("production"!==process.env.NODE_ENV&&void 0!==n.get)return E("@action cannot be used with getters");if(n.value)return{value:He(e,n.value),enumerable:!1,configurable:!0,writable:!0};var r=n.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return He(e,r.call(this))}}}return _t(e).apply(this,arguments)}}function _t(e){return function(t,o,n){Object.defineProperty(t,o,{configurable:!0,enumerable:!1,get:function(){},set:function(t){A(this,o,xt(e,t))}})}}var xt=function(e,t,o,n){return 1===arguments.length&&"function"==typeof e?He(e.name||"<unnamed action>",e):2===arguments.length&&"function"==typeof t?He(e,t):1===arguments.length&&"string"==typeof e?vt(e):!0!==n?vt(t).apply(null,arguments):void(e[t]=He(e.name||t,o.value))};function St(e,t){var o="string"==typeof e?e:e.name||"<unnamed action>",n="function"==typeof e?e:t;return"production"!==process.env.NODE_ENV&&(P("function"==typeof n&&0===n.length,"`runInAction` expects a function without arguments"),"string"==typeof o&&o||E("actions should have valid names, got: '"+o+"'")),Ve(o,n,this,void 0)}function wt(e,t,o){A(e,t,He(t,o.bind(e)))}xt.bound=function(e,t,o,n){return!0===n?(wt(e,t,o.value),null):o?{configurable:!0,enumerable:!1,get:function(){return wt(this,t,o.value||o.initializer.call(this)),this[t]},set:bt}:{enumerable:!1,configurable:!0,set:function(e){wt(this,t,e)},get:function(){}}};var kt=function(e){return e()};function Ct(e,t,o){return Ot("onBecomeUnobserved",e,t,o)}function Ot(e,t,o,n){var r="function"==typeof n?xo(t,o):xo(t),i="function"==typeof n?n:o,a=r[e];return"function"!=typeof a?E("production"!==process.env.NODE_ENV&&"Not an atom that can be (un)observed"):(r[e]=function(){a.call(this),i.call(this)},function(){r[e]=a})}function Tt(e,t,o,n){if("production"!==process.env.NODE_ENV&&(P(arguments.length>=2&&arguments.length<=4,"'extendObservable' expected 2-4 arguments"),P("object"==typeof e,"'extendObservable' expects an object as first argument"),P(!co(e),"'extendObservable' should not be used on maps, use map.merge instead"),P(!Rt(t),"Extending an object with another observable (object) is not supported. Please construct an explicit propertymap, using `toJS` if need. See issue #540"),o))for(var r in o)r in t||E("Trying to declare a decorator for unspecified property '"+r+"'");var i=(n=he(n)).defaultDecorator||(!1===n.deep?ye:ge);re(e),go(e,n.name,i.enhancer),ot();try{for(var r in t){var a=Object.getOwnPropertyDescriptor(t,r);"production"!==process.env.NODE_ENV&&Mt(a.value)&&E("Passing a 'computed' as initial property value is no longer supported by extendObservable. Use a getter or decorator instead");var s=o&&r in o?o[r]:a.get?ke:i;if("production"!==process.env.NODE_ENV&&"function"!=typeof s)return E("Not a valid decorator for '"+r+"', got: "+s);var l=s(e,r,a,!0);l&&Object.defineProperty(e,r,l)}}finally{nt()}return e}function Et(e){var t,o,n={name:e.name};return e.observing&&e.observing.length>0&&(n.dependencies=(t=e.observing,o=[],t.forEach((function(e){-1===o.indexOf(e)&&o.push(e)})),o).map(Et)),n}function Pt(e,t){if(null==e)return!1;if(void 0!==t){if(!1===_o(e))return!1;if(!e.$mobx.values[t])return!1;var o=xo(e,t);return Ke(o)}return Ke(e)}function Mt(e){return arguments.length>1?E("production"!==process.env.NODE_ENV&&"isComputed expects only 1 argument. Use isObservableProp to inspect the observability of a property"):Pt(e)}function zt(e,t){if(null==e)return!1;if(void 0!==t){if("production"!==process.env.NODE_ENV&&(co(e)||io(e)))return E("isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead.");if(_o(e)){var o=e.$mobx;return o.values&&!!o.values[t]}return!1}return _o(e)||!!e.$mobx||Z(e)||ut(e)||Ke(e)}function Rt(e){return 1!==arguments.length&&E("production"!==process.env.NODE_ENV&&"isObservable expects only 1 argument. Use isObservableProp to inspect the observability of a property"),zt(e)}var It={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function Dt(e,t,o,n){return n.detectCycles&&e.set(t,o),o}function jt(e,t,o){if(!t.recurseEverything&&!Rt(e))return e;if("object"!=typeof e)return e;if(null===e)return null;if(e instanceof Date)return e;if(Xe(e))return jt(e.get(),t,o);var n;if(Rt(e)&&(_o(n=e)?n.$mobx.getKeys():co(n)?n._keys.slice():ho(n)?V(n.keys()):io(n)?n.map((function(e,t){return t})):E("production"!==process.env.NODE_ENV&&"'keys()' can only be used on observable objects, arrays, sets and maps")),!0===t.detectCycles&&null!==e&&o.has(e))return o.get(e);if(io(e)||Array.isArray(e)){var r=Dt(o,e,[],t),i=e.map((function(e){return jt(e,t,o)}));r.length=i.length;for(var a=0,s=i.length;a<s;a++)r[a]=i[a];return r}if(ho(e)||Object.getPrototypeOf(e)===Set.prototype){if(!1===t.exportMapsAsObjects){var l=Dt(o,e,new Set,t);return e.forEach((function(e){l.add(jt(e,t,o))})),l}var c=Dt(o,e,[],t);return e.forEach((function(e){c.push(jt(e,t,o))})),c}if(co(e)||Object.getPrototypeOf(e)===Map.prototype){if(!1===t.exportMapsAsObjects){var u=Dt(o,e,new Map,t);return e.forEach((function(e,n){u.set(n,jt(e,t,o))})),u}var d=Dt(o,e,{},t);return e.forEach((function(e,n){d[n]=jt(e,t,o)})),d}var p=Dt(o,e,{},t);for(var h in e)p[h]=jt(e[h],t,o);return p}function At(e,t){var o;return"boolean"==typeof t&&(t={detectCycles:t}),t||(t=It),t.detectCycles=void 0===t.detectCycles?!0===t.recurseEverything:!0===t.detectCycles,t.detectCycles&&(o=new Map),jt(e,t,o)}function Lt(e){switch(e.length){case 0:return Je.trackingDerivation;case 1:return xo(e[0]);case 2:return xo(e[0],e[1])}}function Ft(e,t){void 0===t&&(t=void 0),ot();try{return e.apply(t)}finally{nt()}}function Bt(e){return void 0!==e.interceptors&&e.interceptors.length>0}function Nt(e,t){var o=e.interceptors||(e.interceptors=[]);return o.push(t),R((function(){var e=o.indexOf(t);-1!==e&&o.splice(e,1)}))}function Ht(e,t){var o=De();try{var n=e.interceptors;if(n)for(var r=0,i=n.length;r<i&&(P(!(t=n[r](t))||t.type,"Intercept handlers should return nothing or a change object"),t);r++);return t}finally{je(o)}}function Vt(e){return void 0!==e.changeListeners&&e.changeListeners.length>0}function Wt(e,t){var o=e.changeListeners||(e.changeListeners=[]);return o.push(t),R((function(){var e=o.indexOf(t);-1!==e&&o.splice(e,1)}))}function Gt(e,t){var o=De(),n=e.changeListeners;if(n){for(var r=0,i=(n=n.slice()).length;r<i;r++)n[r](t);je(o)}}var Ut,Xt,Yt,Kt,qt=(Ut=!1,Xt={},Object.defineProperty(Xt,"0",{set:function(){Ut=!0}}),Object.create(Xt)[0]=1,!1===Ut),$t=0,Zt=function(){};Yt=Zt,Kt=Array.prototype,void 0!==Object.setPrototypeOf?Object.setPrototypeOf(Yt.prototype,Kt):void 0!==Yt.prototype.__proto__?Yt.prototype.__proto__=Kt:Yt.prototype=Kt,Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach((function(e){Object.defineProperty(Zt.prototype,e,{configurable:!0,writable:!0,value:Array.prototype[e]})}));var Jt=function(){function e(e,t,o,n){this.array=o,this.owned=n,this.values=[],this.lastKnownLength=0,this.atom=new $(e||"ObservableArray@"+T()),this.enhancer=function(o,n){return t(o,n,e+"[..]")}}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.dehanceValues=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},e.prototype.intercept=function(e){return Nt(this,e)},e.prototype.observe=function(e,t){return void 0===t&&(t=!1),t&&e({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Wt(this,e)},e.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},e.prototype.setArrayLength=function(e){if("number"!=typeof e||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e!==t)if(e>t){for(var o=new Array(e-t),n=0;n<e-t;n++)o[n]=void 0;this.spliceWithArray(t,0,o)}else this.spliceWithArray(e,t-e)},e.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=t,t>0&&e+t+1>$t&&no(e+t+1)},e.prototype.spliceWithArray=function(e,t,o){var n=this;Me(this.atom);var r=this.values.length;if(void 0===e?e=0:e>r?e=r:e<0&&(e=Math.max(0,r+e)),t=1===arguments.length?r-e:null==t?0:Math.max(0,Math.min(t,r-e)),void 0===o&&(o=w),Bt(this)){var i=Ht(this,{object:this.array,type:"splice",index:e,removedCount:t,added:o});if(!i)return w;t=i.removedCount,o=i.added}var a=(o=0===o.length?o:o.map((function(e){return n.enhancer(e,void 0)}))).length-t;this.updateArrayLength(r,a);var s=this.spliceItemsIntoValues(e,t,o);return 0===t&&0===o.length||this.notifyArraySplice(e,o,s),this.dehanceValues(s)},e.prototype.spliceItemsIntoValues=function(e,t,o){var n;if(o.length<1e4)return(n=this.values).splice.apply(n,S([e,t],o));var r=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(o,this.values.slice(e+t)),r},e.prototype.notifyArrayChildUpdate=function(e,t,o){var n=!this.owned&&pt(),r=Vt(this),i=r||n?{object:this.array,type:"update",index:e,newValue:t,oldValue:o}:null;n&&ft(_(_({},i),{name:this.atom.name})),this.atom.reportChanged(),r&&Gt(this,i),n&&mt()},e.prototype.notifyArraySplice=function(e,t,o){var n=!this.owned&&pt(),r=Vt(this),i=r||n?{object:this.array,type:"splice",index:e,removed:o,added:t,removedCount:o.length,addedCount:t.length}:null;n&&ft(_(_({},i),{name:this.atom.name})),this.atom.reportChanged(),r&&Gt(this,i),n&&mt()},e}(),Qt=function(e){function t(t,o,n,r){void 0===n&&(n="ObservableArray@"+T()),void 0===r&&(r=!1);var i=e.call(this)||this,a=new Jt(n,o,i,r);if(L(i,"$mobx",a),t&&t.length){var s=We(!0);i.spliceWithArray(0,0,t),Ge(s)}return qt&&Object.defineProperty(a.array,"0",eo),i}return v(t,e),t.prototype.intercept=function(e){return this.$mobx.intercept(e)},t.prototype.observe=function(e,t){return void 0===t&&(t=!1),this.$mobx.observe(e,t)},t.prototype.clear=function(){return this.splice(0)},t.prototype.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),e.map((function(e){return io(e)?e.peek():e})))},t.prototype.replace=function(e){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,e)},t.prototype.toJS=function(){return this.slice()},t.prototype.toJSON=function(){return this.toJS()},t.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},t.prototype.find=function(e,t,o){void 0===o&&(o=0),3===arguments.length&&z("The array.find fromIndex argument to find will not be supported anymore in the next major");var n=this.findIndex.apply(this,arguments);return-1===n?void 0:this.get(n)},t.prototype.findIndex=function(e,t,o){void 0===o&&(o=0),3===arguments.length&&z("The array.findIndex fromIndex argument to find will not be supported anymore in the next major");for(var n=this.peek(),r=n.length,i=o;i<r;i++)if(e.call(t,n[i],i,this))return i;return-1},t.prototype.splice=function(e,t){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(e);case 2:return this.$mobx.spliceWithArray(e,t)}return this.$mobx.spliceWithArray(e,t,o)},t.prototype.spliceWithArray=function(e,t,o){return this.$mobx.spliceWithArray(e,t,o)},t.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=this.$mobx;return o.spliceWithArray(o.values.length,0,e),o.values.length},t.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},t.prototype.shift=function(){return this.splice(0,1)[0]},t.prototype.unshift=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=this.$mobx;return o.spliceWithArray(0,0,e),o.values.length},t.prototype.reverse=function(){var e=this.slice();return e.reverse.apply(e,arguments)},t.prototype.sort=function(e){var t=this.slice();return t.sort.apply(t,arguments)},t.prototype.remove=function(e){var t=this.$mobx.dehanceValues(this.$mobx.values).indexOf(e);return t>-1&&(this.splice(t,1),!0)},t.prototype.move=function(e,t){function o(e){if(e<0)throw new Error("[mobx.array] Index out of bounds: "+e+" is negative");var t=this.$mobx.values.length;if(e>=t)throw new Error("[mobx.array] Index out of bounds: "+e+" is not smaller than "+t)}if(z("observableArray.move is deprecated, use .slice() & .replace() instead"),o.call(this,e),o.call(this,t),e!==t){var n,r=this.$mobx.values;n=e<t?S(r.slice(0,e),r.slice(e+1,t+1),[r[e]],r.slice(t+1)):S(r.slice(0,t),[r[e]],r.slice(t,e),r.slice(e+1)),this.replace(n)}},t.prototype.get=function(e){var t=this.$mobx;if(t){if(e<t.values.length)return t.atom.reportObserved(),t.dehanceValue(t.values[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+t.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},t.prototype.set=function(e,t){var o=this.$mobx,n=o.values;if(e<n.length){Me(o.atom);var r=n[e];if(Bt(o)){var i=Ht(o,{type:"update",object:this,index:e,newValue:t});if(!i)return;t=i.newValue}(t=o.enhancer(t,r))!==r&&(n[e]=t,o.notifyArrayChildUpdate(e,t,r))}else{if(e!==n.length)throw new Error("[mobx.array] Index out of bounds, "+e+" is larger than "+n.length);o.spliceWithArray(e,0,[t])}},t}(Zt);X(Qt.prototype,(function(){this.$mobx.atom.reportObserved();var e=this,t=0;return Y({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})})),Object.defineProperty(Qt.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(e){this.$mobx.setArrayLength(e)}}),A(Qt.prototype,K(),"Array"),["every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach((function(e){var t=Array.prototype[e];P("function"==typeof t,"Base function not defined on Array prototype: '"+e+"'"),A(Qt.prototype,e,(function(){return t.apply(this.peek(),arguments)}))})),function(e,t){for(var o=0;o<t.length;o++)A(e,t[o],e[t[o]])}(Qt.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var eo=to(0);function to(e){return{enumerable:!1,configurable:!1,get:function(){return this.get(e)},set:function(t){this.set(e,t)}}}function oo(e){Object.defineProperty(Qt.prototype,""+e,to(e))}function no(e){for(var t=$t;t<e;t++)oo(t);$t=e}no(1e3);var ro=B("ObservableArrayAdministration",Jt);function io(e){return D(e)&&ro(e.$mobx)}var ao={},so=function(){function e(e,t,o){if(void 0===t&&(t=se),void 0===o&&(o="ObservableMap@"+T()),this.enhancer=t,this.name=o,this.$mobx=ao,this._keys=new Qt(void 0,le,this.name+".keys()",!0),"function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(e)}return e.prototype._has=function(e){return this._data.has(e)},e.prototype.has=function(e){var t=this;if(!Je.trackingDerivation)return this._has(e);var o=this._hasMap.get(e);if(!o){var n=o=new Ue(this._has(e),le,this.name+"."+lo(e)+"?",!1);this._hasMap.set(e,n),Ct(n,(function(){return t._hasMap.delete(e)}))}return o.get()},e.prototype.set=function(e,t){var o=this._has(e);if(Bt(this)){var n=Ht(this,{type:o?"update":"add",object:this,newValue:t,name:e});if(!n)return this;t=n.newValue}return o?this._updateValue(e,t):this._addValue(e,t),this},e.prototype.delete=function(e){var t=this;if(Bt(this)&&!(r=Ht(this,{type:"delete",object:this,name:e})))return!1;if(this._has(e)){var o=pt(),n=Vt(this),r=n||o?{type:"delete",object:this,oldValue:this._data.get(e).value,name:e}:null;return o&&ft(_(_({},r),{name:this.name,key:e})),Ft((function(){t._keys.remove(e),t._updateHasMapEntry(e,!1),t._data.get(e).setNewValue(void 0),t._data.delete(e)})),n&&Gt(this,r),o&&mt(),!0}return!1},e.prototype._updateHasMapEntry=function(e,t){var o=this._hasMap.get(e);o&&o.setNewValue(t)},e.prototype._updateValue=function(e,t){var o=this._data.get(e);if((t=o.prepareNewValue(t))!==Je.UNCHANGED){var n=pt(),r=Vt(this),i=r||n?{type:"update",object:this,oldValue:o.value,name:e,newValue:t}:null;n&&ft(_(_({},i),{name:this.name,key:e})),o.setNewValue(t),r&&Gt(this,i),n&&mt()}},e.prototype._addValue=function(e,t){var o=this;Ft((function(){var n=new Ue(t,o.enhancer,o.name+"."+lo(e),!1);o._data.set(e,n),t=n.value,o._updateHasMapEntry(e,!0),o._keys.push(e)}));var n=pt(),r=Vt(this),i=r||n?{type:"add",object:this,name:e,newValue:t}:null;n&&ft(_(_({},i),{name:this.name,key:e})),r&&Gt(this,i),n&&mt()},e.prototype.get=function(e){return this.has(e)?this.dehanceValue(this._data.get(e).get()):this.dehanceValue(void 0)},e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.keys=function(){return this._keys[U()]()},e.prototype.values=function(){var e=this,t=0;return Y({next:function(){return t<e._keys.length?{value:e.get(e._keys[t++]),done:!1}:{value:void 0,done:!0}}})},e.prototype.entries=function(){var e=this,t=0;return Y({next:function(){if(t<e._keys.length){var o=e._keys[t++];return{value:[o,e.get(o)],done:!1}}return{done:!0}}})},e.prototype.forEach=function(e,t){var o=this;this._keys.forEach((function(n){return e.call(t,o.get(n),n,o)}))},e.prototype.merge=function(e){var t=this;return co(e)&&(e=e.toJS()),Ft((function(){j(e)?Object.keys(e).forEach((function(o){return t.set(o,e[o])})):Array.isArray(e)?e.forEach((function(e){var o=x(e,2),n=o[0],r=o[1];return t.set(n,r)})):N(e)?e.constructor!==Map?E("Cannot initialize from classes that inherit from Map: "+e.constructor.name):e.forEach((function(e,o){return t.set(o,e)})):null!=e&&E("Cannot initialize map from "+e)})),this},e.prototype.clear=function(){var e=this;Ft((function(){Ie((function(){e._keys.slice().forEach((function(t){return e.delete(t)}))}))}))},e.prototype.replace=function(e){var t=this;return Ft((function(){for(var o,n=N(o=e)||co(o)?o:Array.isArray(o)?new Map(o):j(o)?new Map(Object.entries(o)):E("Cannot convert to map from '"+o+"'"),r=t._keys,i=Array.from(n.keys()),a=!1,s=0;s<r.length;s++){var l=r[s];r.length===i.length&&l!==i[s]&&(a=!0),n.has(l)||(a=!0,t.delete(l))}n.forEach((function(e,o){t._data.has(o)||(a=!0),t.set(o,e)})),a&&t._keys.replace(i)})),this},Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.toPOJO=function(){var e=this,t={};return this._keys.forEach((function(o){return t["symbol"==typeof o?o:lo(o)]=e.get(o)})),t},e.prototype.toJS=function(){var e=this,t=new Map;return this._keys.forEach((function(o){return t.set(o,e.get(o))})),t},e.prototype.toJSON=function(){return this.toPOJO()},e.prototype.toString=function(){var e=this;return this.name+"[{ "+this._keys.map((function(t){return lo(t)+": "+e.get(t)})).join(", ")+" }]"},e.prototype.observe=function(e,t){return"production"!==process.env.NODE_ENV&&P(!0!==t,"`observe` doesn't support fireImmediately=true in combination with maps."),Wt(this,e)},e.prototype.intercept=function(e){return Nt(this,e)},e}();function lo(e){return e&&e.toString?e.toString():new String(e).toString()}X(so.prototype,(function(){return this.entries()})),L(so.prototype,K(),"Map");var co=B("ObservableMap",so),uo={},po=function(){function e(e,t,o){if(void 0===t&&(t=se),void 0===o&&(o="ObservableSet@"+T()),this.name=o,this.$mobx=uo,this._data=new Set,this._atom=J(this.name),"function"!=typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(e,n){return t(e,n,o)},e&&this.replace(e)}return e.prototype.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},e.prototype.clear=function(){var e=this;Ft((function(){Ie((function(){e._data.forEach((function(t){e.delete(t)}))}))}))},e.prototype.forEach=function(e,t){var o=this;this._data.forEach((function(n){e.call(t,n,n,o)}))},Object.defineProperty(e.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),e.prototype.add=function(e){var t=this;if((Me(this._atom),Bt(this))&&!(r=Ht(this,{type:"add",object:this,newValue:e})))return this;if(!this.has(e)){Ft((function(){t._data.add(t.enhancer(e,void 0)),t._atom.reportChanged()}));var o=pt(),n=Vt(this),r=n||o?{type:"add",object:this,newValue:e}:null;o&&"production"!==process.env.NODE_ENV&&ft(r),n&&Gt(this,r),o&&"production"!==process.env.NODE_ENV&&mt()}return this},e.prototype.delete=function(e){var t=this;if(Bt(this)&&!(r=Ht(this,{type:"delete",object:this,oldValue:e})))return!1;if(this.has(e)){var o=pt(),n=Vt(this),r=n||o?{type:"delete",object:this,oldValue:e}:null;return o&&"production"!==process.env.NODE_ENV&&ft(_(_({},r),{name:this.name})),Ft((function(){t._atom.reportChanged(),t._data.delete(e)})),n&&Gt(this,r),o&&"production"!==process.env.NODE_ENV&&mt(),!0}return!1},e.prototype.has=function(e){return this._atom.reportObserved(),this._data.has(this.dehanceValue(e))},e.prototype.entries=function(){var e=0,t=V(this.keys()),o=V(this.values());return Y({next:function(){var n=e;return e+=1,n<o.length?{value:[t[n],o[n]],done:!1}:{done:!0}}})},e.prototype.keys=function(){return this.values()},e.prototype.values=function(){this._atom.reportObserved();var e,t=this,o=0;return void 0!==this._data.values?e=V(this._data.values()):(e=[],this._data.forEach((function(t){return e.push(t)}))),Y({next:function(){return o<e.length?{value:t.dehanceValue(e[o++]),done:!1}:{done:!0}}})},e.prototype.replace=function(e){var t=this;return ho(e)&&(e=e.toJS()),Ft((function(){Array.isArray(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):H(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&E("Cannot initialize set from "+e)})),this},e.prototype.observe=function(e,t){return"production"!==process.env.NODE_ENV&&P(!0!==t,"`observe` doesn't support fireImmediately=true in combination with sets."),Wt(this,e)},e.prototype.intercept=function(e){return Nt(this,e)},e.prototype.toJS=function(){return new Set(this)},e.prototype.toString=function(){return this.name+"[ "+V(this.keys()).join(", ")+" ]"},e}();X(po.prototype,(function(){return this.values()})),L(po.prototype,K(),"Set");var ho=B("ObservableSet",po),fo=function(){function e(e,t,o){this.target=e,this.name=t,this.defaultEnhancer=o,this.values={}}return e.prototype.read=function(e,t){if("production"!==process.env.NODE_ENV||this.target===e||(this.illegalAccess(e,t),this.values[t]))return this.values[t].get()},e.prototype.write=function(e,t,o){var n=this.target;"production"===process.env.NODE_ENV&&n!==e&&this.illegalAccess(e,t);var r=this.values[t];if(r instanceof Ye)r.set(o);else{if(Bt(this)){if(!(s=Ht(this,{type:"update",object:n,name:t,newValue:o})))return;o=s.newValue}if((o=r.prepareNewValue(o))!==Je.UNCHANGED){var i=Vt(this),a=pt(),s=i||a?{type:"update",object:n,oldValue:r.value,name:t,newValue:o}:null;a&&ft(_(_({},s),{name:this.name,key:t})),r.setNewValue(o),i&&Gt(this,s),a&&mt()}}},e.prototype.remove=function(e){if(this.values[e]){var t=this.target;if(Bt(this))if(!(i=Ht(this,{object:t,name:e,type:"remove"})))return;try{ot();var o=Vt(this),n=pt(),r=this.values[e].get();this.keys&&this.keys.remove(e),delete this.values[e],delete this.target[e];var i=o||n?{type:"remove",object:t,oldValue:r,name:e}:null;n&&ft(_(_({},i),{name:this.name,key:e})),o&&Gt(this,i),n&&mt()}finally{nt()}}},e.prototype.illegalAccess=function(e,t){console.warn("Property '"+t+"' of '"+e+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},e.prototype.observe=function(e,t){return"production"!==process.env.NODE_ENV&&P(!0!==t,"`observe` doesn't support the fire immediately property for observable objects."),Wt(this,e)},e.prototype.intercept=function(e){return Nt(this,e)},e.prototype.getKeys=function(){var e=this;return void 0===this.keys&&(this.keys=new Qt(Object.keys(this.values).filter((function(t){return e.values[t]instanceof Ue})),le,"keys("+this.name+")",!0)),this.keys.slice()},e}();function go(e,t,o){void 0===t&&(t=""),void 0===o&&(o=se);var n=e.$mobx;return n||("production"!==process.env.NODE_ENV&&P(Object.isExtensible(e),"Cannot make the designated object observable; it is not extensible"),j(e)||(t=(e.constructor.name||"ObservableObject")+"@"+T()),t||(t="ObservableObject@"+T()),L(e,"$mobx",n=new fo(e,t,o)),n)}var mo=Object.create(null),yo=Object.create(null);function bo(e){var t=e.$mobx;return t||(re(e),e.$mobx)}var vo=B("ObservableObjectAdministration",fo);function _o(e){return!!D(e)&&(re(e),vo(e.$mobx))}function xo(e,t){if("object"==typeof e&&null!==e){if(io(e))return void 0!==t&&E("production"!==process.env.NODE_ENV&&"It is not possible to get index atoms from arrays"),e.$mobx.atom;if(ho(e))return e.$mobx;if(co(e)){var o=e;return void 0===t?xo(o._keys):((n=o._data.get(t)||o._hasMap.get(t))||E("production"!==process.env.NODE_ENV&&"the entry '"+t+"' does not exist in the observable map '"+So(e)+"'"),n)}var n;if(re(e),t&&!e.$mobx&&e[t],_o(e))return t?((n=e.$mobx.values[t])||E("production"!==process.env.NODE_ENV&&"no observable property '"+t+"' found on the observable object '"+So(e)+"'"),n):E("production"!==process.env.NODE_ENV&&"please specify a property");if(Z(e)||Ke(e)||ut(e))return e}else if("function"==typeof e&&ut(e.$mobx))return e.$mobx;return E("production"!==process.env.NODE_ENV&&"Cannot obtain atom from "+e)}function So(e,t){return(void 0!==t?xo(e,t):_o(e)||co(e)||ho(e)?function e(t,o){return t||E("Expecting some object"),void 0!==o?e(xo(t,o)):Z(t)||Ke(t)||ut(t)?t:co(t)||ho(t)?t:(re(t),t.$mobx?t.$mobx:void E("production"!==process.env.NODE_ENV&&"Cannot obtain administration from "+t))}(e):xo(e)).name}var wo=Object.prototype.toString;function ko(e,t,o){return void 0===o&&(o=-1),function e(t,o,n,r,i){if(t===o)return 0!==t||1/t==1/o;if(null==t||null==o)return!1;if(t!=t)return o!=o;var a=typeof t;if("function"!==a&&"object"!==a&&"object"!=typeof o)return!1;t=Co(t),o=Co(o);var s=wo.call(t);if(s!==wo.call(o))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+t==""+o;case"[object Number]":return+t!=+t?+o!=+o:0==+t?1/+t==1/o:+t==+o;case"[object Date]":case"[object Boolean]":return+t==+o;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(t)===Symbol.valueOf.call(o)}var l="[object Array]"===s;if(!l){if("object"!=typeof t||"object"!=typeof o)return!1;var c=t.constructor,u=o.constructor;if(c!==u&&!("function"==typeof c&&c instanceof c&&"function"==typeof u&&u instanceof u)&&"constructor"in t&&"constructor"in o)return!1}if(0===n)return!1;n<0&&(n=-1);i=i||[];var d=(r=r||[]).length;for(;d--;)if(r[d]===t)return i[d]===o;if(r.push(t),i.push(o),l){if((d=t.length)!==o.length)return!1;for(;d--;)if(!e(t[d],o[d],n-1,r,i))return!1}else{var p=Object.keys(t),h=void 0;if(d=p.length,Object.keys(o).length!==d)return!1;for(;d--;)if(h=p[d],!Oo(o,h)||!e(t[h],o[h],n-1,r,i))return!1}return r.pop(),i.pop(),!0}(e,t,o)}function Co(e){return io(e)?e.peek():N(e)||co(e)?V(e.entries()):H(e)||ho(e)?V(e.entries()):e}function Oo(e,t){return Object.prototype.hasOwnProperty.call(e,t)}try{process.env.NODE_ENV}catch(e){var To=O();"undefined"==typeof process&&(To.process={}),To.process.env={}}!function(){if("testCodeMinification"!==function(){}.name&&"production"!==process.env.NODE_ENV&&"true"!==process.env.IGNORE_MOBX_MINIFY_WARNING){var e=["process","env","NODE_ENV"].join(".");console.warn("[mobx] you are running a minified build, but '"+e+"' was not set to 'production' in your bundler. This results in an unnecessarily large and slow bundle")}}();if("object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:yt,extras:{getDebugName:So},$mobx:"$mobx"}),"production"!==process.env.NODE_ENV&&"undefined"!=typeof module&&void 0!==module.exports){var Eo=!1;Object.defineProperty(module.exports,"default",{enumerable:!1,get:function(){Eo||(Eo=!0,console.warn('The MobX package does not have a default export. Use \'import { thing } from "mobx"\' (recommended) or \'import * as mobx from "mobx"\' instead."'))}}),["extras","Atom","BaseAtom","asFlat","asMap","asReference","asStructure","autorunAsync","createTranformer","expr","isModifierDescriptor","isStrictModeEnabled","map","useStrict","whyRun"].forEach((function(e){Object.defineProperty(module.exports,e,{enumerable:!1,get:function(){E("'"+e+"' is no longer part of the public MobX api. Please consult the changelog to find out where this functionality went")},set:function(){}})}))}var Po=function(){function e(e,t){this.from=e,this.to=t}return e.prototype.contains=function(e){return this.from<=e&&e<=this.to},e.prototype.clamp=function(e){return Math.min(Math.max(this.from,e),this.to)},e}(),Mo=new Po(-1,1),zo=function(){function e(e){this.engineMediator=e,this.state=y}return e.prototype.editAdjustments=function(e){var t=e.type,o=e.value,n=Mo.clamp(o);this.state[t]=n},e.prototype.reset=function(){var e=this;St((function(){-1===e.indexInContainer&&(Object.keys(y).forEach((function(t){e.state[t]=y[t]})),e.orderHelper.removeIndex(r.Tool.ADJUSTMENT))}))},Object.defineProperty(e.prototype,"indexInContainer",{get:function(){return this.effect?this.effect.getIndexInParent():-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orderHelper",{get:function(){return this.engineMediator.orderHelper},enumerable:!0,configurable:!0}),e.prototype.setAdjustmentEffect=function(e){var t=this.orderHelper.addIndex(r.Tool.ADJUSTMENT);return this.effect?this.effect.setProperties(e):this.effect=this.engineMediator.engine.addAdjustments(e,this.engineMediator.image.container,t),this.effect.getProperties()},e.prototype.removeAdjustmentEffect=function(){this.effect&&(this.engineMediator.engine.removeEffect(this.effect),-1===this.indexInContainer&&(this.effect=void 0))},r.__decorate([_e],e.prototype,"state",void 0),r.__decorate([xt],e.prototype,"editAdjustments",null),r.__decorate([xt],e.prototype,"reset",null),e}(),Ro=function(){function e(e,t){var o=this;this.assets=[],this.withoutItems=function(e){e.items;return r.__rest(e,["items"])},this.entityMapper=function(e,t){return o.isCategory(e)?o.categoryMapper(e,t):o.itemMapper(e,t)},this.categoryMapper=function(e,t){return e?r.__assign({},e,{thumbnailURI:o.getCategoryPath(e),type:exports.CardType.LARGE,delay:.08*t,name:o.config.locale[e.identifier]||e.name,items:e.items.map(o.itemMapper)}):null},this.itemMapper=function(e,t){return e?r.__assign({},e,{thumbnailURI:o.getItemPath(e),type:exports.CardType.MEDIUM,delay:.08*t,name:o.config.locale[e.identifier]||e.name}):null},this.getCategoryPath=function(e){return r.isStickerCategoryDynamic(e)&&o.config.categoryDynamicKey?e[o.config.categoryDynamicKey]:o.config.getAssetPath(e[o.config.categoryKey]||"")},this.getItemPath=function(e){return r.isStickerAssetDynamic(e)&&o.config.itemDynamicKey?e[o.config.itemDynamicKey]:o.config.getAssetPath(e[o.config.itemKey]||"")},this.config=t,this.assets=e.map(this.entityMapper).filter(Boolean)}return Object.defineProperty(e.prototype,"categories",{get:function(){return this.assets},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var e=this;return this.assets.reduce((function(t,o){return e.isCategory(o)?r.__spread(t,o.items):r.__spread(t,[o])}),[]).filter(Boolean)},enumerable:!0,configurable:!0}),e.prototype.getEntities=function(e){if(this.config.flattenCategories)return this.items;if(e){var t=this.assets.findIndex((function(t){return t.identifier===e}));if(-1!==t){var o=this.categories[t].items;return r.__spread(this.categories.slice(0,t+1),o,this.categories.slice(t+1)).map(this.withoutItems)}}return this.categories.map(this.withoutItems)},e.prototype.isCategory=function(e){return e.hasOwnProperty("items")},e}(),Io=function(){function e(e){var t=this;this.dirty=_e.box(!1),this.reset=function(){t.pureReset(),t.addSnapshot("delete",t.locale.controls.buttonReset),t.editor.render()},this.editor=e,this.adjustmentsStore=new zo(this.editor.engineMediator),this.selectedOption="";var o=this.editor.assetProvider.getAssets("adjustment");this.entityManager=new Ro(o,r.__assign({},this.config,{flattenCategories:!1,categoryKey:"",itemKey:"thumbnailURI",locale:r.__assign({},this.locale.items,this.locale.categories),getAssetPath:this.editor.getAssetPath("adjustment")}))}return e.prototype.editAdjustments=function(e){var t=e.type,o=e.value;this.pureSetAdjustment({type:t,value:o}),this.editor.render()},e.prototype.toolSnapshot=function(){this.dirty.set(!0),this.addSnapshot("edit",r.Tool.ADJUSTMENT)},e.prototype.addSnapshot=function(e,t){this.editor.addSnapshot(void 0,e,t)},e.prototype.toggleOptionSelection=function(e){this.selectedOption=e},e.prototype.pureSetAdjustment=function(e){var t,o=e.type,n=e.value,r=this.adjustmentsStore.setAdjustmentEffect(((t={})[o]=n,t));this.adjustmentsStore.editAdjustments({type:o,value:r[o]})},e.prototype.pureReset=function(){this.dirty.set(!1),this.adjustmentsStore.removeAdjustmentEffect(),this.adjustmentsStore.reset(),this.selectedOption=""},e.prototype.updateStateFromHistory=function(e){var t=this;St((function(){Object.keys(e).forEach((function(o){t.pureSetAdjustment({type:o,value:e[o]})}))}))},e.prototype.updateStateFromSerialization=function(e){this.updateStateFromHistory(e)},Object.defineProperty(e.prototype,"selectedAdjustmentType",{get:function(){return this.selectedOption},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDirty",{get:function(){return this.dirty.get()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this.adjustmentsStore.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedOptionLabel",{get:function(){var e=this,t=this.options.find((function(t){return!!t&&t.identifier===e.selectedOption}));return t?t.name:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"brightness",{get:function(){return this.state.brightness},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"saturation",{get:function(){return this.state.saturation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contrast",{get:function(){return this.state.contrast},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gamma",{get:function(){return this.state.gamma},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clarity",{get:function(){return this.state.clarity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exposure",{get:function(){return this.state.exposure},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shadows",{get:function(){return this.state.shadows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highlights",{get:function(){return this.state.highlights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"whites",{get:function(){return this.state.whites},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blacks",{get:function(){return this.state.blacks},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"temperature",{get:function(){return this.state.temperature},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sharpness",{get:function(){return this.state.sharpness},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categories",{get:function(){return this.entityManager.categories},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){var e=this;return this.entityManager.categories.reduce((function(t,o){var n=e.entityManager.isCategory(o)?o.items:[o];return r.__spread(t,n)}),[])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.editor.configStore.config[r.Tool.ADJUSTMENT]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get:function(){return this.editor.configStore.locale[r.Tool.ADJUSTMENT]},enumerable:!0,configurable:!0}),r.__decorate([_e],e.prototype,"selectedOption",void 0),r.__decorate([_e],e.prototype,"dirty",void 0),r.__decorate([xt],e.prototype,"editAdjustments",null),r.__decorate([xt],e.prototype,"toggleOptionSelection",null),r.__decorate([xt],e.prototype,"pureSetAdjustment",null),r.__decorate([xt],e.prototype,"pureReset",null),r.__decorate([xt],e.prototype,"reset",void 0),r.__decorate([xt],e.prototype,"updateStateFromHistory",null),r.__decorate([xt],e.prototype,"updateStateFromSerialization",null),r.__decorate([Oe],e.prototype,"selectedAdjustmentType",null),r.__decorate([Oe],e.prototype,"isDirty",null),r.__decorate([Oe],e.prototype,"state",null),r.__decorate([Oe],e.prototype,"selectedOptionLabel",null),r.__decorate([Oe],e.prototype,"brightness",null),r.__decorate([Oe],e.prototype,"saturation",null),r.__decorate([Oe],e.prototype,"contrast",null),r.__decorate([Oe],e.prototype,"gamma",null),r.__decorate([Oe],e.prototype,"clarity",null),r.__decorate([Oe],e.prototype,"exposure",null),r.__decorate([Oe],e.prototype,"shadows",null),r.__decorate([Oe],e.prototype,"highlights",null),r.__decorate([Oe],e.prototype,"whites",null),r.__decorate([Oe],e.prototype,"blacks",null),r.__decorate([Oe],e.prototype,"temperature",null),r.__decorate([Oe],e.prototype,"sharpness",null),r.__decorate([Oe],e.prototype,"categories",null),r.__decorate([Oe],e.prototype,"options",null),r.__decorate([Oe],e.prototype,"config",null),r.__decorate([Oe],e.prototype,"locale",null),e}(),Do={identifier:"identity",intensity:1,isDuotone:!1},jo=new Po(0,1),Ao=function(){function e(e){var t=this;this.setEffectProperties=function(e){var o=e.intensity;return t.effect?(t.state.isDuotone?t.effect.setProperties({colorIntensity:o}):t.effect.setProperties({intensity:o}),t.effect.getProperties()):null},this.engineMediator=e,this.state=Do}return e.prototype.changeIdentifier=function(e){this.state.identifier=e},e.prototype.changeIfDuotone=function(e){this.state.isDuotone=e},e.prototype.changeIntensity=function(e){var t=jo.clamp(e);this.state.intensity=t},e.prototype.reset=function(){-1===this.indexInContainer&&(this.state.identifier=Do.identifier,this.state.intensity=Do.intensity,this.removeIndex())},Object.defineProperty(e.prototype,"indexInContainer",{get:function(){return this.effect?this.effect.getIndexInParent():-1},enumerable:!0,configurable:!0}),e.prototype.setFilterEffect=function(e){var t=this,o=e.identifier,n=e.intensity,i=e.isDuotone,a=this.state;this.changeIdentifier(o),this.changeIntensity(n),this.changeIfDuotone(i),this.removeFilterEffect();var s=this.engineMediator.orderHelper.addIndex(r.Tool.FILTER);return new Promise(i?function(e,r){t.engineMediator.engine.addDuoToneFilterFromAssets(o,t.engineMediator.image.container,s).then((function(o){t.effect=o,t.effect.setProperties({colorIntensity:n}),e()})).catch((function(e){t.fallbackOnError(a),r(e)}))}:function(e,r){t.engineMediator.engine.addLUTFilterFromAssets(o,t.engineMediator.image.container,s).then((function(o){t.effect=o,t.effect.setProperties({intensity:n}),e()})).catch((function(e){t.fallbackOnError(a),r(e)}))})},e.prototype.removeFilterEffect=function(){this.effect&&(this.engineMediator.engine.removeEffect(this.effect),-1===this.indexInContainer&&(this.effect=void 0))},e.prototype.removeIndex=function(){this.engineMediator.orderHelper.removeIndex(r.Tool.FILTER)},e.prototype.fallbackOnError=function(e){this.changeIdentifier(e.identifier),this.changeIntensity(e.intensity),"identity"===e.identifier&&this.removeIndex()},r.__decorate([_e],e.prototype,"state",void 0),r.__decorate([xt],e.prototype,"changeIdentifier",null),r.__decorate([xt],e.prototype,"changeIfDuotone",null),r.__decorate([xt],e.prototype,"changeIntensity",null),r.__decorate([xt],e.prototype,"reset",null),e}(),Lo=function(){function e(e){var t=this;this.changeIntensity=function(e){var o=t.isOptionDuoTone(t.identifier),n=t.filterStore.setEffectProperties({intensity:e});if(n){var r=o?n.colorIntensity:n.intensity;t.filterStore.changeIntensity(r),t.editor.render()}},this.reset=function(){t.pureReset(),t.addSnapshot("delete",t.locale.controls.buttonReset),t.editor.render()},this.editor=e,this.selectedCategory="identity",this.filterStore=new Ao(this.editor.engineMediator);var o=this.config,n=this.editor.configStore.assetProvider.getAssets("filter");this.entityManager=new Ro(n,r.__assign({},o,{categoryKey:"thumbnailURI",itemKey:"thumbnailURI",locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")}))}return e.prototype.selectFilter=function(e,t){return void 0===t&&(t=1),r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(o){switch(o.label){case 0:return e===this.identifier?[3,2]:[4,this.filterStore.setFilterEffect({identifier:e,intensity:t,isDuotone:this.isOptionDuoTone(e)})];case 1:return o.sent(),this.editor.render(),this.addSnapshot("add",r.Tool.FILTER),[3,3];case 2:this.reset(),o.label=3;case 3:return[2]}}))}))},e.prototype.toolSnapshot=function(){this.addSnapshot("edit",this.locale.controls.sliderIntensity)},e.prototype.addSnapshot=function(e,t){this.editor.addSnapshot(void 0,e,t)},e.prototype.pureReset=function(){this.selectedCategory="identity",this.filterStore.removeFilterEffect(),this.filterStore.reset()},e.prototype.toggleCategorySelection=function(e){this.selectedCategory=this.selectedCategory===e?"identity":e},e.prototype.updateStateFromSerialization=function(e){var t=e.identifier,o=e.intensity,n=this.doesFilterAssetExist(t);if(n){var i=r.isDuoToneFilterAsset(n);return this.filterStore.setFilterEffect({identifier:t,intensity:o,isDuotone:i})}return new Promise((function(e,o){o("Filter Asset "+t+" doesn't exist")}))},e.prototype.updateStateFromHistory=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return"identity"===e.identifier?(this.pureReset(),[2,new Promise((function(e,t){e()}))]):[2,this.filterStore.setFilterEffect(e)]}))}))},Object.defineProperty(e.prototype,"state",{get:function(){return this.filterStore.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.state.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"intensity",{get:function(){return this.state.intensity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDuotone",{get:function(){return this.state.isDuotone},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedCategoryIdentifier",{get:function(){return this.selectedCategory},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOptionSelected",{get:function(){return"identity"!==this.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.editor.configStore.config[r.Tool.FILTER]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get:function(){return this.editor.configStore.locale[r.Tool.FILTER]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"entities",{get:function(){return this.entityManager.getEntities(this.selectedCategoryIdentifier)},enumerable:!0,configurable:!0}),e.prototype.doesFilterAssetExist=function(e){return this.entityManager.items.find((function(t){return e===t.identifier}))},e.prototype.isOptionDuoTone=function(e){var t=this.doesFilterAssetExist(e);return!!t&&r.isDuoToneFilterAsset(t)},r.__decorate([_e],e.prototype,"selectedCategory",void 0),r.__decorate([xt],e.prototype,"selectFilter",null),r.__decorate([xt],e.prototype,"changeIntensity",void 0),r.__decorate([xt],e.prototype,"pureReset",null),r.__decorate([xt],e.prototype,"reset",void 0),r.__decorate([xt],e.prototype,"toggleCategorySelection",null),r.__decorate([xt],e.prototype,"updateStateFromSerialization",null),r.__decorate([xt],e.prototype,"updateStateFromHistory",null),r.__decorate([Oe],e.prototype,"state",null),r.__decorate([Oe],e.prototype,"identifier",null),r.__decorate([Oe],e.prototype,"intensity",null),r.__decorate([Oe],e.prototype,"isDuotone",null),r.__decorate([Oe],e.prototype,"selectedCategoryIdentifier",null),r.__decorate([Oe],e.prototype,"isOptionSelected",null),r.__decorate([Oe],e.prototype,"config",null),r.__decorate([Oe],e.prototype,"locale",null),r.__decorate([Oe],e.prototype,"entities",null),e}(),Fo={blurRadius:40,gradientSize:.2},Bo={identifier:"identity",linear:r.__assign({start:{x:0,y:0},end:{x:0,y:0}},Fo),radial:r.__assign({center:{x:0,y:0},radius:0},Fo),mirrored:r.__assign({origin:{x:0,y:0},rotation:0,size:0},Fo),gaussian:Fo},No=function(){function e(e){this.engineMediator=e,this.state=Bo}return e.prototype.selectFocus=function(e,t){var o=this;St((function(){o.state.identifier=e,t&&(o.state[e].blurRadius=t)}))},e.prototype.changeBlurRadius=function(e,t){"identity"!==e&&(this.state[e].blurRadius=t)},e.prototype.reset=function(){-1===this.indexInContainer&&(this.state.identifier=Bo.identifier,"identity"!==this.state.identifier&&(this.state[this.state.identifier].blurRadius=Bo[this.state.identifier].blurRadius))},e.prototype.setLinear=function(e){var t=e.start,o=e.end;this.state.linear.start.x=t.x,this.state.linear.start.y=t.y,this.state.linear.end.x=o.x,this.state.linear.end.y=o.y},e.prototype.setLinearStart=function(e){this.state.linear.start.x=e.x,this.state.linear.start.y=e.y},e.prototype.setLinearEnd=function(e){this.state.linear.end.x=e.x,this.state.linear.end.y=e.y},e.prototype.setRadialCenter=function(e){this.state.radial.center.x=e.x,this.state.radial.center.y=e.y},e.prototype.setRadialRadius=function(e){this.state.radial.radius=e},e.prototype.setMirroredOrigin=function(e){this.state.mirrored.origin.x=e.x,this.state.mirrored.origin.y=e.y},e.prototype.setMirroredRotation=function(e){this.state.mirrored.rotation=e},e.prototype.setMirroredSize=function(e){this.state.mirrored.size=e},Object.defineProperty(e.prototype,"indexInContainer",{get:function(){return this.effect?this.effect.getIndexInParent():-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"order",{get:function(){return this.engineMediator.orderHelper.addIndex(r.Tool.FOCUS)},enumerable:!0,configurable:!0}),e.prototype.setLinearFocus=function(e){return this.effect=this.engineMediator.engine.addLinearBlur(e,this.imageContainer,this.order),this.effect.getProperties()},e.prototype.getEffectProperties=function(){return this.effect?this.effect.getProperties():null},e.prototype.setGaussianFocus=function(e){return this.effect=this.engineMediator.engine.addGaussianBlur(e,this.imageContainer,this.order),this.effect.getProperties()},e.prototype.setRadialFocus=function(e){return this.effect=this.engineMediator.engine.addRadialBlur(e,this.imageContainer,this.order),this.effect.getProperties()},e.prototype.setMirroredFocus=function(e){return this.effect=this.engineMediator.engine.addMirroredBlur(e,this.imageContainer,this.order),this.effect.getProperties()},e.prototype.setEffectProperties=function(e){return this.effect?(this.effect.setProperties(e),this.effect.getProperties()):null},e.prototype.removeFocus=function(){this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.engineMediator.orderHelper.removeIndex(r.Tool.FOCUS))},Object.defineProperty(e.prototype,"imageContainer",{get:function(){return this.engineMediator.image.container},enumerable:!0,configurable:!0}),r.__decorate([_e],e.prototype,"state",void 0),r.__decorate([xt],e.prototype,"selectFocus",null),r.__decorate([xt],e.prototype,"changeBlurRadius",null),r.__decorate([xt],e.prototype,"reset",null),r.__decorate([xt],e.prototype,"setLinear",null),r.__decorate([xt],e.prototype,"setLinearStart",null),r.__decorate([xt],e.prototype,"setLinearEnd",null),r.__decorate([xt],e.prototype,"setRadialCenter",null),r.__decorate([xt],e.prototype,"setRadialRadius",null),r.__decorate([xt],e.prototype,"setMirroredOrigin",null),r.__decorate([xt],e.prototype,"setMirroredRotation",null),r.__decorate([xt],e.prototype,"setMirroredSize",null),e}(),Ho=function(e,t,o){void 0===t&&(t=0),void 0===o&&(o=3);var n=Math.tan(t),r=Math.sqrt(Math.pow(n,2)+1);return{x:e.x+o/r,y:e.y+o*n/r}},Vo=function(e){return 2*Math.PI-e},Wo=function(e){var t=e.rotation,o=e.flipHorizontally,n=e.flipVertically,r=t;return o&&(r=Vo(r)),n&&(r=function(e){return Math.PI-e}(r)),r},Go=function(){function e(e){var t=this;this.changeIntensity=function(e){var o=t.focusStore.setEffectProperties({blurRadius:e});o&&(t.focusStore.changeBlurRadius(t.identifier,o.blurRadius),t.editor.render())},this.reset=function(){t.pureReset(),t.editor.render(),t.addSnapshot("delete",t.locale.controls.buttonReset)},this.editor=e,this.focusStore=new No(this.editor.engineMediator);var o=this.editor.assetProvider.getAssets("focus");this.entityManager=new Ro([{identifier:"",name:"",items:o}],r.__assign({},this.config,{categoryKey:"",itemKey:"thumbnailURI",flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("focus")}))}return e.prototype.selectFocus=function(e){if(e!==this.identifier){this.focusStore.removeFocus();var t=.2*this.maxIntensity,o=this.editor.engine.getOutputContainer().getBounds().width,n=.2*this.editor.shortestOutputSide;switch(e){case r.FocusIdentifier.LINEAR:var i=this.editor.outputToWorld({x:-o/2,y:0}),a=this.editor.outputToWorld({x:o/2,y:0});this.setLinearFocus({start:i,end:a,blurRadius:t});break;case r.FocusIdentifier.RADIAL:var s=this.editor.outputToWorld({x:0,y:0});this.setRadialFocus({center:s,radius:n,blurRadius:t});break;case r.FocusIdentifier.MIRRORED:var l=this.editor.outputToWorld({x:0,y:0}),c=n,u=this.editor.outputToWorld(Ho({x:0,y:0},0));this.setMirroredFocus({mirrorAxisOrigin:l,clearAreaWidth:c,blurRadius:t,mirrorAxisDirection:u});break;case r.FocusIdentifier.GAUSSIAN:this.setGaussianFocus({blurRadius:t})}this.focusStore.selectFocus(e,t),this.editor.render(),this.addSnapshot("add",r.Tool.FOCUS)}else this.reset()},e.prototype.toolSnapshot=function(e){this.addSnapshot("edit",e)},e.prototype.addSnapshot=function(e,t){this.editor.addSnapshot(void 0,e,t)},e.prototype.clickableCanvas=function(e){this.editor.clickableCanvas(e)},e.prototype.pureReset=function(){this.focusStore.removeFocus(),this.focusStore.reset()},e.prototype.setStart=function(e){var t=this.focusStore.setEffectProperties({start:this.editor.previewToWorld(e)});t&&(this.focusStore.setLinearStart(this.editor.worldToPreview(t.start)),this.editor.render())},e.prototype.setEnd=function(e){var t=this.focusStore.setEffectProperties({end:this.editor.previewToWorld(e)});t&&(this.focusStore.setLinearEnd(this.editor.worldToPreview(t.end)),this.editor.render())},e.prototype.setCenter=function(e){var t=this.focusStore.setEffectProperties({center:this.editor.previewToWorld(e)});t&&(this.focusStore.setRadialCenter(this.editor.worldToPreview(t.center)),this.editor.render())},e.prototype.setRadius=function(e){var t=this.focusStore.setEffectProperties({radius:this.editor.previewToWorld(e)});t&&(this.focusStore.setRadialRadius(this.editor.worldToPreview(t.radius)),this.editor.render())},e.prototype.setOrigin=function(e){var t=this.focusStore.setEffectProperties({mirrorAxisOrigin:this.editor.previewToWorld(e),mirrorAxisDirection:this.editor.previewToWorld(Ho(e,this.rotation))});t&&(this.focusStore.setMirroredOrigin(this.editor.worldToPreview(t.mirrorAxisOrigin)),this.editor.render())},e.prototype.setSize=function(e){var t=this.focusStore.setEffectProperties({clearAreaWidth:this.editor.previewToWorld(e)});t&&(this.focusStore.setMirroredSize(this.editor.worldToPreview(t.clearAreaWidth)),this.editor.render())},e.prototype.setRotation=function(e){var t=this.editor.outputContainer.getData(),o=t.flipHorizontally,n=t.flipVertically;if(this.focusStore.setEffectProperties({mirrorAxisDirection:this.editor.previewToWorld(Ho(this.origin,e))})){var r=Wo({rotation:e,flipHorizontally:o,flipVertically:n});this.focusStore.setMirroredRotation(r),this.editor.render()}},e.prototype.updateStateFromHistory=function(e,t){var o=this;this.focusStore.removeFocus();var n=t.magnitude;St((function(){switch(e.identifier){case r.FocusIdentifier.LINEAR:o.focusStore.selectFocus(r.FocusIdentifier.LINEAR),o.setLinearFocus({start:o.editor.previewToWorld(new r.Vector2(e.linear.start).multiply(t)),end:o.editor.previewToWorld(new r.Vector2(e.linear.end).multiply(t)),blurRadius:e.linear.blurRadius});break;case r.FocusIdentifier.GAUSSIAN:o.focusStore.selectFocus(r.FocusIdentifier.GAUSSIAN),o.setGaussianFocus({blurRadius:e.gaussian.blurRadius});break;case r.FocusIdentifier.RADIAL:o.focusStore.selectFocus(r.FocusIdentifier.RADIAL),o.setRadialFocus({center:o.editor.previewToWorld(new r.Vector2(e.radial.center).multiply(t)),radius:o.editor.previewToWorld(e.radial.radius*n),blurRadius:e.radial.blurRadius});break;case r.FocusIdentifier.MIRRORED:o.focusStore.selectFocus(r.FocusIdentifier.MIRRORED),o.setMirroredFocus({mirrorAxisOrigin:o.editor.previewToWorld(new r.Vector2(e.mirrored.origin).multiply(t)),clearAreaWidth:o.editor.previewToWorld(e.mirrored.size*n),blurRadius:e.mirrored.blurRadius,mirrorAxisDirection:o.editor.previewToWorld(Ho(e.mirrored.origin,e.mirrored.rotation))});break;case"identity":o.pureReset()}}))},e.prototype.updateStateFromSerialization=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){if(!this.doesFocusIdentifierExist(e.identifier))throw new Error("Focus identifier "+e.identifier+" doesn't exist");return this.updateStateFromHistory(e,r.Vector2.ONE),[2]}))}))},e.prototype.updateCanvasControls=function(){var e=this.focusStore.getEffectProperties();if(e&&"identity"!==this.identifier)switch(this.identifier){case r.FocusIdentifier.LINEAR:this.updateLinearState(e);break;case r.FocusIdentifier.RADIAL:this.updateRadialState(e);break;case r.FocusIdentifier.MIRRORED:this.updateMirroredState(e)}},Object.defineProperty(e.prototype,"state",{get:function(){return this.focusStore.state},enumerable:!0,configurable:!0}),e.prototype.getFocusStateForHistory=function(){var e=this.editor.canvasStore.sizeVector,t=this.focusStore.state.linear,o=this.focusStore.state.radial,n=this.focusStore.state.mirrored,i=e,a=i.magnitude;return r.__assign({},this.focusStore.state,{linear:r.__assign({},t,{start:new r.Vector2(t.start).divide(i),end:new r.Vector2(t.end).divide(i)}),radial:r.__assign({},o,{center:new r.Vector2(o.center).divide(i),radius:o.radius/a}),mirrored:r.__assign({},n,{origin:new r.Vector2(n.origin).divide(i),size:n.size/a}),gaussian:r.__assign({},this.focusStore.state.gaussian)})},Object.defineProperty(e.prototype,"start",{get:function(){return this.focusStore.state.linear.start},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startOnPreview",{get:function(){var e=this.editor.applyFlipToPreview(this.focusStore.state.linear.start);return{x:Math.abs(e.x),y:Math.abs(e.y)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this.focusStore.state.linear.end},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endOnPreview",{get:function(){var e=this.editor.applyFlipToPreview(this.focusStore.state.linear.end);return{x:Math.abs(e.x),y:Math.abs(e.y)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.focusStore.state.radial.center},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this.focusStore.state.radial.radius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"origin",{get:function(){return this.focusStore.state.mirrored.origin},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.focusStore.state.mirrored.rotation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationOnPreview",{get:function(){var e=this.editor.outputContainer.getData(),t=e.flipHorizontally,o=e.flipVertically;return Wo({rotation:this.focusStore.state.mirrored.rotation,flipHorizontally:t,flipVertically:o})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.focusStore.state.mirrored.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mirroredAreaWidth",{get:function(){var e=this.editor.canvasStore.canvasSize,t=e.width,o=e.height;return 2*Math.sqrt(Math.pow(t,2)+Math.pow(o,2))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.state.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"intensity",{get:function(){return"identity"===this.identifier?Bo.gaussian.blurRadius:this.state[this.identifier].blurRadius},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minIntensity",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxIntensity",{get:function(){return this.editor.shortestOutputSide/10},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOptionSelected",{get:function(){return"identity"!==this.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.editor.configStore.config[r.Tool.FOCUS]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get:function(){return this.editor.configStore.locale[r.Tool.FOCUS]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"entities",{get:function(){return this.entityManager.items},enumerable:!0,configurable:!0}),e.prototype.setLinearFocus=function(e){var t=e.start,o=e.end,n=e.blurRadius,r=this.focusStore.setLinearFocus({start:t,end:o,blurRadius:n});this.updateLinearState(r)},e.prototype.updateLinearState=function(e){this.focusStore.setLinearStart(this.editor.worldToPreview(e.start)),this.focusStore.setLinearEnd(this.editor.worldToPreview(e.end)),this.focusStore.changeBlurRadius(this.identifier,e.blurRadius)},e.prototype.setRadialFocus=function(e){var t=e.center,o=e.radius,n=e.blurRadius,r=this.focusStore.setRadialFocus({center:t,radius:o,blurRadius:n});this.updateRadialState(r)},e.prototype.updateRadialState=function(e){this.focusStore.setRadialCenter(this.editor.worldToPreview(e.center)),this.focusStore.setRadialRadius(this.editor.worldToPreview(e.radius)),this.focusStore.changeBlurRadius(this.identifier,e.blurRadius)},e.prototype.setMirroredFocus=function(e){var t=e.mirrorAxisOrigin,o=e.clearAreaWidth,n=e.blurRadius,r=e.mirrorAxisDirection,i=this.focusStore.setMirroredFocus({mirrorAxisOrigin:t,clearAreaWidth:o,blurRadius:n,mirrorAxisDirection:r});this.updateMirroredState(i)},e.prototype.updateMirroredState=function(e){var t=new r.Vector2(e.mirrorAxisOrigin),o=new r.Vector2(e.mirrorAxisDirection).subtract(t),n=Math.atan2(o.y,o.x);this.focusStore.setMirroredOrigin(this.editor.worldToPreview(e.mirrorAxisOrigin)),this.focusStore.setMirroredRotation(n),this.focusStore.setMirroredSize(this.editor.worldToPreview(e.clearAreaWidth)),this.focusStore.changeBlurRadius(this.identifier,e.blurRadius)},e.prototype.setGaussianFocus=function(e){var t=e.blurRadius,o=this.focusStore.setGaussianFocus({blurRadius:t});this.focusStore.changeBlurRadius(this.identifier,o.blurRadius)},e.prototype.doesFocusIdentifierExist=function(e){return-1!==Object.keys(r.FocusIdentifier).map((function(e){return r.FocusIdentifier[e]})).findIndex((function(t){return t===e}))},r.__decorate([xt],e.prototype,"selectFocus",null),r.__decorate([xt],e.prototype,"changeIntensity",void 0),r.__decorate([xt],e.prototype,"clickableCanvas",null),r.__decorate([xt],e.prototype,"pureReset",null),r.__decorate([xt],e.prototype,"reset",void 0),r.__decorate([xt],e.prototype,"setStart",null),r.__decorate([xt],e.prototype,"setEnd",null),r.__decorate([xt],e.prototype,"setCenter",null),r.__decorate([xt],e.prototype,"setRadius",null),r.__decorate([xt],e.prototype,"setOrigin",null),r.__decorate([xt],e.prototype,"setSize",null),r.__decorate([xt],e.prototype,"setRotation",null),r.__decorate([xt],e.prototype,"updateStateFromHistory",null),r.__decorate([xt],e.prototype,"updateStateFromSerialization",null),r.__decorate([xt],e.prototype,"updateCanvasControls",null),r.__decorate([Oe],e.prototype,"state",null),r.__decorate([Oe],e.prototype,"start",null),r.__decorate([Oe],e.prototype,"startOnPreview",null),r.__decorate([Oe],e.prototype,"end",null),r.__decorate([Oe],e.prototype,"endOnPreview",null),r.__decorate([Oe],e.prototype,"center",null),r.__decorate([Oe],e.prototype,"radius",null),r.__decorate([Oe],e.prototype,"origin",null),r.__decorate([Oe],e.prototype,"rotation",null),r.__decorate([Oe],e.prototype,"rotationOnPreview",null),r.__decorate([Oe],e.prototype,"size",null),r.__decorate([Oe],e.prototype,"mirroredAreaWidth",null),r.__decorate([Oe],e.prototype,"identifier",null),r.__decorate([Oe],e.prototype,"intensity",null),r.__decorate([Oe],e.prototype,"minIntensity",null),r.__decorate([Oe],e.prototype,"maxIntensity",null),r.__decorate([Oe],e.prototype,"isOptionSelected",null),r.__decorate([Oe],e.prototype,"config",null),r.__decorate([Oe],e.prototype,"locale",null),r.__decorate([Oe],e.prototype,"entities",null),e}(),Uo={identifier:"identity",opacity:1,blendMode:r.BlendMode.LIGHTEN},Xo=new Po(0,1),Yo=function(){function e(e){this.engineMediator=e,this.state=Uo}return e.prototype.changeIdentifier=function(e){this.state.identifier=e},e.prototype.changeOpacity=function(e){var t=Xo.clamp(e);this.state.opacity=t},e.prototype.changeBlendMode=function(e){this.state.blendMode=e},e.prototype.reset=function(){-1===this.indexInContainer&&(this.state.identifier=Uo.identifier,this.state.opacity=Uo.opacity,this.state.blendMode=Uo.blendMode,this.removeIndex())},Object.defineProperty(e.prototype,"indexInContainer",{get:function(){return this.effect?this.effect.getIndexInParent():-1},enumerable:!0,configurable:!0}),e.prototype.removeOverlayEffect=function(){this.effect&&(this.removeIndex(),this.engineMediator.engine.removeEffect(this.effect),this.effect=void 0)},e.prototype.setEffectProperties=function(e){return this.effect?(this.effect.setProperties(e),this.effect.getProperties()):null},e.prototype.setOverlayEffect=function(e){var t=this,o=e.identifier,n=e.blendMode,i=e.opacity,a=r.__assign({},this.state);this.changeIdentifier(o),this.changeOpacity(i),this.changeBlendMode(n),this.removeOverlayEffect();var s=this.engineMediator.orderHelper.addIndex(r.Tool.OVERLAY);return new Promise((function(e,r){t.engineMediator.engine.addOverlayFromAssets(o,t.engineMediator.image.container,s).then((function(o){t.effect=o,t.effect.setProperties({blendMode:n,opacity:i}),e()})).catch((function(e){t.changeIdentifier(a.identifier),t.changeOpacity(a.opacity),t.changeBlendMode(a.blendMode),"identity"===a.identifier&&t.removeIndex(),r(e)}))}))},e.prototype.removeIndex=function(){this.engineMediator.orderHelper.removeIndex(r.Tool.OVERLAY)},r.__decorate([_e],e.prototype,"state",void 0),r.__decorate([xt],e.prototype,"changeIdentifier",null),r.__decorate([xt],e.prototype,"changeOpacity",null),r.__decorate([xt],e.prototype,"changeBlendMode",null),r.__decorate([xt],e.prototype,"reset",null),e}(),Ko=function(){function e(e){var t=this;this.changeOpacity=function(e){var o=t.overlayStore.setEffectProperties({opacity:e});o&&(t.overlayStore.changeOpacity(o.opacity),t.editor.render())},this.reset=function(){t.pureReset(),t.addSnapshot("delete",t.locale.controls.buttonReset),t.editor.render()},this.editor=e,this.overlayStore=new Yo(this.editor.engineMediator);var o=this.editor.assetProvider.getAssets("overlay"),n=this.config;this.entityManager=new Ro([{identifier:"",name:"",items:o}],r.__assign({},n,{categoryKey:"",itemKey:"thumbnailURI",flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("overlay")}))}return e.prototype.selectOverlay=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(o){switch(o.label){case 0:return e===this.identifier?[3,2]:(t=this.defaultBlendModeForIdentifier(e),[4,this.overlayStore.setOverlayEffect({identifier:e,opacity:1,blendMode:t})]);case 1:return o.sent(),this.addSnapshot("add",r.Tool.OVERLAY),this.editor.render(),[3,3];case 2:this.reset(),o.label=3;case 3:return[2]}}))}))},e.prototype.toolSnapshot=function(){this.addSnapshot("edit",this.locale.controls.sliderOpacity)},e.prototype.addSnapshot=function(e,t){this.editor.addSnapshot(void 0,e,t)},e.prototype.changeBlendMode=function(e){var t=this.overlayStore.setEffectProperties({blendMode:e});t&&(this.overlayStore.changeBlendMode(t.blendMode),this.addSnapshot("edit",this.locale.controls.carouselBlendMode),this.editor.render())},e.prototype.pureReset=function(){this.overlayStore.removeOverlayEffect(),this.overlayStore.reset()},e.prototype.updateStateFromSerialization=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return this.entityManager.items.find((function(t){return t.identifier===e.identifier}))?[2,this.overlayStore.setOverlayEffect(e)]:[2,new Promise((function(t,o){o("Overlay Asset "+e.identifier+" doesn't exist")}))]}))}))},e.prototype.updateStateFromHistory=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return"identity"===e.identifier?(this.pureReset(),[2,new Promise((function(e,t){e()}))]):[2,this.overlayStore.setOverlayEffect(e)]}))}))},Object.defineProperty(e.prototype,"state",{get:function(){return this.overlayStore.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.overlayStore.state.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opacity",{get:function(){return this.overlayStore.state.opacity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.overlayStore.state.blendMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOptionSelected",{get:function(){return"identity"!==this.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.editor.configStore.config[r.Tool.OVERLAY]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get:function(){return this.editor.configStore.locale[r.Tool.OVERLAY]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"entities",{get:function(){return this.entityManager.getEntities()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allBlendModes",{get:function(){var e=this.locale.controls;return Object.keys(r.BlendMode).map((function(t){var o=r.BlendMode[t],n="blendMode"+o.charAt(0).toUpperCase()+o.slice(1);return{identifier:o,value:e[n]}}))},enumerable:!0,configurable:!0}),e.prototype.defaultBlendModeForIdentifier=function(e){var t=this.entityManager.items.findIndex((function(t){return t.identifier===e}));return-1!==t?this.entityManager.items[t].defaultBlendMode:r.BlendMode.LIGHTEN},r.__decorate([xt],e.prototype,"selectOverlay",null),r.__decorate([xt],e.prototype,"changeOpacity",void 0),r.__decorate([xt],e.prototype,"changeBlendMode",null),r.__decorate([xt],e.prototype,"pureReset",null),r.__decorate([xt],e.prototype,"reset",void 0),r.__decorate([xt],e.prototype,"updateStateFromSerialization",null),r.__decorate([xt],e.prototype,"updateStateFromHistory",null),r.__decorate([Oe],e.prototype,"state",null),r.__decorate([Oe],e.prototype,"identifier",null),r.__decorate([Oe],e.prototype,"opacity",null),r.__decorate([Oe],e.prototype,"blendMode",null),r.__decorate([Oe],e.prototype,"isOptionSelected",null),r.__decorate([Oe],e.prototype,"config",null),r.__decorate([Oe],e.prototype,"locale",null),r.__decorate([Oe],e.prototype,"entities",null),r.__decorate([Oe],e.prototype,"allBlendModes",null),e}(),qo={identifier:"identity",opacity:1,tintColor:d.white,tintMode:"none",resizeMode:"keepAspect"},$o={};function Zo(e,t){var o=this;return void 0===t&&(t=!1),new Promise((function(n,i){var a=new FileReader;a.onload=function(a){return r.__awaiter(o,void 0,void 0,(function(){return r.__generator(this,(function(o){return Jo(a.target.result,t).then((function(t){n(r.__assign({},t,{name:e.name||"",type:e.type,id:r.uuid()}))})).catch((function(e){i(e)})),[2]}))}))},a.readAsDataURL(e)}))}function Jo(e,t){return void 0===t&&(t=!1),new Promise((function(o,n){var r=new Image;r.addEventListener("load",(function(){var n=null;if(t){var i=document.createElement("canvas"),a=i.getContext("2d"),s=150*r.height/r.width;i.width=150,i.height=s,a.drawImage(r,0,0,150,s),n=i.toDataURL()}o({image:e,smallImage:n})})),r.addEventListener("error",(function(e){n()})),r.src=e}))}var Qo=function(){function e(e){var t=this;this.state=_e.map($o),this.customStickerIds=[],this.activeTintColorId=_e.box("white"),this.changeOpacity=function(e){if(t.id){var o=t.state.get(t.id);if(o){t.editor.spriteStore.setContainerProperties(t.id,{opacity:e});var n=t.editor.spriteStore.getContainerProperties(t.id);o.opacity=n.opacity,t.state.set(t.id,o)}}},this.changeTintColor=function(e,o){if(t.id){var n=t.state.get(t.id);if(n){var r=t.entityManager.items.find((function(e){return e.identifier===t.identifier})).tintMode;t.editor.spriteStore.setContainerProperties(t.id,{tintColor:e,tintMode:r});var i=t.editor.spriteStore.getContainerProperties(t.id);n.tintColor=i.tintColor,t.activeTintColorId.set(o),n.tintMode=i.tintMode||qo.tintMode,t.state.set(t.id,n)}}},this.tintColorSnapshot=function(){t.addSnapshot("edit",t.locale.history.color)},this.editor=e,this.selectedCategory="identity";var o=this.config,n=this.editor.assetProvider.getAssets("sticker");this.entityManager=new Ro(n,r.__assign({},o,{categoryKey:"thumbnailURI",categoryDynamicKey:"thumbnail",itemKey:"stickerURI",itemDynamicKey:"sticker",locale:r.__assign({},this.locale.items,this.locale.categories),getAssetPath:this.editor.getAssetPath("sticker")}))}return e.prototype.selectLast=function(){this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))},e.prototype.doesStickerAssetExist=function(e){return-1!==this.entityManager.items.findIndex((function(t){return t.identifier===e}))},e.prototype.add=function(e){var t=this.entities.find((function(t){return t.identifier===e})),o=t?t.tintMode:qo.tintMode,n=t?t.resizeMode:qo.resizeMode;this.editor.spriteStore.addSticker({state:{identifier:e,tintMode:o,tintColor:qo.tintColor,opacity:qo.opacity,tintColorId:"white",resizeMode:n}})},e.prototype.duplicate=function(){if(this.id){var e=this.editor.spriteStore.getDuplicateContainerTransform(this.id),t=this.editor.spriteStore.getDuplicateContainerFlip(this.id);this.editor.spriteStore.addSticker({state:{identifier:this.identifier,tintColor:At(this.tintColor),tintMode:this.tintMode,resizeMode:this.resizeMode,opacity:this.opacity,tintColorId:this.activeTintColor,flipHorizontally:t},transform:e})}},e.prototype.bringToFront=function(){this.id&&this.editor.spriteStore.bringToFront(this.id)},e.prototype.flipHorizontally=function(){this.id&&this.editor.spriteStore.flipHorizontally(this.id)},e.prototype.delete=function(){if(this.id){var e=this.id;this.editor.spriteStore.removeSprite(e),this.state.delete(e),this.selectLast()}},e.prototype.updateStateFromHistory=function(e,t){this.setState(e,t),this.editor.spriteStore.setContainerProperties(e,t)},e.prototype.setState=function(e,t){var o=this.state.get(e);o?("opacity"in t&&(o.opacity=t.opacity),t.tintColor&&(o.tintColor=t.tintColor,t.tintColorId&&this.activeTintColorId.set(t.tintColorId)),t.tintMode&&(o.tintMode=t.tintMode),t.resizeMode&&(o.resizeMode=t.resizeMode),this.state.set(e,o)):(this.state.set(e,{identifier:t.identifier,opacity:t.opacity,tintMode:t.tintMode,resizeMode:t.resizeMode,tintColor:t.tintColor?t.tintColor:qo.tintColor}),t.tintColorId&&this.activeTintColorId.set(t.tintColorId))},e.prototype.addFiles=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,o,n;return r.__generator(this,(function(r){switch(r.label){case 0:if(this.editor.modalStore.showInfoModal("loading"),!e.length)return[3,4];for(t=0,o=[],t=0;t<e.length;t++)o.push(Zo(e[t],!0));r.label=1;case 1:return r.trys.push([1,3,,4]),[4,Promise.all(o)];case 2:return n=r.sent(),this.addCustomStickerAsset(n),[3,4];case 3:return r.sent(),this.editor.modalStore.hideModal(),this.editor.modalStore.showActionModal({identifier:"stickerLoading"}),[3,4];case 4:return[2]}}))}))},e.prototype.addCustomStickerAsset=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,o,n,i=this;return r.__generator(this,(function(a){switch(a.label){case 0:return t=e.map((function(e){return{sticker:e.image,thumbnailURI:e.smallImage,name:e.name,tintMode:i.customStickerTintMode,resizeMode:"keepAspect",identifier:e.id,type:e.type}})),this.customStickerIds=this.customStickerIds.concat(t.map((function(e){return{identifier:e.identifier,type:e.type}}))),this.editor.assetProvider.addCustomStickerAsset(t,"imgly_sticker_custom"),o=this.editor.assetProvider.getAssets("sticker"),n=this.config,this.entityManager=new Ro(o,r.__assign({},n,{categoryKey:"thumbnailURI",categoryDynamicKey:"thumbnail",itemDynamicKey:"thumbnailURI",itemKey:"stickerURI",locale:this.locale.items,getAssetPath:this.editor.getAssetPath("sticker")})),this.selectedCategory=qo.identifier,[4,this.editor.wait()];case 1:return a.sent(),this.selectedCategory="imgly_sticker_custom",this.editor.modalStore.hideModal(),[2]}}))}))},e.prototype.toolSnapshot=function(){this.addSnapshot("edit",this.locale.history.opacity)},e.prototype.addSnapshot=function(e,t){this.currentSticker&&this.editor.spriteStore.addSnapshot(e,t)},e.prototype.toggleCategorySelection=function(e){this.selectedCategory=this.selectedCategory===e?"identity":e},e.prototype.pureReset=function(){this.state=_e.map($o)},Object.defineProperty(e.prototype,"isStickerSelected",{get:function(){return this.editor.spriteStore.isSpriteSticker},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeTintColor",{get:function(){return this.activeTintColorId.get()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCustomStickerEnabled",{get:function(){return this.config.enableCustomUpload},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"customStickerTintMode",{get:function(){return this.config.customStickerTintMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentSticker",{get:function(){if(this.isStickerSelected){var e=this.state.get(this.id);if(e)return e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){if(this.isStickerSelected){var e=this.state.get(this.id);if(e)return e.identifier}return"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){if(this.isStickerSelected)return this.editor.spriteStore.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opacity",{get:function(){return this.currentSticker?this.currentSticker.opacity:qo.opacity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tintMode",{get:function(){return this.currentSticker?this.currentSticker.tintMode:qo.tintMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resizeMode",{get:function(){return this.currentSticker?this.currentSticker.resizeMode:qo.resizeMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tintable",{get:function(){return!!this.currentSticker&&"solid"===this.currentSticker.tintMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tintColor",{get:function(){return this.currentSticker?this.currentSticker.tintColor:qo.tintColor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.editor.configStore.config[r.Tool.STICKER]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get:function(){return this.editor.configStore.locale[r.Tool.STICKER]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localeColor",{get:function(){return this.editor.configStore.locale.common.color},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedCategoryIdentifier",{get:function(){return this.selectedCategory},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"entities",{get:function(){return this.entityManager.getEntities(this.selectedCategoryIdentifier)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultColors",{get:function(){return this.editor.defaultColors},enumerable:!0,configurable:!0}),r.__decorate([_e],e.prototype,"selectedCategory",void 0),r.__decorate([xt],e.prototype,"selectLast",null),r.__decorate([xt],e.prototype,"add",null),r.__decorate([xt],e.prototype,"duplicate",null),r.__decorate([xt],e.prototype,"bringToFront",null),r.__decorate([xt],e.prototype,"flipHorizontally",null),r.__decorate([xt],e.prototype,"delete",null),r.__decorate([xt],e.prototype,"updateStateFromHistory",null),r.__decorate([xt],e.prototype,"setState",null),r.__decorate([xt],e.prototype,"changeOpacity",void 0),r.__decorate([xt],e.prototype,"changeTintColor",void 0),r.__decorate([xt],e.prototype,"addFiles",null),r.__decorate([xt],e.prototype,"addCustomStickerAsset",null),r.__decorate([xt],e.prototype,"toggleCategorySelection",null),r.__decorate([xt],e.prototype,"pureReset",null),r.__decorate([Oe],e.prototype,"isStickerSelected",null),r.__decorate([Oe],e.prototype,"activeTintColor",null),r.__decorate([Oe],e.prototype,"isCustomStickerEnabled",null),r.__decorate([Oe],e.prototype,"customStickerTintMode",null),r.__decorate([Oe],e.prototype,"currentSticker",null),r.__decorate([Oe],e.prototype,"identifier",null),r.__decorate([Oe],e.prototype,"id",null),r.__decorate([Oe],e.prototype,"opacity",null),r.__decorate([Oe],e.prototype,"tintMode",null),r.__decorate([Oe],e.prototype,"resizeMode",null),r.__decorate([Oe],e.prototype,"tintable",null),r.__decorate([Oe],e.prototype,"tintColor",null),r.__decorate([Oe],e.prototype,"config",null),r.__decorate([Oe],e.prototype,"locale",null),r.__decorate([Oe],e.prototype,"localeColor",null),r.__decorate([Oe],e.prototype,"selectedCategoryIdentifier",null),r.__decorate([Oe],e.prototype,"entities",null),r.__decorate([Oe],e.prototype,"defaultColors",null),e}(),en={text:"Write Something",identifier:"imgly_font_open_sans_bold",fontSize:73.3,defaultFontSize:73.3,fontFamily:"Open Sans",fontStyle:"",fontWeight:"bold",lineHeight:1,alignment:"center",textColor:d.white,backgroundColor:d.transparent||[0,0,0,0],width:0},tn={},on={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"Semibold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular"},nn=function(){function e(e){var t=this;this.state=_e.map(tn),this.loadingObservable=_e.box(!1),this.activeBackgroundColorId=_e.box("transparent"),this.activeTextColorId=_e.box("white"),this.add=function(){t.loadfonts((function(){t.editor.spriteStore.addText({state:{identifier:en.identifier,text:en.text,textColor:en.textColor,backgroundColor:en.backgroundColor,textColorId:"white",backgroundColorId:"transparent",lineHeight:en.lineHeight,alignment:en.alignment,fontSize:0}})}))},this.setEditMode=function(e){t.editor.spriteStore.setEditMode(e)},this.changeFontFamily=function(e){var o=t.fonts.find((function(t){return t.fontFamily===e}));t.changeIdentifier(o,t.id),t.id&&t.addSnapshot("edit",t.locale.history.fontFamily)},this.changeFontStyleAndWeight=function(e){var o=t.fontStyles.findIndex((function(t){return t===e})),n=t.fontStyleIdentifiers[o],r=t.fonts.find((function(e){return e.identifier===n}));St((function(){t.changeIdentifier(r,t.id)})),t.id&&t.addSnapshot("edit",t.locale.history.fontStyle)},this.changeIdentifier=function(e,o){St((function(){if(e&&o){var n=t.state.get(o);if(n){t.editor.spriteStore.setContainerProperties(o,{fontIdentifier:e.identifier},!0);var r=t.editor.spriteStore.getContainerProperties(o);n.identifier=r.fontIdentifier,n.fontFamily=e.fontFamily,n.fontStyle=e.fontStyle,n.fontWeight=e.fontWeight,n.fontSize=r.fontSize,n.width=r.width,n.defaultFontSize=n.fontSize,t.editor.spriteStore.setDefaultSize(o),t.state.set(o,n)}}}))},this.changeFontSize=function(e,o){if(void 0===o&&(o=!1),t.id){var n=t.state.get(t.id);n&&(n.fontSize=e,o&&(n.defaultFontSize=e),t.state.set(t.id,n))}},this.updateDefaultFontSize=function(){if(t.id){var e=t.state.get(t.id);e&&(e.defaultFontSize=e.fontSize,t.state.set(t.id,e))}},this.changeSize=function(e,o){var n=t.state.get(e);n&&(n.width=o.width,n.fontSize=o.fontSize,n.defaultFontSize=o.fontSize,t.state.set(e,n))},this.changeWidth=function(e){if(t.id){var o=t.state.get(t.id);o&&(o.width=e,t.state.set(t.id,o),t.editor.spriteStore.setDefaultSize(t.id))}},this.changeText=function(e){if(t.id){var o=t.state.get(t.id);if(o){t.editor.spriteStore.setContainerProperties(t.id,{text:e},!0);var n=t.editor.spriteStore.getContainerProperties(t.id);o.text=n.text,o.fontSize=n.fontSize,o.defaultFontSize=n.fontSize,t.editor.spriteStore.setDefaultSize(t.id),t.state.set(t.id,o),t.addSnapshot("edit",t.locale.history.edit)}}},this.changeLineHeight=function(e){if(t.id){var o=t.state.get(t.id);if(o&&e){t.editor.spriteStore.setContainerProperties(t.id,{lineHeight:e},!0);var n=t.editor.spriteStore.getContainerProperties(t.id);o.lineHeight=n.lineHeight,t.state.set(t.id,o)}}},this.changeColor=function(e,o){if(t.id){var n=t.state.get(t.id);if(n){t.editor.spriteStore.setContainerProperties(t.id,{textColor:e});var r=t.editor.spriteStore.getContainerProperties(t.id);n.textColor=r.textColor,t.activeTextColorId.set(o),t.state.set(t.id,n)}}},this.changeBackgroundColor=function(e,o){if(t.id){var n=t.state.get(t.id);if(n){t.editor.spriteStore.setContainerProperties(t.id,{backgroundColor:e});var r=t.editor.spriteStore.getContainerProperties(t.id);n.backgroundColor=r.backgroundColor,t.activeBackgroundColorId.set(o),t.state.set(t.id,n)}}},this.colorSnapshot=function(){t.addSnapshot("edit",t.locale.history.textColor)},this.backgroundColorSnapshot=function(){t.addSnapshot("edit",t.locale.history.backgroundColor)},this.changeAlignment=function(e){if(t.id){var o=t.state.get(t.id);if(o){t.editor.spriteStore.setContainerProperties(t.id,{alignment:e});var n=t.editor.spriteStore.getContainerProperties(t.id);o.alignment=n.alignment,t.state.set(t.id,o),t.addSnapshot("edit",t.locale.history.alignment)}}},this.editor=e,this.fonts.find((function(e){return e.identifier===en.identifier}))||(en.identifier=this.fonts[0].identifier),en.text=this.locale.canvasControls.placeholderText}return e.prototype.loadfonts=function(e){var t=this;if(this.fontsLoaded)e();else{var o=this.editor.assetProvider.getFontManager(),n=this.editor.assetProvider.getFontAssets().map((function(e){return e.identifier}));o.loadFontsWithIdentifiers(n).then((function(){t.loadingObservable.set(!0),e()})).catch((function(){t.editor.modalStore.showActionModal({identifier:"fontLoading",handlers:{},error:n[0]})}))}},e.prototype.doesTextAssetExist=function(e){return-1!==this.editor.assetProvider.getFontAssets().findIndex((function(t){return t.identifier===e}))},e.prototype.addOrselect=function(){this.state.size?this.selectLast():this.add()},e.prototype.selectLast=function(){this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))},e.prototype.duplicate=function(){if(this.id){var e=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addText({state:{identifier:this.identifier,text:this.text,textColor:At(this.textColor),lineHeight:this.lineHeight,alignment:this.alignment,fontSize:this.fontSize,backgroundColor:At(this.backgroundColor),textColorId:this.activeTextColor,backgroundColorId:this.activeBackgroundColor,width:this.width},transform:e})}},e.prototype.bringToFront=function(){this.id&&this.editor.spriteStore.bringToFront(this.id)},e.prototype.delete=function(){if(this.id){var e=this.id;this.editor.spriteStore.removeSprite(e),this.state.delete(e),this.selectLast()}},e.prototype.toolSnapshot=function(){this.addSnapshot("edit",this.locale.history.lineSpacing)},e.prototype.addSnapshot=function(e,t){this.currentText&&this.editor.spriteStore.addSnapshot(e,t)},e.prototype.updateStateFromHistory=function(e,t){this.setState(e,t),this.editor.spriteStore.setContainerProperties(e,t)},e.prototype.setState=function(e,t){var o=this.state.get(e);if(o)t.alignment&&(o.alignment=t.alignment),t.text&&(o.text=t.text),t.lineHeight&&(o.lineHeight=t.lineHeight),t.textColor&&(o.textColor=t.textColor,t.textColorId&&this.activeTextColorId.set(t.textColorId)),t.backgroundColor&&(o.backgroundColor=t.backgroundColor,t.backgroundColorId&&this.activeBackgroundColorId.set(t.backgroundColorId)),t.fontIdentifier&&(o.identifier=t.fontIdentifier),t.fontSize&&(o.fontSize=t.fontSize,o.defaultFontSize=t.fontSize),t.width&&(o.width=t.width);else{var n=this.fonts.find((function(e){return e.identifier===t.fontIdentifier}));this.state.set(e,{text:t.text,identifier:t.fontIdentifier,alignment:t.alignment,textColor:t.textColor?t.textColor:en.textColor,backgroundColor:t.backgroundColor?t.backgroundColor:en.backgroundColor,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontSize:t.fontSize,fontWeight:n.fontWeight,lineHeight:t.lineHeight,width:t.width,defaultFontSize:t.fontSize}),t.textColorId&&this.activeTextColorId.set(t.textColorId),t.backgroundColorId&&this.activeBackgroundColorId.set(t.backgroundColorId)}this.editor.spriteStore.setDefaultSize()},e.prototype.pureReset=function(){this.state=_e.map(tn)},Object.defineProperty(e.prototype,"isEditMode",{get:function(){return this.editor.spriteStore.isEditMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultText",{get:function(){return en.text},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTextSelected",{get:function(){return this.editor.spriteStore.isSpriteText},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontsLoaded",{get:function(){return this.loadingObservable.get()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeTextColor",{get:function(){return this.activeTextColorId.get()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeBackgroundColor",{get:function(){return this.activeBackgroundColorId.get()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentText",{get:function(){if(this.isTextSelected){var e=this.state.get(this.id);if(e)return e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.currentText?this.currentText.text:en.text},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this.currentText?this.currentText.fontSize:en.fontSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultFontSize",{get:function(){return this.currentText?this.currentText.defaultFontSize:en.defaultFontSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.currentText?this.currentText.width:en.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this.currentText?this.currentText.fontFamily:en.fontFamily},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontStyle",{get:function(){return this.currentText?this.currentText.fontStyle:en.fontStyle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this.currentText?this.currentText.fontWeight:en.fontWeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineHeight",{get:function(){return this.currentText?this.currentText.lineHeight:en.lineHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.currentText?this.currentText.identifier:en.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){if(this.isTextSelected)return this.editor.spriteStore.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignment",{get:function(){return this.currentText?this.currentText.alignment:en.alignment},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textColor",{get:function(){return this.currentText?this.currentText.textColor:en.textColor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this.currentText?this.currentText.backgroundColor:en.backgroundColor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontStyleAndWeight",{get:function(){if(this.currentText){var e=this.currentText.fontStyle,t=this.currentText.fontWeight;return this.getDisplayFontStyle({fontStyle:e,fontWeight:t})}return this.getDisplayFontStyle({fontStyle:en.fontFamily,fontWeight:en.fontWeight})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.editor.configStore.config[r.Tool.TEXT]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get:function(){return this.editor.configStore.locale[r.Tool.TEXT]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localeColor",{get:function(){return this.editor.configStore.locale.common.color},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rawOptions",{get:function(){return this.editor.assetProvider.getFontAssets()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"availableOptions",{get:function(){return this.config.fonts.length?this.config.fonts.map((function(e){return e.identifier})):this.rawOptions.map((function(e){return e.identifier}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fonts",{get:function(){var e=this;return this.rawOptions.reduce((function(t,o){return-1!==e.availableOptions.indexOf(o.identifier)?r.__spread(t,[{identifier:o.identifier,fontFamily:o.fontFamily,fontStyle:o.fontStyle||"",fontWeight:o.fontWeight||""}]):t}),[])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontFamilies",{get:function(){return r.__spread(new Set(this.fonts.map((function(e){return e.fontFamily}))))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontWithWeights",{get:function(){var e=this;return r.__spread(new Set(this.fonts.map((function(e){return e.fontFamily})))).map((function(t){return{fontFamily:t,fontWeight:on[e.fonts.find((function(e){return e.fontFamily===t})).fontWeight]}}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontStyleIdentifiers",{get:function(){var e=this;return this.fonts.filter((function(t){return t.fontFamily===e.fontFamily})).map((function(e){return e.identifier}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontStyles",{get:function(){var e=this;return this.fonts.filter((function(t){return t.fontFamily===e.fontFamily})).map(this.getDisplayFontStyle)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultColors",{get:function(){return this.editor.defaultColors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultBackgroundColors",{get:function(){return this.editor.defaultBackgroundColors},enumerable:!0,configurable:!0}),e.prototype.getDisplayFontStyle=function(e){return(on[e.fontWeight]+" "+e.fontStyle).trim()},r.__decorate([xt],e.prototype,"addOrselect",null),r.__decorate([xt],e.prototype,"selectLast",null),r.__decorate([xt],e.prototype,"add",void 0),r.__decorate([xt],e.prototype,"duplicate",null),r.__decorate([xt],e.prototype,"bringToFront",null),r.__decorate([xt],e.prototype,"delete",null),r.__decorate([xt],e.prototype,"setEditMode",void 0),r.__decorate([xt],e.prototype,"changeFontFamily",void 0),r.__decorate([xt],e.prototype,"changeFontStyleAndWeight",void 0),r.__decorate([xt],e.prototype,"changeIdentifier",void 0),r.__decorate([xt],e.prototype,"changeFontSize",void 0),r.__decorate([xt],e.prototype,"updateDefaultFontSize",void 0),r.__decorate([xt],e.prototype,"changeSize",void 0),r.__decorate([xt],e.prototype,"changeWidth",void 0),r.__decorate([xt],e.prototype,"changeText",void 0),r.__decorate([xt],e.prototype,"changeLineHeight",void 0),r.__decorate([xt],e.prototype,"changeColor",void 0),r.__decorate([xt],e.prototype,"changeBackgroundColor",void 0),r.__decorate([xt],e.prototype,"changeAlignment",void 0),r.__decorate([xt],e.prototype,"updateStateFromHistory",null),r.__decorate([xt],e.prototype,"setState",null),r.__decorate([xt],e.prototype,"pureReset",null),r.__decorate([Oe],e.prototype,"isEditMode",null),r.__decorate([Oe],e.prototype,"defaultText",null),r.__decorate([Oe],e.prototype,"isTextSelected",null),r.__decorate([Oe],e.prototype,"fontsLoaded",null),r.__decorate([Oe],e.prototype,"activeTextColor",null),r.__decorate([Oe],e.prototype,"activeBackgroundColor",null),r.__decorate([Oe],e.prototype,"currentText",null),r.__decorate([Oe],e.prototype,"text",null),r.__decorate([Oe],e.prototype,"fontSize",null),r.__decorate([Oe],e.prototype,"defaultFontSize",null),r.__decorate([Oe],e.prototype,"width",null),r.__decorate([Oe],e.prototype,"fontFamily",null),r.__decorate([Oe],e.prototype,"fontStyle",null),r.__decorate([Oe],e.prototype,"fontWeight",null),r.__decorate([Oe],e.prototype,"lineHeight",null),r.__decorate([Oe],e.prototype,"identifier",null),r.__decorate([Oe],e.prototype,"id",null),r.__decorate([Oe],e.prototype,"alignment",null),r.__decorate([Oe],e.prototype,"textColor",null),r.__decorate([Oe],e.prototype,"backgroundColor",null),r.__decorate([Oe],e.prototype,"fontStyleAndWeight",null),r.__decorate([Oe],e.prototype,"config",null),r.__decorate([Oe],e.prototype,"locale",null),r.__decorate([Oe],e.prototype,"localeColor",null),r.__decorate([Oe],e.prototype,"rawOptions",null),r.__decorate([Oe],e.prototype,"availableOptions",null),r.__decorate([Oe],e.prototype,"fonts",null),r.__decorate([Oe],e.prototype,"fontFamilies",null),r.__decorate([Oe],e.prototype,"fontWithWeights",null),r.__decorate([Oe],e.prototype,"fontStyleIdentifiers",null),r.__decorate([Oe],e.prototype,"fontStyles",null),r.__decorate([Oe],e.prototype,"defaultColors",null),r.__decorate([Oe],e.prototype,"defaultBackgroundColors",null),e}(),rn={identifier:"imgly_text_design_blocks",color:d.white,isInverted:!1,text:"Write Something",seed:0,padding:0,width:0},an={},sn=function(){function e(e){var t=this;this.state=_e.map(an),this.fontsLoaded=!1,this.activeTextColorId=_e.box("white"),this.add=function(){t.loadfonts((function(){t.editor.spriteStore.addTextDesign({state:{identifier:rn.identifier,text:rn.text,color:rn.color,isInverted:rn.isInverted,seed:rn.seed,textColorId:"white",padding:0}})}))},this.changeText=function(e){if(t.id){var o=t.state.get(t.id);if(o){t.editor.spriteStore.setContainerProperties(t.id,{text:e},!0);var n=t.editor.spriteStore.getContainerProperties(t.id);o.text=n.text,t.state.set(t.id,o),t.addSnapshot("edit",t.locale.history.edit)}}},this.setEditMode=function(e){t.editor.spriteStore.setEditMode(e)},this.changeSeed=function(){if(t.id){var e=t.state.get(t.id);if(e){t.editor.spriteStore.setContainerProperties(t.id,{seed:Math.floor(1e3*Math.random())},!0);var o=t.editor.spriteStore.getContainerProperties(t.id);e.seed=o.seed,t.state.set(t.id,e),t.addSnapshot("edit",t.locale.history.shuffle)}}},this.changeIdentifier=function(e){if(t.id){var o=t.id,n=t.state.get(t.id),r=t.editor.spriteStore.getContainerTransform(t.id);t.delete(o),t.editor.spriteStore.addTextDesign({spriteId:o,state:{identifier:e,text:n.text,color:At(n.color),isInverted:n.isInverted,seed:n.seed,padding:n.padding,width:n.width,textColorId:"white"},transform:r})}},this.changeColor=function(e,o){if(t.id){var n=t.state.get(t.id);if(n){t.editor.spriteStore.setContainerProperties(t.id,{color:e});var r=t.editor.spriteStore.getContainerProperties(t.id);n.color=r.color,t.activeTextColorId.set(o),t.state.set(t.id,n)}}},this.colorSnapshot=function(){t.addSnapshot("edit",t.locale.history.color)},this.invertBackground=function(){if(t.id){var e=t.state.get(t.id);if(e){t.editor.spriteStore.setContainerProperties(t.id,{inverted:!e.isInverted},!0);var o=t.editor.spriteStore.getContainerProperties(t.id);e.isInverted=o.inverted,t.state.set(t.id,e),t.addSnapshot("edit",t.locale.history.invert)}}},this.changeWidth=function(e){if(t.id){var o=t.state.get(t.id);o&&(o.width=e,t.state.set(t.id,o),t.editor.spriteStore.setDefaultSize(t.id))}},this.editor=e;var o=e.configStore.config.theme;this.entityManager=new Ro([{identifier:"",name:"",items:this.editor.assetProvider.getAssets("textdesign")}],r.__assign({},this.config,{categoryKey:"",itemKey:"light"===o?"thumbnailLightThemeURI":"thumbnailURI",flattenCategories:!0,locale:{},getAssetPath:this.editor.getAssetPath("textdesign")})),this.entityManager.items.find((function(e){return e.identifier===rn.identifier}))||(rn.identifier=this.entityManager.items[0].identifier),rn.text=this.locale.canvasControls.placeholderText}return e.prototype.loadfonts=function(e){var t=this;if(this.fontsLoaded)e();else{var o=this.editor.assetProvider.getFontManager(),n=this.editor.assetProvider.getFontAssetsForTextDesign().map((function(e){return e.identifier}));o.loadFontsWithIdentifiers(n).then((function(){t.fontsLoaded=!0,e()})).catch((function(){t.editor.modalStore.showActionModal({identifier:"fontLoading",handlers:{},error:n[0]})}))}},e.prototype.doesTextDesignAssetExist=function(e){return-1!==this.entityManager.items.findIndex((function(t){return t.identifier===e}))},e.prototype.addOrselect=function(){this.state.size?this.selectLast():this.add()},e.prototype.selectLast=function(){this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))},e.prototype.updateStateFromHistory=function(e,t){this.setState(e,t),this.editor.spriteStore.setContainerProperties(e,t)},e.prototype.setState=function(e,t){var o=this.state.get(e);o?(t.inverted&&(o.isInverted=t.inverted),t.seed&&(o.seed=t.seed),t.color&&(o.color=t.color,t.textColorId&&this.activeTextColorId.set(t.textColorId)),t.padding&&(o.padding=t.padding),t.width&&(o.width=t.width)):(this.state.set(e,{text:t.text,isInverted:t.inverted,identifier:t.identifier,seed:t.seed,color:t.color?t.color:rn.color,padding:t.padding,width:t.width}),t.textColorId&&this.activeTextColorId.set(t.textColorId))},e.prototype.duplicate=function(){if(this.id){var e=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addTextDesign({state:{identifier:this.identifier,text:this.text,color:At(this.color),isInverted:this.isInverted,seed:this.seed,padding:this.padding,width:this.width,textColorId:this.activeTextColor},transform:e})}},e.prototype.bringToFront=function(){this.id&&this.editor.spriteStore.bringToFront(this.id)},e.prototype.addSnapshot=function(e,t){this.currentTextDesign&&this.editor.spriteStore.addSnapshot(e,t)},e.prototype.delete=function(e){void 0===e&&(e=this.id),e&&(this.editor.spriteStore.removeSprite(e),this.state.delete(e),this.selectLast())},e.prototype.pureReset=function(){this.state=_e.map(an)},Object.defineProperty(e.prototype,"isTextDesignSelected",{get:function(){return this.editor.spriteStore.isSpriteTextDesign},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEditMode",{get:function(){return this.editor.spriteStore.isEditMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultText",{get:function(){return rn.text},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeTextColor",{get:function(){return this.activeTextColorId.get()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTextDesign",{get:function(){if(this.isTextDesignSelected&&this.id){var e=this.state.get(this.id);if(e)return e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){if(this.isTextDesignSelected)return this.editor.spriteStore.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.currentTextDesign?this.currentTextDesign.text:rn.text},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.currentTextDesign?this.currentTextDesign.seed:rn.seed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this.currentTextDesign?this.currentTextDesign.padding:rn.padding},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.currentTextDesign?this.currentTextDesign.width:rn.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.currentTextDesign?this.currentTextDesign.identifier:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInverted",{get:function(){return this.currentTextDesign?this.currentTextDesign.isInverted:rn.isInverted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.currentTextDesign?this.currentTextDesign.color:rn.color},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.editor.configStore.config[r.Tool.TEXT_DESIGN]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get:function(){return this.editor.configStore.locale[r.Tool.TEXT_DESIGN]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localeColor",{get:function(){return this.editor.configStore.locale.common.color},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"entities",{get:function(){return this.entityManager.getEntities()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colors",{get:function(){return this.editor.defaultColors},enumerable:!0,configurable:!0}),r.__decorate([xt],e.prototype,"addOrselect",null),r.__decorate([xt],e.prototype,"selectLast",null),r.__decorate([xt],e.prototype,"add",void 0),r.__decorate([xt],e.prototype,"updateStateFromHistory",null),r.__decorate([xt],e.prototype,"setState",null),r.__decorate([xt],e.prototype,"changeText",void 0),r.__decorate([xt],e.prototype,"setEditMode",void 0),r.__decorate([xt],e.prototype,"duplicate",null),r.__decorate([xt],e.prototype,"bringToFront",null),r.__decorate([xt],e.prototype,"delete",null),r.__decorate([xt],e.prototype,"changeSeed",void 0),r.__decorate([xt],e.prototype,"changeIdentifier",void 0),r.__decorate([xt],e.prototype,"changeColor",void 0),r.__decorate([xt],e.prototype,"invertBackground",void 0),r.__decorate([xt],e.prototype,"changeWidth",void 0),r.__decorate([xt],e.prototype,"pureReset",null),r.__decorate([Oe],e.prototype,"isTextDesignSelected",null),r.__decorate([Oe],e.prototype,"isEditMode",null),r.__decorate([Oe],e.prototype,"defaultText",null),r.__decorate([Oe],e.prototype,"activeTextColor",null),r.__decorate([Oe],e.prototype,"currentTextDesign",null),r.__decorate([Oe],e.prototype,"id",null),r.__decorate([Oe],e.prototype,"text",null),r.__decorate([Oe],e.prototype,"seed",null),r.__decorate([Oe],e.prototype,"padding",null),r.__decorate([Oe],e.prototype,"width",null),r.__decorate([Oe],e.prototype,"identifier",null),r.__decorate([Oe],e.prototype,"isInverted",null),r.__decorate([Oe],e.prototype,"color",null),r.__decorate([Oe],e.prototype,"config",null),r.__decorate([Oe],e.prototype,"locale",null),r.__decorate([Oe],e.prototype,"localeColor",null),r.__decorate([Oe],e.prototype,"entities",null),r.__decorate([Oe],e.prototype,"colors",null),e}(),ln={identifier:"identity",opacity:1,width:0,color:d.white},cn=new Po(0,1),un=function(){function e(e){this.engineMediator=e,this.state=ln}return e.prototype.changeIdentifier=function(e){this.state.identifier=e},e.prototype.changeOpacity=function(e){var t=cn.clamp(e);this.state.opacity=t},e.prototype.changeWidth=function(e){this.state.width=e},e.prototype.changeColor=function(e){this.state.color=e},e.prototype.reset=function(){-1===this.indexInContainer&&(this.state.identifier=ln.identifier,this.state.opacity=ln.opacity,this.state.width=ln.width,this.state.color=ln.color,this.removeIndex())},Object.defineProperty(e.prototype,"engine",{get:function(){return this.engineMediator.engine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageContainer",{get:function(){return this.engineMediator.image.container},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indexInContainer",{get:function(){return this.effect?this.effect.getIndexInParent():-1},enumerable:!0,configurable:!0}),e.prototype.removeFrameEffect=function(){this.effect&&(this.engine.removeEffect(this.effect),this.effect=void 0)},e.prototype.setEffectProperties=function(e){return this.effect?(this.removeIndex(),this.effect.setProperties(e),this.effect.getProperties()):null},e.prototype.setFrameEffect=function(e){var t=this,o=e.identifier,n=e.width,i=e.opacity,a=e.color,s=r.__assign({},this.state);this.changeIdentifier(o),this.changeWidth(n),this.changeOpacity(i),this.changeColor(a),this.removeFrameEffect();var l=this.engineMediator.orderHelper.addSprite(o);return new Promise((function(e,r){t.engine.addFrameFromAssets(o,t.engineMediator.image.container,l).then((function(o){t.effect=o,t.effect.setProperties({tintColor:a,opacity:i,width:n}),e()})).catch((function(e){t.changeIdentifier(s.identifier),t.changeOpacity(s.opacity),t.changeWidth(s.width),t.changeColor(s.color),"identity"===s.identifier&&t.removeIndex(),r(e)}))}))},e.prototype.removeIndex=function(){this.engineMediator.orderHelper.removeSprite(this.state.identifier)},r.__decorate([_e],e.prototype,"state",void 0),r.__decorate([xt],e.prototype,"changeIdentifier",null),r.__decorate([xt],e.prototype,"changeOpacity",null),r.__decorate([xt],e.prototype,"changeWidth",null),r.__decorate([xt],e.prototype,"changeColor",null),r.__decorate([xt],e.prototype,"reset",null),e}(),dn=function(){function e(e){var t=this;this.activeColorId=_e.box("white"),this.changeOpacity=function(e){var o=t.frameStore.setEffectProperties({opacity:e});o&&(t.frameStore.changeOpacity(o.opacity),t.editor.render())},this.changeColor=function(e,o){var n=t.frameStore.setEffectProperties({tintColor:e});n&&(t.frameStore.changeColor(n.tintColor),t.activeColorId.set(o),t.editor.render())},this.colorSnapshot=function(){t.addSnapshot("edit",t.locale.controls.selectColor)},this.reset=function(){t.pureReset(),t.addSnapshot("delete",t.locale.controls.buttonReset),t.editor.render()},this.editor=e,this.frameStore=new un(this.editor.engineMediator);var o=this.editor.assetProvider.getAssets("frame"),n=this.config;this.entityManager=new Ro([{identifier:"",name:"",items:o}],r.__assign({},n,{categoryKey:"",itemKey:"thumbnailURI",flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("frame")}))}return e.prototype.selectFrame=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(o){switch(o.label){case 0:return e===this.identifier?[3,2]:(t=.1*this.editor.shortestOutputSide,[4,this.frameStore.setFrameEffect({identifier:e,width:t,opacity:1,color:ln.color})]);case 1:return o.sent(),this.editor.render(),this.addSnapshot("add",r.Tool.FRAME),[3,3];case 2:this.reset(),o.label=3;case 3:return[2]}}))}))},e.prototype.changeWidth=function(e){var t=this.frameStore.setEffectProperties({width:e});t&&(this.frameStore.changeWidth(t.width),this.editor.render())},e.prototype.toolSnapshot=function(e){this.addSnapshot("edit",e)},e.prototype.addSnapshot=function(e,t){this.editor.addSnapshot(void 0,e,t)},e.prototype.pureReset=function(){this.frameStore.removeFrameEffect(),this.frameStore.reset()},e.prototype.updateStateFromHistory=function(e){return"identity"===e.identifier?(this.pureReset(),new Promise((function(e,t){e()}))):this.frameStore.setFrameEffect(e)},e.prototype.updateStateFromSerialization=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return this.entityManager.items.find((function(t){return t.identifier===e.identifier}))?[2,this.frameStore.setFrameEffect(e)]:[2,new Promise((function(e,t){t("Frame Asset doesn't exist")}))]}))}))},Object.defineProperty(e.prototype,"state",{get:function(){return this.frameStore.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.state.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.state.color},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeColor",{get:function(){return this.activeColorId.get()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.state.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tintable",{get:function(){var e=this,t=this.entityManager.items.find((function(t){return t.identifier===e.identifier}));return t&&t.tintable||!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"opacity",{get:function(){return this.state.opacity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minSize",{get:function(){return.05*this.editor.shortestOutputSide},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxSize",{get:function(){return.3*this.editor.shortestOutputSide},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.editor.configStore.config[r.Tool.FRAME]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get:function(){return this.editor.configStore.locale[r.Tool.FRAME]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localeColor",{get:function(){return this.editor.configStore.locale.common.color},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"entities",{get:function(){return this.entityManager.getEntities()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOptionSelected",{get:function(){return"identity"!==this.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colors",{get:function(){return this.editor.defaultColors},enumerable:!0,configurable:!0}),r.__decorate([xt],e.prototype,"selectFrame",null),r.__decorate([xt],e.prototype,"changeOpacity",void 0),r.__decorate([xt],e.prototype,"changeWidth",null),r.__decorate([xt],e.prototype,"changeColor",void 0),r.__decorate([xt],e.prototype,"pureReset",null),r.__decorate([xt],e.prototype,"reset",void 0),r.__decorate([xt],e.prototype,"updateStateFromHistory",null),r.__decorate([xt],e.prototype,"updateStateFromSerialization",null),r.__decorate([Oe],e.prototype,"state",null),r.__decorate([Oe],e.prototype,"identifier",null),r.__decorate([Oe],e.prototype,"color",null),r.__decorate([Oe],e.prototype,"activeColor",null),r.__decorate([Oe],e.prototype,"size",null),r.__decorate([Oe],e.prototype,"tintable",null),r.__decorate([Oe],e.prototype,"opacity",null),r.__decorate([Oe],e.prototype,"minSize",null),r.__decorate([Oe],e.prototype,"maxSize",null),r.__decorate([Oe],e.prototype,"config",null),r.__decorate([Oe],e.prototype,"locale",null),r.__decorate([Oe],e.prototype,"localeColor",null),r.__decorate([Oe],e.prototype,"entities",null),r.__decorate([Oe],e.prototype,"isOptionSelected",null),r.__decorate([Oe],e.prototype,"colors",null),e}(),pn={size:10,color:d.white,hardness:.5},hn=function(){function e(e){var t=this;this.id="",this.activeColorId=_e.box("white"),this.containerId=function(){return t.id},this.changeColor=function(e,o){t.state.color=e,t.activeColorId.set(o)},this.changeSize=function(e){t.state.size=e},this.changeHardness=function(e){t.state.hardness=e},this.editor=e,this.state=pn}return e.prototype.clickableCanvas=function(e){this.editor.clickableCanvas(e)},e.prototype.beginStroke=function(){if(!this.drawingContainer){var e=this.editor.orderHelper.addSprite(r.Tool.BRUSH);this.drawingContainer=this.editor.engine.addDrawing({strokes:[]},this.editor.imageContainer,e)}this.id=this.drawingContainer.getID(),this.drawingContainer.beginStroke({id:"imgly_brush_radial",color:At(this.state.color),size:this.state.size,hardness:this.state.hardness})},e.prototype.strokePosition=function(e){if(this.drawingContainer){var t=this.editor.previewToWorld(e,!1);this.drawingContainer.addPointToCurrentStroke(t),this.editor.render()}},e.prototype.endStroke=function(){this.drawingContainer&&(this.drawingContainer.endStroke(),this.editor.render(),this.strokes=this.drawingContainer.getData(),this.editor.addSnapshot(void 0,"edit",""))},e.prototype.updateStateFromHistory=function(e){e=e||{strokes:[]},this.drawingContainer&&(this.strokes=e,this.drawingContainer.setData(this.strokes))},e.prototype.pureReset=function(){this.strokes={strokes:[]},this.drawingContainer&&(this.editor.engine.removeContainer(this.drawingContainer),this.drawingContainer=void 0)},Object.defineProperty(e.prototype,"config",{get:function(){return this.editor.configStore.config[r.Tool.BRUSH]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get:function(){return this.editor.configStore.locale[r.Tool.BRUSH]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localeColor",{get:function(){return this.editor.configStore.locale.common.color},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this.state.color},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeColor",{get:function(){return this.activeColorId.get()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.state.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sizeOnScreenSpace",{get:function(){return this.editor.worldToPreview(this.state.size)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hardness",{get:function(){return this.state.hardness},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colors",{get:function(){return this.editor.defaultColors},enumerable:!0,configurable:!0}),r.__decorate([_e],e.prototype,"state",void 0),r.__decorate([xt],e.prototype,"changeColor",void 0),r.__decorate([xt],e.prototype,"changeSize",void 0),r.__decorate([xt],e.prototype,"changeHardness",void 0),r.__decorate([xt],e.prototype,"clickableCanvas",null),r.__decorate([xt],e.prototype,"beginStroke",null),r.__decorate([xt],e.prototype,"strokePosition",null),r.__decorate([xt],e.prototype,"endStroke",null),r.__decorate([xt],e.prototype,"updateStateFromHistory",null),r.__decorate([Oe],e.prototype,"config",null),r.__decorate([Oe],e.prototype,"locale",null),r.__decorate([Oe],e.prototype,"localeColor",null),r.__decorate([Oe],e.prototype,"color",null),r.__decorate([Oe],e.prototype,"activeColor",null),r.__decorate([Oe],e.prototype,"size",null),r.__decorate([Oe],e.prototype,"sizeOnScreenSpace",null),r.__decorate([Oe],e.prototype,"hardness",null),r.__decorate([Oe],e.prototype,"colors",null),e}(),fn={position:{x:0,y:0},size:{height:0,width:0},lockResolution:!1,forceDimensions:!1,ratio:"*",isRatioFlipped:!1},gn={identifier:"identity",outputRotation:0,rotationInDegrees:0,flipHorizontally:!1,flipVertically:!1,cropState:_e.map({})};function mn(e){return e&&"object"==typeof e&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function yn(e,t){var o;return t&&!0===t.clone&&mn(e)?bn((o=e,Array.isArray(o)?[]:{}),e,t):e}function bn(e,t,o){return Array.isArray(t)?Array.isArray(e)?t:yn(t,o):function(e,t,o){var n={};return mn(e)&&Object.keys(e).forEach((function(t){n[t]=yn(e[t],o)})),Object.keys(t).forEach((function(r){var i=mn(t[r])&&e[r];n[r]=i?bn(e[r],t[r],o):yn(t[r],o)})),n}(e,t,o)}function vn(e,t){if(void 0===t&&(t=null),!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,o){return bn(e,o,t)}))}var _n,xn={common:{error:"Error",warning:"Warning",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Color",sliderOpacity:"Color Opacity"}}},mainCanvasActions:{buttonExport:"Export Image",buttonUndo:"Undo",buttonRedo:"Redo",buttonClose:"Close"},infoModals:{exporting:{heading:"Exporting...",body:"Just a few seconds..."},saving:{heading:"Saving...",body:"Just a few seconds..."},loading:{heading:"Loading...",body:"Just a few seconds..."},resizing:{heading:"Resizing...",body:"Just a few seconds..."},loadingFonts:{heading:"Loading Fonts...",body:"Just a few seconds..."}},errorModals:{imageLoading:{body:"Failed to load image. This can have multiple reasons, e.g. the file is corrupted or the file type is not supported",buttonYes:"Reload"},rendering:{body:"An error has occurred while rendering the image",buttonYes:"Reload"},fontLoading:{heading:"Failed to load font",body:"The following fonts could not be loaded: ${error}",buttonNo:"Close"},webcamUnavailable:{body:"Unable to display webcam image (Error: ${error})",buttonYes:"Close"},stickerLoading:{body:"Unable to load the sticker",buttonNo:"Close"},unsupportedSerializationVersion:{body:"Serialization version is not supported",buttonNo:"Close"}},warningModals:{imageResized:{heading:"Image resized",body:"Your image has been resized to ${width}x${height} pixels"},discardChanges:{body:"You have unsaved changes. Are you sure you want to discard the changes?",buttonYes:"Discard changes",buttonNo:"Keep Changes"}},library:{title:"Library",controls:{buttonUpload:"Upload Image",buttonWebcamOpen:"Open Webcam",buttonWebcamClose:"Close Webcam",placeholderSearch:"Search Library",noResults:"No Results"}},filter:{title:"Filters",controls:{buttonReset:"Remove Filter",sliderIntensity:"Filter Intensity"},categories:{imgly_filter_category_duotone:"DuoTone",imgly_filter_category_bw:"B & W",imgly_filter_category_vintage:"Vintage",imgly_filter_category_smooth:"Smooth",imgly_filter_category_cold:"Cold",imgly_filter_category_warm:"Warm",imgly_filter_category_legacy:"Legacy"},items:{imgly_lut_celsius:"Inferno",imgly_lut_chest:"Chestnut",imgly_lut_fixie:"Fixie",imgly_lut_fridge:"Fridge",imgly_lut_front:"Sunny 70s",imgly_lut_k2:"Flat Black",imgly_lut_mellow:"Mellow",imgly_lut_sin:"Hard Stuff",imgly_lut_texas:"Oldtimer",imgly_lut_ad1920:"1920 A.D.",imgly_lut_ancient:"Ancient",imgly_lut_bleached:"Kalmen",imgly_lut_bleachedblue:"Joran",imgly_lut_blues:"Polaroid",imgly_lut_blueshadows:"Zephyr",imgly_lut_breeze:"Levante",imgly_lut_bw:"Greyed",imgly_lut_classic:"Classic",imgly_lut_colorful:"Colorful",imgly_lut_cool:"Snappy",imgly_lut_cottoncandy:"Candy",imgly_lut_creamy:"Creamy",imgly_lut_eighties:"Low Fire",imgly_lut_elder:"Colla",imgly_lut_evening:"Sunrise",imgly_lut_fall:"Moss",imgly_lut_food:"Food",imgly_lut_glam:"Glam",imgly_lut_gobblin:"Gobblin",imgly_lut_highcarb:"High Carb",imgly_lut_highcontrast:"Hicon",imgly_lut_k1:"K1",imgly_lut_k6:"K6",imgly_lut_kdynamic:"Pebble",imgly_lut_keen:"Keen",imgly_lut_lenin:"Lemon",imgly_lut_litho:"Litho",imgly_lut_lomo:"Lomo",imgly_lut_lomo100:"Lomo 100",imgly_lut_lucid:"Lucid",imgly_lut_neat:"Neat",imgly_lut_nogreen:"Pumpkin",imgly_lut_orchid:"Solanus",imgly_lut_pale:"Pale",imgly_lut_pitched:"Pitched",imgly_lut_plate:"Weathered",imgly_lut_pola669:"Green Gap",imgly_lut_polasx:"Pola SX",imgly_lut_pro400:"Pro 400",imgly_lut_quozi:"Quozi",imgly_lut_sepiahigh:"Sepia",imgly_lut_settled:"Settled",imgly_lut_seventies:"Seventies",imgly_lut_soft:"Soft",imgly_lut_steel:"Steel",imgly_lut_summer:"Summer",imgly_lut_sunset:"Golden",imgly_lut_tender:"Tender",imgly_lut_twilight:"Twilight",imgly_lut_winter:"Softy",imgly_lut_x400:"Dusty",imgly_duotone_desert:"Desert",imgly_duotone_peach:"Peach",imgly_duotone_clash:"Clash",imgly_duotone_plum:"Plum",imgly_duotone_breezy:"Breezy",imgly_duotone_deepblue:"Deep Blue",imgly_duotone_frog:"Frog",imgly_duotone_sunset:"Sunset"}},adjustment:{title:"Adjust",controls:{buttonReset:"Remove Adjustment"},categories:{basics:"Basic",refinements:"Refinements"},items:{brightness:"Brightness",saturation:"Saturation",contrast:"Contrast",gamma:"Gamma",sharpness:"Sharpness",clarity:"Clarity",exposure:"Exposure",shadows:"Shadows",highlights:"Highlights",whites:"Whites",blacks:"Blacks",temperature:"Temperature"}},focus:{title:"Focus",controls:{buttonReset:"Remove Focus",sliderIntensity:"Focus Intensity"},items:{radial:"Radial",mirrored:"Mirrored",linear:"Linear",gaussian:"Gaussian"},history:{focusPosition:"Focus Position",focusSize:"Focus Size"}},overlay:{title:"Overlays",controls:{buttonReset:"Remove Overlay",sliderOpacity:"Overlay Opacity",carouselBlendMode:"Overlay Blend mode",blendModeNormal:"Normal",blendModeOverlay:"Overlay",blendModeHardLight:"Hard Light",blendModeSoftLight:"Soft Light",blendModeMultiply:"Multiply",blendModeDarken:"Darken",blendModeLighten:"Lighten",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Opacity",tabBlendMode:"Blend Mode"},items:{imgly_overlay_bokeh:"Bokeh",imgly_overlay_chop:"Chop",imgly_overlay_clouds:"Clouds",imgly_overlay_golden:"Golden",imgly_overlay_grain:"Grain",imgly_overlay_hearts:"Hearts",imgly_overlay_lightleak1:"Light Leak 1",imgly_overlay_lightleak2:"Light Leak 2",imgly_overlay_metal:"Metal",imgly_overlay_mosaic:"Mosaic",imgly_overlay_painting:"Painting",imgly_overlay_paper:"Paper",imgly_overlay_rain:"Rain",imgly_overlay_vintage:"Vintage",imgly_overlay_wall1:"Wall",imgly_overlay_wall2:"Wall 2",imgly_overlay_wood:"Wood"}},sticker:{title:"Stickers",controls:{buttonUpload:"Upload Sticker",sliderOpacity:"Sticker Opacity",selectColor:"Sticker Color",tabColor:"Color",tabOpacity:"Opacity"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate",buttonFlipHorizontal:"Flip",buttonFlipVertical:"Flip"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"New Text",dropdownFontFamily:"Font Family",dropdownFontStyle:"Font Style",selectAlignment:"Alignment",selectFontColor:"Font Color",selectBackgroundColor:"Background Color",sliderLineSpacing:"Line Spacing",tabColor:"Color",tabBgColor:"Bg Color",tabAlignment:"Alignment",tabLineHeight:"Line Height",tabFontStyle:"Font Style"},canvasControls:{placeholderText:"Write Something",buttonSave:"Done",buttonClose:"Close",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"New Text Design",buttonShuffle:"Shuffle Text Design",selectColor:"Text Color",tabColor:"Color",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Write Something",buttonSave:"Done",buttonClose:"Schlieen",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonInvert:"Invert",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Frames",controls:{buttonReset:"Remove Frame",sliderOpacity:"Frame Opacity",sliderSize:"Frame Size",selectColor:"Frame Color",tabColor:"Color",tabOpacity:"Opacity",tabSize:"Size"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Brush",controls:{sliderSize:"Brush Size",sliderHardness:"Brush Hardness",selectColor:"Brush Color",tabSize:"Size",tabHardness:"Hardness",tabColor:"Color"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Transform",controls:{buttonReset:"Reset to default",checkboxKeepResolution:"Keep Resolution",inputCropSize:"Crop Size",inputHeight:"h",inputWidth:"w",tabFlipAndRotate:"Flip & Rotate",tabResolution:"Resolution",tabCropSize:"Crop Size",selectFlipRatio:"Flip Crop Ratio"},categories:{imgly_transforms_common:"Common Crops",imgly_transforms_facebook:"Facebook"},items:{imgly_transform_common_custom:"Custom",imgly_transform_common_square:"Square",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_facebook_profile:"Profile Pic",imgly_transform_facebook_ad:"Ad",imgly_transform_facebook_post:"Post",imgly_transform_facebook_cover:"Cover"}}},Sn=Object.freeze({__proto__:null,defaultLanguage:xn,de:{common:{error:"Fehler",warning:"Warnung",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Farbe",sliderOpacity:"Farbe Intransparenz"}}},mainCanvasActions:{buttonExport:"Bild Exportieren",buttonUndo:"Rckgngig machen",buttonRedo:"Wiederholen",buttonClose:"Schlieen"},infoModals:{exporting:{heading:"Exportieren...",body:"Just a few seconds..."},saving:{heading:"Speichere...",body:"Just a few seconds..."},loading:{heading:"Lade...",body:"Just a few seconds..."},resizing:{heading:"Bild wird bearbeitet...",body:"Just a few seconds..."},loadingFonts:{heading:"Lade Schriftarten...",body:"Just a few seconds..."}},errorModals:{imageLoading:{body:"Laden des Bildes fehlgeschlagen. Dies kann verschiedene Grnde haben, beispielsweise kann die Datei defekt sein oder der Dateityp wird nicht untersttzt",buttonYes:"Neu Laden"},rendering:{body:"Beim Rendern des Bildes ist ein Fehler aufgetreten",buttonYes:"Neu Laden"},fontLoading:{heading:"Laden von Schriftarten ist fehlgeschlagen",body:"Die folgenden Schriftarten konnten nicht geladen werden: ${error}",buttonNo:"Schlieen"},webcamUnavailable:{body:"Webcam-Bild kann nicht dargestellt werden. (Fehler: ${error})",buttonYes:"Schlieen"},stickerLoading:{body:"Laden des Stickers fehlgeschlagen.",buttonNo:"Schlieen"},unsupportedSerializationVersion:{body:"Serialization version ist nicht untersttzt",buttonNo:"Schlieen"}},warningModals:{imageResized:{heading:"Bild verkleinert",body:"Das Bild wurde es auf ${width}x${height} Pixel verkleinert"},discardChanges:{body:"Sind Sie sicher, dass Sie die nderungen verwerfen wollen?",buttonYes:"nderungen verwerfen?",buttonNo:"nderungen beibehalten"}},library:{title:"Bibliothek",controls:{buttonUpload:"Hochladen",buttonWebcamOpen:"Webcam",buttonWebcamClose:"Close Webcam",placeholderSearch:"Bibliothek durchsuchen",noResults:"Keine Ergebnisse"}},filter:{title:"Filters",controls:{buttonReset:"Zurcksetzen",sliderIntensity:"Filter Intensitt"},categories:{imgly_filter_category_duotone:"DuoTone",imgly_filter_category_bw:"B & W",imgly_filter_category_vintage:"Vintage",imgly_filter_category_smooth:"Smooth",imgly_filter_category_cold:"Cold",imgly_filter_category_warm:"Warm",imgly_filter_category_legacy:"Legacy"},items:{imgly_lut_celsius:"Inferno",imgly_lut_chest:"Chestnut",imgly_lut_fixie:"Fixie",imgly_lut_fridge:"Fridge",imgly_lut_front:"Sunny 70s",imgly_lut_k2:"Flat Black",imgly_lut_mellow:"Mellow",imgly_lut_sin:"Hard Stuff",imgly_lut_texas:"Oldtimer",imgly_lut_ad1920:"1920 A.D.",imgly_lut_ancient:"Ancient",imgly_lut_bleached:"Kalmen",imgly_lut_bleachedblue:"Joran",imgly_lut_blues:"Polaroid",imgly_lut_blueshadows:"Zephyr",imgly_lut_breeze:"Levante",imgly_lut_bw:"Greyed",imgly_lut_classic:"Classic",imgly_lut_colorful:"Colorful",imgly_lut_cool:"Snappy",imgly_lut_cottoncandy:"Candy",imgly_lut_creamy:"Creamy",imgly_lut_eighties:"Low Fire",imgly_lut_elder:"Colla",imgly_lut_evening:"Sunrise",imgly_lut_fall:"Moss",imgly_lut_food:"Food",imgly_lut_glam:"Glam",imgly_lut_gobblin:"Gobblin",imgly_lut_highcarb:"High Carb",imgly_lut_highcontrast:"Hicon",imgly_lut_k1:"K1",imgly_lut_k6:"K6",imgly_lut_kdynamic:"Pebble",imgly_lut_keen:"Keen",imgly_lut_lenin:"Lemon",imgly_lut_litho:"Litho",imgly_lut_lomo:"Lomo",imgly_lut_lomo100:"Lomo 100",imgly_lut_lucid:"Lucid",imgly_lut_neat:"Neat",imgly_lut_nogreen:"Pumpkin",imgly_lut_orchid:"Solanus",imgly_lut_pale:"Pale",imgly_lut_pitched:"Pitched",imgly_lut_plate:"Weathered",imgly_lut_pola669:"Green Gap",imgly_lut_polasx:"Pola SX",imgly_lut_pro400:"Pro 400",imgly_lut_quozi:"Quozi",imgly_lut_sepiahigh:"Sepia",imgly_lut_settled:"Settled",imgly_lut_seventies:"Seventies",imgly_lut_soft:"Soft",imgly_lut_steel:"Steel",imgly_lut_summer:"Summer",imgly_lut_sunset:"Golden",imgly_lut_tender:"Tender",imgly_lut_twilight:"Twilight",imgly_lut_winter:"Softy",imgly_lut_x400:"Dusty",imgly_duotone_desert:"Desert",imgly_duotone_peach:"Peach",imgly_duotone_clash:"Clash",imgly_duotone_plum:"Plum",imgly_duotone_breezy:"Breezy",imgly_duotone_deepblue:"Deep Blue",imgly_duotone_frog:"Frog",imgly_duotone_sunset:"Sunset"}},adjustment:{title:"Korrekturen",controls:{buttonReset:"Zurcksetzen"},categories:{basics:"Grundlagen",refinements:"Feinheiten"},items:{brightness:"Helligkeit",saturation:"Sttigung",contrast:"Kontrast",gamma:"Gamma",sharpness:"Schrfe",clarity:"Klarheit",exposure:"Belichtung",shadows:"Schatten",highlights:"Lichter",whites:"Wei",blacks:"Schwarz",temperature:"Temperatur"}},focus:{title:"Weichzeichnen",controls:{buttonReset:"Zurcksetzen",sliderIntensity:"Focus Intensitt"},items:{radial:"Kreisfrmig",mirrored:"Gespiegelt",linear:"Linear",gaussian:"Gausch"},history:{focusPosition:"Focus Position",focusSize:"Focus Gre"}},overlay:{title:"Overlays",controls:{buttonReset:"Zurcksetzen",sliderOpacity:"Overlay Intransparenz",carouselBlendMode:"Overlay Mischmodus",blendModeNormal:"Normal",blendModeOverlay:"Overlay",blendModeHardLight:"Hard Light",blendModeSoftLight:"Soft Light",blendModeMultiply:"Multiply",blendModeDarken:"Darken",blendModeLighten:"Lighten",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Intransparenz",tabBlendMode:"Blend Mode"},items:{imgly_overlay_bokeh:"Bokeh",imgly_overlay_chop:"Chop",imgly_overlay_clouds:"Clouds",imgly_overlay_golden:"Golden",imgly_overlay_grain:"Grain",imgly_overlay_hearts:"Hearts",imgly_overlay_lightleak1:"Light Leak 1",imgly_overlay_lightleak2:"Light Leak 2",imgly_overlay_metal:"Metal",imgly_overlay_mosaic:"Mosaic",imgly_overlay_painting:"Painting",imgly_overlay_paper:"Paper",imgly_overlay_rain:"Rain",imgly_overlay_vintage:"Vintage",imgly_overlay_wall1:"Wall",imgly_overlay_wall2:"Wall 2",imgly_overlay_wood:"Wood"}},sticker:{title:"Stickers",controls:{buttonUpload:"Sticker Hochladen",sliderOpacity:"Sticker Transparenz",selectColor:"Form Farbe",tabColor:"Farbe",tabOpacity:"Intransparenz"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"Lschen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren",buttonFlipHorizontal:"Flippen",buttonFlipVertical:"Flippen"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"Neuer Text",dropdownFontFamily:"Schriftart",dropdownFontStyle:"Schriftstil",selectAlignment:"Ausrichtung",selectFontColor:"Schriftfarbe",selectBackgroundColor:"Hintergrund Color",sliderLineSpacing:"Zeile",tabColor:"Farbe",tabBgColor:"Hintergrund",tabAlignment:"Ausrichtung",tabLineHeight:"Zeile",tabFontStyle:"Schriftstil"},canvasControls:{placeholderText:"Etwas aufschreiben",buttonSave:"Done",buttonClose:"Schlieen",inputText:"Text Input"},canvasActions:{buttonEdit:"Bearbeiten",buttonDelete:"Lschen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"Neues Text Design",buttonShuffle:"Shuffle Text Design",selectColor:"Text Farbe",tabColor:"Color",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Etwas aufschreiben",buttonSave:"Done",buttonClose:"Schlieen",inputText:"Text Input"},canvasActions:{buttonEdit:"Bearbeiten",buttonInvert:"Invertieren",buttonDelete:"Lschen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Rahmen",controls:{buttonReset:"Zurcksetzen",sliderOpacity:"Rahmen Intransparenz",sliderSize:"Rahmen Dicke",selectColor:"Rahmen Farbe",tabColor:"Farbe",tabOpacity:"Intransparenz",tabSize:"Dicke"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Malen",controls:{sliderSize:"Dicke",sliderHardness:"Hrte",selectColor:"Farbe",tabColor:"Farbe",tabSize:"Dicke",tabHardness:"Hrte"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Zuschneiden",controls:{buttonReset:"Zurcksetzen",checkboxKeepResolution:"Fixiere Auflsung",inputCropSize:"Bildgre",inputHeight:"h",inputWidth:"b",tabFlipAndRotate:"Flip & Rotate",tabResolution:"Auflsung",tabCropSize:"Bildgre",selectFlipRatio:"Flip Crop Ratio"},categories:{imgly_transforms_common:"Standard",imgly_transforms_facebook:"Facebook"},items:{imgly_transform_common_custom:"Frei",imgly_transform_common_square:"Quadratisch",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_facebook_profile:"Profile Pic",imgly_transform_facebook_ad:"Ad",imgly_transform_facebook_post:"Post",imgly_transform_facebook_cover:"Cover"}}},en:xn}),wn=function(){function e(){}return e.addScrollStyles=function(t){void 0===t&&(t="rgba(255, 255, 255, 0.2)");var o="\n    /* Injected by PhotoEditorSDK */\n    "+e.styles(t)+"\n  ",n=document.createElement("style");n.innerHTML=o,document.head.appendChild(n)},e.styles=function(e){return"\n    [data-simplebar] {\n      position: relative;\n      flex-direction: column;\n      flex-wrap: wrap;\n      justify-content: flex-start;\n      align-content: flex-start;\n      align-items: flex-start;\n    }\n\n    .simplebar-wrapper {\n      overflow: hidden;\n      width: inherit;\n      height: inherit;\n      max-width: inherit;\n      max-height: inherit;\n    }\n\n    .simplebar-mask {\n      direction: inherit;\n      position: absolute;\n      overflow: hidden;\n      padding: 0;\n      margin: 0;\n      left: 0;\n      top: 0;\n      bottom: 0;\n      right: 0;\n      width: auto !important;\n      height: auto !important;\n      z-index: 0;\n    }\n\n    .simplebar-offset {\n      direction: inherit !important;\n      box-sizing: inherit !important;\n      resize: none !important;\n      position: absolute;\n      top: 0;\n      left: 0;\n      bottom: 0;\n      right: 0;\n      padding: 0;\n      margin: 0;\n      -webkit-overflow-scrolling: touch;\n    }\n\n    .simplebar-content-wrapper {\n      direction: inherit;\n      box-sizing: border-box !important;\n      position: relative;\n      display: block;\n      height: 100%; /* Required for horizontal native scrollbar to not appear if parent is taller than natural height */\n      width: auto;\n      visibility: visible;\n      overflow: auto; /* Scroll on this element otherwise element can't have a padding applied properly */\n      max-width: 100%; /* Not required for horizontal scroll to trigger */\n      max-height: 100%; /* Needed for vertical scroll to trigger */\n    }\n\n    .simplebar-content:before,\n    .simplebar-content:after {\n      content: ' ';\n      display: table;\n    }\n\n    .simplebar-placeholder {\n      max-height: 100%;\n      max-width: 100%;\n      width: 100%;\n      pointer-events: none;\n    }\n\n    .simplebar-height-auto-observer-wrapper {\n      box-sizing: inherit !important;\n      height: 100%;\n      width: 100%;\n      max-width: 1px;\n      position: relative;\n      float: left;\n      max-height: 1px;\n      overflow: hidden;\n      z-index: -1;\n      padding: 0;\n      margin: 0;\n      pointer-events: none;\n      flex-grow: inherit;\n      flex-shrink: 0;\n      flex-basis: 0;\n    }\n\n    .simplebar-height-auto-observer {\n      box-sizing: inherit;\n      display: block;\n      opacity: 0;\n      position: absolute;\n      top: 0;\n      left: 0;\n      height: 1000%;\n      width: 1000%;\n      min-height: 1px;\n      min-width: 1px;\n      overflow: hidden;\n      pointer-events: none;\n      z-index: -1;\n    }\n\n    .simplebar-track {\n      z-index: 1;\n      position: absolute;\n      right: 0;\n      bottom: 0;\n      pointer-events: none;\n      overflow: hidden;\n    }\n\n    [data-simplebar].simplebar-dragging .simplebar-track {\n      pointer-events: all;\n    }\n\n    .simplebar-scrollbar {\n      position: absolute;\n      right: 2px;\n      width: 7px;\n      min-height: 10px;\n    }\n\n    .simplebar-scrollbar:before {\n      position: absolute;\n      content: '';\n      background: "+e+";\n      border-radius: 7px;\n      left: 0;\n      right: 0;\n      opacity: 0;\n      transition: opacity 0.2s linear;\n    }\n\n    .simplebar-track .simplebar-scrollbar.simplebar-visible:before {\n      /* When hovered, remove all transitions from drag handle */\n      opacity: 0.5;\n      transition: opacity 0s linear;\n    }\n\n    .simplebar-track.simplebar-vertical {\n      top: 0;\n      width: 11px;\n    }\n\n    .simplebar-track.simplebar-vertical .simplebar-scrollbar:before {\n      top: 2px;\n      bottom: 2px;\n    }\n\n    .simplebar-track.simplebar-vertical .simplebar-scrollbar {\n      right: 0px;\n      width: 4px;\n    }\n\n    .simplebar-track.simplebar-horizontal {\n      left: 0;\n      height: 11px;\n    }\n\n    .simplebar-track.simplebar-horizontal .simplebar-scrollbar:before {\n      height: 100%;\n      left: 2px;\n      right: 2px;\n    }\n\n    .simplebar-track.simplebar-horizontal .simplebar-scrollbar {\n      right: auto;\n      left: 0;\n      min-height: 0;\n      min-width: 10px;\n      width: auto;\n      top: 7px;\n      height: 4px;\n    }\n\n    /* Rtl support */\n    [data-simplebar-direction='rtl'] .simplebar-track.simplebar-vertical {\n      right: auto;\n      left: 0;\n    }\n\n    .hs-dummy-scrollbar-size {\n      direction: rtl;\n      position: fixed;\n      opacity: 0;\n      visibility: hidden;\n      height: 500px;\n      width: 500px;\n      overflow-y: hidden;\n      overflow-x: scroll;\n    }\n  "},e}(),kn=function(e){var t=void 0===e?{primary:"#365afc",background:"#000000",foreground:"#FFFFFF"}:e,o=t.primary,n=void 0===o?"#365afc":o,r=t.background,i=void 0===r?"#000000":r,a=t.foreground,s=void 0===a?"#FFFFFF":a,l="rgba(255, 255, 255, 0.90)",c="rgba(255, 255, 255, 0.60)",u="rgba(255, 255, 255, 0.38)";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",provider:"google"},background:i,foreground:s,primary:n,warning:"#ffba5c",error:"#c2393a",success:"#39c26c",focusOutlineColor:"rgba(255, 255, 255, 0.12)",scrollbar:{handleColor:"rgba(255, 255, 255, 0.2)"},button:{borderColor:"#333333",hoverBackground:"rgba(255, 255, 255, 0.08)",hoverForeground:c,activeForeground:n,activeBackground:"rgba(89, 121, 252, 0.20)",primaryBackground:"#242424",primaryForeground:l,secondaryBackground:"transparent",secondaryForeground:c},checkbox:{background:"#333333",foreground:s,hoverBackground:"rgba(255, 255, 255, 0.08)",activeForeground:s,activeBackground:n},modal:{background:"#424242",bodyForeground:l,headerForeground:c,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:"#333333",foreground:l,borderColor:"transparent",hoverBackground:"rgba(255, 255, 255, 0.08)",activeBorderColor:n,activeBackground:"rgba(89, 121, 252, 0.20)",labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:l,disabledBackground:"rgba(0, 0, 0, 0.3)"},tab:{titleForeground:c,activeBorderColor:n,activeForeground:l},dropdown:{background:"transparent",foreground:l,hoverColor:c,borderColor:"#333333",caretColor:u,listBackground:"#333333",listBorder:"#333333",listForeground:c,listShadow:"0 12px 17px 2px rgba(0,0,0,0.14),\n        0 5px 22px 4px rgba(0,0,0,0.12),\n        0 7px 8px -4px rgba(0,0,0,0.20)"},textInput:{foreground:l,hoverColor:"rgba(255, 255, 255, 0.40)",background:"transparent",borderColor:"#333333"},slider:{trackColor:"rgba(255, 255, 255, 0.4)",activeTrackColor:n,thumbBackground:"#171717",thumbBorderColor:n},toolbar:{foreground:l,background:"#242424",activeBackground:"rgba(89, 121, 252, 0.20)",activeForeground:n,borderColor:"transparent",disabledBackground:"rgba(0, 0, 0, 0.6)"},tooltip:{background:"#424242",foreground:l},toolControlBar:{background:"rgba(23, 23, 23, 0.9)",borderColor:"transparent",separator:"#333333",titleForeground:c,labelForeground:c},mainCanvasActionBar:{background:"linear-gradient(0deg, transparent 0%,  rgba(0, 0, 0, 0.6) 98%)",foreground:l,buttonForeground:c,buttonBackground:"transparent"},canvasActionBar:{background:"#424242",foreground:l,separator:u},canvas:{background:"#0B0B0B",controlsOutline:"rgba(255, 255, 255, 0.5)",controls:"#ffffff",cropBackdrop:"rgba(0, 0, 0, 0.5)"},colorPicker:{listBackground:"#333333",listShadow:"0 12px 17px 2px rgba(0,0,0,0.14),\n        0 5px 22px 4px rgba(0,0,0,0.12),\n        0 7px 8px -4px rgba(0,0,0,0.20)",controls:"#ffffff",inputBorderColor:"#424242"},webcam:{backdrop:"#0B0B0B",button:s}}},Cn=function(e){var t=void 0===e?{primary:"#1e47fb",background:"#FFFFFF",foreground:"#000000"}:e,o=t.primary,n=void 0===o?"#1e47fb":o,r=t.background,i=void 0===r?"#FFFFFF":r,a=t.foreground,s=void 0===a?"#000000":a,l="rgba(0, 0, 0, 0.90)",c="rgba(0, 0, 0, 0.60)",u="rgba(0, 0, 0, 0.38)";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",provider:"google"},background:i,foreground:s,primary:n,warning:"#ffb045",error:"#c01a1b",success:"#17c658",focusOutlineColor:"rgba(125, 125, 125, 0.12)",scrollbar:{handleColor:"rgba(0, 0, 0, 0.2)"},button:{borderColor:"#D4D4D4",hoverBackground:"rgba(125, 125, 125, 0.12)",hoverForeground:c,activeForeground:n,activeBackground:"rgba(30, 71, 251, 0.2)",primaryBackground:"#E6E6E6",primaryForeground:l,secondaryBackground:"transparent",secondaryForeground:c},checkbox:{background:"#D4D4D4",foreground:s,hoverBackground:"rgba(125, 125, 125, 0.12)",activeForeground:s,activeBackground:n},modal:{background:"#CCCCCC",bodyForeground:l,headerForeground:c,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:"#D4D4D4",foreground:l,borderColor:"transparent",hoverBackground:"rgba(125, 125, 125, 0.12)",activeBorderColor:n,activeBackground:"rgba(30, 71, 251, 0.2)",labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:"rgba(255, 255, 255, 0.87)",disabledBackground:"rgba(255, 255, 255, 0.5)"},tab:{titleForeground:c,activeBorderColor:n,activeForeground:l},dropdown:{background:"transparent",foreground:l,hoverColor:c,borderColor:"#D4D4D4",listBackground:"#D4D4D4",caretColor:u,listForeground:c,listBorder:"#D4D4D4",listShadow:"0 8px 10px 1px rgba(0,0,0,0.14),\n        0 3px 14px 2px rgba(0,0,0,0.12),\n        0 5px 5px -3px rgba(0,0,0,0.20)"},textInput:{foreground:l,hoverColor:c,background:"transparent",borderColor:"#D4D4D4"},slider:{trackColor:"#CCCCCC",activeTrackColor:n,thumbBackground:"#EEEEEE",thumbBorderColor:n},toolbar:{foreground:l,background:"#D4D4D4",activeBackground:"rgba(30, 71, 251, 0.2)",activeForeground:n,borderColor:"transparent",disabledBackground:"rgba(255, 255, 255, 0.6)"},tooltip:{background:"#CCCCCC",foreground:l},toolControlBar:{background:"rgba(238, 238, 238, 0.9)",borderColor:"#EEEEEE",separator:"#D4D4D4",titleForeground:c,labelForeground:c},mainCanvasActionBar:{background:"#FBFBFB",foreground:l,buttonForeground:c,buttonBackground:"transparent"},canvasActionBar:{background:"#CCCCCC",foreground:l,separator:u},canvas:{background:"#FBFBFB",controlsOutline:"rgba(255, 255, 255, 0.6)",controls:"#ffffff",cropBackdrop:"rgba(255, 255, 255, 0.3)"},colorPicker:{listBackground:"#D4D4D4",listShadow:"0 8px 10px 1px rgba(0,0,0,0.14),\n        0 3px 14px 2px rgba(0,0,0,0.12),\n        0 5px 5px -3px rgba(0,0,0,0.20)",controls:"#ffffff",inputBorderColor:"#CCCCCC"},webcam:{backdrop:"#FBFBFB",button:s}}},On=kn(),Tn=function(e){return"light"===e?Cn:kn};(_n=exports.UIEvent||(exports.UIEvent={})).EXPORT="export",_n.CLOSE="close",_n.HISTORY_CHANGE="historyChange",_n.EDITOR_READY="editorReady";var En=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.onExport=function(e){this.emit(exports.UIEvent.EXPORT,e)},t.prototype.onClose=function(){this.emit(exports.UIEvent.CLOSE)},t.prototype.onHistoryChange=function(){this.emit(exports.UIEvent.HISTORY_CHANGE)},t.prototype.onEditorReady=function(){this.emit(exports.UIEvent.EDITOR_READY)},t}(r.EventEmitter),Pn={config:m,locale:xn,theme:On},Mn=function(){function e(){this.state=_e(Pn),this.events=new En}return e.prototype.saveConfig=function(e){e.mainCanvasActions&&4!==e.mainCanvasActions.length&&(e.mainCanvasActions.length=4);var t=vn([m,e]),o=function(e,t){switch(e){case"en":case"de":return t&&t[e]?vn([Sn[e],t[e]]):Sn[e]||xn;default:return xn}}(t.language,t.custom.languages),n=function(e,t){var o=Tn(e);if(t&&t[e]){var n={primary:t[e].primary,background:t[e].background,foreground:t[e].foreground};return vn([o(Object.keys(n).reduce((function(e,t){var o;return n[t]?r.__assign({},e,((o={})[t]=n[t],o)):e}),{})),t[e]])}return o()||On}(t.theme,t.custom.themes),i=t.library.provider;delete t.language,delete t.custom.languages,delete t.custom.themes,delete t.library.provider,this.state.config=t,this.state.locale=o,this.state.theme=n,wn.addScrollStyles(this.state.theme.scrollbar.handleColor);var a=this.buildCustomAssetsConfig();return this.assetProvider=new r.AssetManager(a),this.loadThemeFont(),i},Object.defineProperty(e.prototype,"config",{get:function(){return this.state.config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get:function(){return this.state.locale},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"theme",{get:function(){return this.state.theme},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tools",{get:function(){return this.config.tools.reduce((function(e,t){return"string"==typeof t?r.__spread(e,[t]):r.__spread(e,[""],t)}),[])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultTool",{get:function(){return this.config.defaultTool},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOrderDefault",{get:function(){return"default"===this.config.order},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLayoutAdvanced",{get:function(){return"advanced"===this.config.layout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayCloseButton",{get:function(){return-1!==this.config.mainCanvasActions.indexOf(r.CanvasAction.CLOSE)},enumerable:!0,configurable:!0}),e.prototype.loadThemeFont=function(){var e=this.theme.typography;e.skipLoading||this.assetProvider.getFontManager().injectFonts([e])},e.prototype.buildCustomAssetsConfig=function(){var e=this.tools,t=At(this.state.config),o=this.state.config.assetBaseUrl,n=-1!==e.indexOf(r.Tool.FILTER)?t[r.Tool.FILTER]:void 0,i=-1!==e.indexOf(r.Tool.FOCUS)?t[r.Tool.FOCUS]:void 0,a=-1!==e.indexOf(r.Tool.ADJUSTMENT)?t[r.Tool.ADJUSTMENT]:void 0;return{basePath:o,filter:n,focus:i,sticker:-1!==e.indexOf(r.Tool.STICKER)?t[r.Tool.STICKER]:void 0,frame:-1!==e.indexOf(r.Tool.FRAME)?t[r.Tool.FRAME]:void 0,overlay:-1!==e.indexOf(r.Tool.OVERLAY)?t[r.Tool.OVERLAY]:void 0,transform:-1!==e.indexOf(r.Tool.TRANSFORM)?t[r.Tool.TRANSFORM]:void 0,text:-1!==e.indexOf(r.Tool.TEXT)?t[r.Tool.TEXT]:void 0,adjustment:a,textdesign:-1!==e.indexOf(r.Tool.TEXT_DESIGN)?t[r.Tool.TEXT_DESIGN]:void 0}},r.__decorate([xt],e.prototype,"saveConfig",null),r.__decorate([Oe],e.prototype,"config",null),r.__decorate([Oe],e.prototype,"locale",null),r.__decorate([Oe],e.prototype,"theme",null),r.__decorate([Oe],e.prototype,"tools",null),r.__decorate([Oe],e.prototype,"defaultTool",null),r.__decorate([Oe],e.prototype,"isOrderDefault",null),r.__decorate([Oe],e.prototype,"isLayoutAdvanced",null),r.__decorate([Oe],e.prototype,"displayCloseButton",null),e}(),zn={advanced:{toolbar:{width:55,height:48,empty:20},toolControlBar:{width:230,padding:"16px 24px"},card:{small:{height:166/3,width:166/3},medium:{height:87,width:87},large:{height:86,width:182}},spacer:8},basic:{canvasOffset:23,toolbar:{openHeight:88,closeHeight:35},toolControlBar:{itemsBarHeight:72,controlsBarHeight:80,maxHeight:162,maxWidth:300},card:{medium:{height:56,width:80},large:{height:60,width:80}},spacer:8},canvas:{bar:{height:50},sprite:{controlOffset:16,rotateHandle:{height:16},minSize:50,controlPadding:16},crop:{minSize:50},knob:{size:16,touchable:{desktop:24}},corner:{size:14,touchable:{desktop:32,mobile:48},borderWidth:4},width:{size:14}},shared:{buttons:{float:{size:56}},color:{colorItem:{button:{size:20}},colorPicker:{width:214,saturationSlider:{height:150},thumb:{size:14},arrow:{width:36}}}},fontSystem:{headline1:{size:16,letterSpacing:1.5,case:"uppercase"},headline2:{size:14,letterSpacing:.8,case:"uppercase"},body:{size:13,letterSpacing:0,case:"none"},label:{size:13,letterSpacing:0,case:"capitalize"},button1:{size:12,letterSpacing:1.2,case:"uppercase"},button2:{size:14,letterSpacing:0,case:"capitalize"}}},Rn=function(){function e(e){this.editor=e}return e.prototype.setBackgroundImage=function(e){this.container?this.container.setData({image:e}):this.container=this.engine.addImage({image:e,blendMode:r.BlendMode.NORMAL,opacity:1})},e.prototype.getchildren=function(){return this.container.getChildren()},e.prototype.addImageToContainer=function(){var e=this;return new Promise((function(t,o){var n,r=e.editor.activeStore.image;if(e.editor.activeStore.isImageElement(r))n=r,e.setBackgroundImage(n),t();else{var i=e.editor.libraryStore.getRawUrl(r);e.getImageElement(i).then((function(o){n=o,e.setBackgroundImage(n),t()})).catch((function(e){o({identifier:"imageLoading",message:e.message})}))}}))},e.prototype.getImageElement=function(e){var t=this;return new Promise((function(o,n){var r=new Image;r.addEventListener("load",(function(){o(r)})),r.addEventListener("error",(function(e){n(e)})),r.crossOrigin=t.editor.configStore.config.engine.crossOrigin,r.src=e}))},Object.defineProperty(e.prototype,"engine",{get:function(){return this.editor.engine},enumerable:!0,configurable:!0}),e.prototype.getImgageContainerId=function(){return this.container?this.container.getID():""},e}(),In=function(){function e(e){var t=this;this.applyNewImageTransform=function(){var e=t.editor.engineMediator.image.container.getBounds(),o=e.size,n=e.width,i=e.height,a=t.container;a.setTransform(r.RectTransform.IDENTITY),a.setResolution(o),a.setPivot(.5,.5),a.setPosition({x:n/2,y:i/2})},this.editor=e}return Object.defineProperty(e.prototype,"engine",{get:function(){return this.editor.engine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this.engine.getOutputContainer()},enumerable:!0,configurable:!0}),e}();function Dn(e,t){return e.width/e.height>t.width/t.height?e.height/t.height:e.width/t.width}var jn,An,Ln=2*zn.canvas.bar.height,Fn={transform:r.RectTransform.IDENTITY},Bn=function(){function e(e){this.initialTransform=r.RectTransform.IDENTITY,this.editor=e,this.state=_e(Fn)}return e.prototype.createPreview=function(e){this.container=this.editor.engine.createPreview(e)},e.prototype.updateTransform=function(e,t){void 0===e&&(e=0),void 0===t&&(t=!0);var o=this.calculateTransform(e);return!!o.scale.x&&(t?this.saveInitialTransform(o):this.savePreviewTransform(o),this.container.setTransform(this.state.transform),!0)},e.prototype.saveInitialTransform=function(e){this.initialTransform=e,this.savePreviewTransform(e)},e.prototype.savePreviewTransform=function(e){var t=this;St((function(){t.state.transform.position=e.position,t.state.transform.scale=e.scale,t.state.transform.rotation=e.rotation;var o=t.editor.devicePixelRatio;t.previewTransformWithoutDpr={position:new r.Vector2(e.position).divide(o),scale:new r.Vector2(e.scale).divide(o),rotation:e.rotation}}))},Object.defineProperty(e.prototype,"transform",{get:function(){return this.state.transform},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.state.transform.position},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.state.transform.scale},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.state.transform.rotation},enumerable:!0,configurable:!0}),e.prototype.calculateTransform=function(e){void 0===e&&(e=0);var t=this.editor.devicePixelRatio,o=this.editor.canvasStore.canvasSize,n=o.width,i=o.height,a=this.editor.engine.getOutputDimensions(),s=Dn({width:n,height:i},a),l=.95;window.innerWidth<600&&(l=.98),s*=l;var c=i-a.height*s;c<Ln&&(s=Dn({width:n,height:i-2*c},a),s*=l),s*=t;var u={x:n*t/2,y:i*t/2},d={x:s=parseFloat(s.toFixed(2)),y:s};return new r.RectTransform(u,d,e)},r.__decorate([xt],e.prototype,"updateTransform",null),r.__decorate([xt],e.prototype,"savePreviewTransform",null),r.__decorate([Oe],e.prototype,"transform",null),r.__decorate([Oe],e.prototype,"position",null),r.__decorate([Oe],e.prototype,"scale",null),r.__decorate([Oe],e.prototype,"rotation",null),e}(),Nn=function(){function e(){this.imageContainerOrder=[],this.spriteContainerOrder=[]}return e.prototype.addIndex=function(t){this.checkTool(t);var o=this.indexForOrder(e.IMAGE_CONTAINER_INDEX,this.imageContainerOrder,t),n=o.index,r=o.order;return this.imageContainerOrder=r,n},e.prototype.removeIndex=function(e){this.checkTool(e),this.remove(e,this.imageContainerOrder)},e.prototype.getSpriteIndex=function(e){return this.spriteContainerOrder.findIndex((function(t){return t===e}))+this.imageContainerOrder.length-1},e.prototype.addSprite=function(e){return this.spriteContainerOrder.push(e),this.imageContainerOrder.length+this.spriteContainerOrder.length-1},e.prototype.removeSprite=function(e){this.remove(e,this.spriteContainerOrder)},e.prototype.renameSprite=function(e,t){var o=this.spriteContainerOrder.findIndex((function(t){return t===e}));-1!==o&&(this.spriteContainerOrder[o]=t)},e.prototype.getLastSpriteId=function(){var e=this.spriteContainerOrder.length;return this.spriteContainerOrder[e-1]},e.prototype.bringToFront=function(e){var t=this.spriteContainerOrder.findIndex((function(t){return t===e}));return-1!==t&&(this.spriteContainerOrder.splice(t,1),this.spriteContainerOrder.push(e)),this.getLastSpriteIndex()},e.prototype.getLastSpriteIndex=function(){return this.imageContainerOrder.length+this.spriteContainerOrder.length-1},e.prototype.checkTool=function(e){if(-1!==[r.Tool.STICKER,r.Tool.TEXT,r.Tool.TEXT_DESIGN,r.Tool.BRUSH,r.Tool.FRAME].indexOf(e))throw new Error("addIndex is used for non sprites, for sprites use addSprite")},e.prototype.remove=function(e,t){var o=t.findIndex((function(t){return t===e}));-1!==o&&t.splice(o,1)},e.prototype.indexForOrder=function(e,t,o){var n=e[o],i=t.findIndex((function(e){return e===o}));if(-1!==i)return{index:i,order:t};var a=t.length;if(a){var s=void 0;for(s=0;s<a;s++){if(n<e[t[s]])return{index:s,order:t=r.__spread(t.slice(0,s),[o],t.slice(s))}}}return t.push(o),{index:t.length-1,order:t}},e.IMAGE_CONTAINER_INDEX=((jn={})[r.Tool.ART_FILTER]=0,jn[r.Tool.FILTER]=1,jn[r.Tool.ADJUSTMENT]=2,jn[r.Tool.FOCUS]=3,jn[r.Tool.OVERLAY]=4,jn),e}(),Hn=function(){function e(e){this.orderHelper=new Nn;var t=e.configStore.config.engine;this.engine=new s.LegacyEngineAdapter(r.__assign({},t,{assetProvider:e.configStore.assetProvider})),this.image=new Rn(e),this.output=new In(e),this.preview=new Bn(e),this.editor=e}return e.prototype.render=function(e){return this.engine.render(e)},e.prototype.previewSpaceToWorldSpace=function(e,t){var o=this.preview.previewTransformWithoutDpr;if(r.isNumber(e)){var n=this.editor.engine.convertPointFromPreviewIntoWorldSpace(r.Vector2.ZERO,o,t),i=this.editor.engine.convertPointFromPreviewIntoWorldSpace({x:e,y:0},o,t);return r.Vector2.distance(new r.Vector2(n),new r.Vector2(i))}return this.editor.engine.convertPointFromPreviewIntoWorldSpace(e,o,t)},e.prototype.worldSpaceToPreviewSpace=function(e){var t=this.preview.previewTransformWithoutDpr;if(r.isNumber(e)){var o=this.editor.engine.convertPointFromWorldIntoPreviewSpace(r.Vector2.ZERO,t),n=this.editor.engine.convertPointFromWorldIntoPreviewSpace({x:e,y:0},t);return r.Vector2.distance(new r.Vector2(o),new r.Vector2(n))}return this.editor.engine.convertPointFromWorldIntoPreviewSpace(e,t)},e.prototype.outputSpaceToWorldSpace=function(e){return r.isNumber(e)?s.ConversionUtils.getScalarInWorldSpace(e,this.editor.engine.getOutputContainer()):s.ConversionUtils.getPointInWorldSpace(e,this.editor.engine.getOutputContainer())},e.prototype.previewSpaceToOutputSpace=function(e){var t=this.preview.previewTransformWithoutDpr;if(r.isNumber(e)){var o=this.editor.engine.convertPointFromPreviewIntoOutputSpace(r.Vector2.ZERO,t),n=this.editor.engine.convertPointFromPreviewIntoOutputSpace({x:e,y:0},t);return r.Vector2.distance(new r.Vector2(o),new r.Vector2(n))}return this.editor.engine.convertPointFromPreviewIntoOutputSpace(e,t)},e.prototype.previewSpaceToFlippedPreviewSpace=function(e){return this.editor.engine.convertPointFromPreviewIntoFlippedPreviewSpace(e)},e}(),Vn=function(){function e(){this.snapshots=[],this.observeIndex=_e.box(-1)}return e.prototype.addSnapshot=function(e){this.index===this.snapshots.length-1?this.snapshots=this.snapshots.concat(JSON.stringify(e)):this.snapshots=r.__spread(this.snapshots.slice(0,this.index+1),[JSON.stringify(e)]),this.observeIndex.set(this.snapshots.length-1)},e.prototype.getCurrentState=function(){return this.snapshots[this.index]},e.prototype.reset=function(){this.snapshots=[],this.observeIndex.set(-1)},e.prototype.undo=function(){return this.canUndo?(this.observeIndex.set(this.index-1),JSON.parse(this.getCurrentState())):null},e.prototype.redo=function(){return this.canRedo?(this.observeIndex.set(this.index+1),JSON.parse(this.getCurrentState())):null},e.prototype.discardSnapshotsfromIndex=function(e){e>0&&e<this.snapshots.length-1&&(this.snapshots=this.snapshots.slice(0,e),this.observeIndex.set(this.snapshots.length-1))},Object.defineProperty(e.prototype,"index",{get:function(){return this.observeIndex.get()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canUndo",{get:function(){return this.index>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRedo",{get:function(){return this.snapshots.length-1>this.index},enumerable:!0,configurable:!0}),r.__decorate([Oe],e.prototype,"index",null),r.__decorate([Oe],e.prototype,"canUndo",null),r.__decorate([Oe],e.prototype,"canRedo",null),e}(),Wn=function(){function e(e){var t=this;this.localTransformStartIndex=null,this.undo=function(){var e=t.appHistoryManager.undo();t.applyState(e)},this.redo=function(){var e=t.appHistoryManager.redo();t.applyState(e)},this.editor=e,this.appHistoryManager=new Vn}return Object.defineProperty(e.prototype,"canUndo",{get:function(){return this.appHistoryManager.canUndo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRedo",{get:function(){return this.appHistoryManager.canRedo},enumerable:!0,configurable:!0}),e.prototype.getAppState=function(){var e,t=At(this.editor.adjustmentsToolStore.state),o=At(this.editor.filterToolStore.state),n=this.editor.focusToolStore.getFocusStateForHistory(),i=At(this.editor.overlayToolStore.state),a=At(this.editor.frameToolStore.state),s=this.editor.brushToolStore.strokes||{strokes:[]};return(e={})[r.Tool.ADJUSTMENT]=t,e[r.Tool.FILTER]=o,e[r.Tool.FOCUS]=n,e[r.Tool.OVERLAY]=i,e[r.Tool.FRAME]=a,e[r.Tool.BRUSH]=s,e[r.Tool.TRANSFORM]={resolution:this.editor.engineMediator.output.container.getResolution(),preview:this.editor.engineMediator.preview.container.getTransform(),output:this.editor.engineMediator.output.container.getTransform()},e.sprite={spriteIdList:[]},e},e.prototype.addInitialSnapshot=function(){var e=this.getAppState();this.appHistoryManager.addSnapshot({state:e,type:"add",description:"Initial State"})},e.prototype.addSnapshot=function(e,t,o){void 0===e&&(e=this.getAppState()),e&&(e.sprite&&(e=r.__assign({},this.getAppState(),e)),this.appHistoryManager.addSnapshot({state:e,type:t,description:o}),this.editor.configStore.events.onHistoryChange())},e.prototype.saveTransformLocalSnapshotIndex=function(){null===this.localTransformStartIndex&&(this.localTransformStartIndex=this.appHistoryManager.index)},e.prototype.removeTransformLocalSnapshots=function(){null!==this.localTransformStartIndex&&(this.appHistoryManager.discardSnapshotsfromIndex(this.localTransformStartIndex),this.localTransformStartIndex=null)},e.prototype.applyState=function(e){var t=e.state;e.type;return r.__awaiter(this,void 0,void 0,(function(){var e,o,n,i,a,s,l;return r.__generator(this,(function(c){switch(c.label){case 0:if(!t)return[3,21];n=Object.keys(t),c.label=1;case 1:c.trys.push([1,17,18,19]),i=r.__values(n),a=i.next(),c.label=2;case 2:if(a.done)return[3,16];switch(s=a.value,s){case r.Tool.FILTER:return[3,3];case r.Tool.ADJUSTMENT:return[3,5];case r.Tool.OVERLAY:return[3,6];case r.Tool.FRAME:return[3,8];case r.Tool.FOCUS:return[3,10];case r.Tool.BRUSH:return[3,11];case"sprite":return[3,12];case"localTransform":return[3,13];case r.Tool.TRANSFORM:return[3,14]}return[3,15];case 3:return[4,this.editor.filterToolStore.updateStateFromHistory(t[s])];case 4:return c.sent(),[3,15];case 5:return this.editor.adjustmentsToolStore.updateStateFromHistory(t[s]),[3,15];case 6:return[4,this.editor.overlayToolStore.updateStateFromHistory(t[s])];case 7:return c.sent(),[3,15];case 8:return[4,this.editor.frameToolStore.updateStateFromHistory(t[s])];case 9:return c.sent(),[3,15];case 10:return this.editor.focusToolStore.updateStateFromHistory(t[s],this.editor.canvasStore.sizeVector),[3,15];case 11:return this.editor.brushToolStore.updateStateFromHistory(t[s]),[3,15];case 12:return this.editor.spriteStore.updateStateFromHistory(t[s],this.editor.canvasStore.sizeVector),[3,15];case 13:return this.editor.transformToolStore.updateLocalStateFromHistory(t.localTransform),[3,15];case 14:return this.editor.transformToolStore.updateStateFromHistory(t[s]),[3,15];case 15:return a=i.next(),[3,2];case 16:return[3,19];case 17:return l=c.sent(),e={error:l},[3,19];case 18:try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(e)throw e.error}return[7];case 19:return[4,this.editor.renderPromise()];case 20:c.sent(),c.label=21;case 21:return[2]}}))}))},e.prototype.isDirty=function(){return this.appHistoryManager.snapshots.length>1},e.prototype.reset=function(){this.appHistoryManager.reset()},r.__decorate([xt],e.prototype,"undo",void 0),r.__decorate([xt],e.prototype,"redo",void 0),r.__decorate([Oe],e.prototype,"canUndo",null),r.__decorate([Oe],e.prototype,"canRedo",null),e}(),Gn={tool:null,isWebcam:!1,image:""},Un=function(){function e(e){var t=this;this.newImage=function(e){t.editor.init(e)},this.editor=e,this.state=_e(Gn)}return e.prototype.selectTool=function(e,t){switch(void 0===t&&(t=!1),e=this.state.tool===e&&t?null:e,this.editor.onToolChange(this.state.tool,e),this.state.tool=e,e){case r.Tool.TEXT:this.editor.spriteStore.textToolStore.addOrselect();break;case r.Tool.TEXT_DESIGN:this.editor.spriteStore.textDesignToolStore.addOrselect();break;case r.Tool.BRUSH:var o=this.editor.engineMediator.engine.getOutputDimensions(),n=Math.max(.05*Math.min(o.width,o.height),1);this.editor.brushToolStore.changeSize(n);break;case r.Tool.TRANSFORM:this.editor.transformToolStore.applyDefaultCrop(!0),this.editor.historyStore.saveTransformLocalSnapshotIndex()}},e.prototype.selectWebcam=function(e){this.state.isWebcam=e},e.prototype.setImage=function(e){this.state.image=e,this.isWebcam&&(this.state.isWebcam=!1)},Object.defineProperty(e.prototype,"webcamLabel",{get:function(){return this.editor.libraryStore.locale.controls.buttonWebcamClose},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tool",{get:function(){return this.state.tool},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isWebcam",{get:function(){return this.state.isWebcam},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"image",{get:function(){return this.state.image},enumerable:!0,configurable:!0}),e.prototype.isImageElement=function(e){return e instanceof HTMLImageElement},r.__decorate([xt],e.prototype,"selectTool",null),r.__decorate([xt],e.prototype,"selectWebcam",null),r.__decorate([xt],e.prototype,"setImage",null),r.__decorate([xt],e.prototype,"newImage",void 0),r.__decorate([Oe],e.prototype,"webcamLabel",null),r.__decorate([Oe],e.prototype,"tool",null),r.__decorate([Oe],e.prototype,"isWebcam",null),r.__decorate([Oe],e.prototype,"image",null),e}(),Xn={canvasSize:{height:0,width:0}},Yn=function(){function e(e){this.canvasClickDisabled=_e.box(!1),this.editor=e,this.state=_e(Xn)}return e.prototype.setCanvasElement=function(e){this.canvas=e,this.editor.engineMediator.preview.createPreview(e),this.updateCanvasDimensions(),this.editor.init(this.editor.configStore.config.image)},e.prototype.updateCanvasDimensions=function(){var e=this.editor.devicePixelRatio;this.canvas.width=this.canvasSize.width*e,this.canvas.height=this.canvasSize.height*e,this.canvas.style.width=this.canvasSize.width+"px",this.canvas.style.height=this.canvasSize.height+"px"},e.prototype.saveDimensions=function(e){var t=e.height,o=e.width,n=e.render,r=this.editor.configStore.isLayoutAdvanced?0:zn.basic.canvasOffset;this.state.canvasSize.height=t-r,this.state.canvasSize.width=o,n&&this.editor.resize()},e.prototype.disableCanvasClick=function(){this.canvasClickDisabled.set(!0)},e.prototype.enableCanvasClick=function(){this.canvasClickDisabled.set(!1)},Object.defineProperty(e.prototype,"isCanvasClickable",{get:function(){return!this.canvasClickDisabled.get()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvasSize",{get:function(){return this.state.canvasSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sizeVector",{get:function(){return r.Vector2.fromSize(this.state.canvasSize)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sizeVectorMagnitude",{get:function(){return this.sizeVector.magnitude},enumerable:!0,configurable:!0}),e.prototype.getContainersAtPreviewPoint=function(e){var t=this,o=this.editor.engine.getContainersAtPreviewPoint(e,this.editor.engineMediator.preview.previewTransformWithoutDpr).map((function(e){return e.getID()})).filter((function(e){return e!==t.editor.engineMediator.image.getImgageContainerId()}));this.editor.spriteStore.onCanvasClick(o)},r.__decorate([xt],e.prototype,"setCanvasElement",null),r.__decorate([xt],e.prototype,"updateCanvasDimensions",null),r.__decorate([xt],e.prototype,"saveDimensions",null),r.__decorate([xt],e.prototype,"disableCanvasClick",null),r.__decorate([xt],e.prototype,"enableCanvasClick",null),r.__decorate([Oe],e.prototype,"isCanvasClickable",null),r.__decorate([Oe],e.prototype,"canvasSize",null),r.__decorate([Oe],e.prototype,"sizeVector",null),r.__decorate([Oe],e.prototype,"sizeVectorMagnitude",null),e}(),Kn={type:null,modalIdentifier:null,show:!1},qn=function(){function e(e){var t=this;this.errorMessage="",this.showActionModal=function(e){var o=e.identifier,n=e.error,i=e.handlers;t.state.show=!0,t.state.modalIdentifier=o,t.handlers=r.__assign({},i||{},{close:t.hideModal}),t.errorMessage=n||""},this.hideModal=function(){t.state.show=!1,t.state.type=null},this.configStore=e.configStore,this.state=_e(Kn)}return e.prototype.showInfoModal=function(e){this.state.type=exports.ModalType.INFO,this.state.modalIdentifier=e,this.state.show=!0},e.prototype.showModalOfType=function(e){this.state.type=e,this.state.show=!0},Object.defineProperty(e.prototype,"infoModalProps",{get:function(){if(this.state.modalIdentifier){var e=this.configStore.locale.infoModals[this.state.modalIdentifier];return{show:this.state.show,heading:e?e.heading:"",body:e?e.body:""}}return{show:!1,heading:"",body:""}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modalProps",{get:function(){var e=this.getProps(exports.ModalType.WARNING)||this.getProps(exports.ModalType.ERROR);if(this.show&&e&&e.message){var t=e.type,o=e.message,n=this.errorMessage;return o.body=o.body?o.body.replace("${error}",n):"",{type:t,message:o,show:this.show,handlers:this.handlers}}return{show:Kn.show,handlers:this.handlers}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"show",{get:function(){return this.state.show},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.state.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.state.modalIdentifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positionOffset",{get:function(){var e=this.configStore.isLayoutAdvanced,t=zn.advanced.toolControlBar.width+zn.advanced.toolbar.width,o=zn.basic.canvasOffset;return e?{x:t/2,y:0}:{x:0,y:-o}},enumerable:!0,configurable:!0}),e.prototype.getProps=function(e){var t=this.state.modalIdentifier,o=this.configStore.locale;return e&&o[e+"Modals"].hasOwnProperty(t)?{type:e,message:o[e+"Modals"][t]}:null},r.__decorate([xt],e.prototype,"showActionModal",void 0),r.__decorate([xt],e.prototype,"showInfoModal",null),r.__decorate([xt],e.prototype,"showModalOfType",null),r.__decorate([Oe],e.prototype,"infoModalProps",null),r.__decorate([xt],e.prototype,"hideModal",void 0),r.__decorate([Oe],e.prototype,"modalProps",null),r.__decorate([Oe],e.prototype,"show",null),r.__decorate([Oe],e.prototype,"type",null),r.__decorate([Oe],e.prototype,"identifier",null),r.__decorate([Oe],e.prototype,"positionOffset",null),e}(),$n=zn.canvas.bar.height,Zn=function(){function e(e){var t=this;this.defaultScale=1,this.SCALE_LEVELS=[8.33,12.5,16.66,25,33.33,50,66.66,100,125,150,200,300,400,500,600].map((function(e){return e/100})),this.state={position:{x:0,y:0},scaleIndex:-1},this.offset={x:0,y:0},this.in=function(){t.canZoomIn&&(t.state.scaleIndex=t.state.scaleIndex+1,t.scaleRender())},this.out=function(){if(t.canZoomOut){t.state.scaleIndex=t.state.scaleIndex-1;var e=t.checkOffset({x:0,y:0}),o=e.canDragX,n=e.canDragY,r=e.maxOffsetX,i=e.maxOffsetY;n||(t.offset.y=i),o||(t.offset.x=r),t.savePosition(),t.scaleRender()}},this.setOffset=function(e){var o=t.checkOffset(e),n=o.canDragX,r=o.canDragY;n&&(t.offset.x=e.x),r&&(t.offset.y=e.y),t.scaleRender()},this.editor=e}return e.prototype.setInitialTransform=function(e){var t=this;void 0===e&&(e=0);var o=this.editor.engineMediator.preview.transform;St((function(){t.setDefaultScale(Math.abs(e||o.scale.x)),t.setPosition(o.position)}))},e.prototype.resetScale=function(){this.state.scaleIndex=-1},e.prototype.resetPosition=function(){var e=this.editor.canvasStore.canvas,t=e.width,o=e.height;this.setPosition({x:t/2,y:o/2})},e.prototype.resetOffset=function(){this.offset={x:0,y:0}},e.prototype.setPosition=function(e){this.state.position.x=e.x,this.state.position.y=e.y},e.prototype.savePosition=function(){this.setPosition(this.getPositionWithOffset()),this.offset={x:0,y:0}},e.prototype.setDefaultScale=function(e){var t=this;1!==this.defaultScale&&(-1!==(o=this.SCALE_LEVELS.findIndex((function(e){return e===t.defaultScale})))&&(this.SCALE_LEVELS=r.__spread(this.SCALE_LEVELS.slice(0,o),this.SCALE_LEVELS.slice(o+1))));e=parseFloat(e.toFixed(2));var o,n=this.SCALE_LEVELS.findIndex((function(o,n){return 0===n?e<o:n===t.SCALE_LEVELS.length-1?o<e:t.SCALE_LEVELS[n-1]<e&&e<o}));-1!==n?(this.SCALE_LEVELS=r.__spread(this.SCALE_LEVELS.slice(0,n),[e],this.SCALE_LEVELS.slice(n)),n===this.state.scaleIndex&&this.resetScale(),this.state.scaleIndex=n,this.defaultScale=e):((o=this.SCALE_LEVELS.findIndex((function(t){return t===e})))===this.state.scaleIndex&&this.resetScale(),-1!==o&&(this.state.scaleIndex=o,this.defaultScale=e))},e.prototype.setScaleToDefault=function(){this.state.scaleIndex=this.defaultIndex},e.prototype.checkOffset=function(e){var t=window.devicePixelRatio||1,o=this.scaledSize,n=this.previewSize,r=this.editor.engineMediator.preview.initialTransform.position,i=this.getPositionWithOffset(e),a=(o.width-n.width)*t/2,s=(o.height-n.height)*t/2,l=r.x-i.x,c=r.y-i.y,u=Math.abs(l)-a,d=Math.abs(c)-s;return{canDragX:u<0,canDragY:d<0,maxOffsetX:l>0?-u:u,maxOffsetY:c>0?-d:d}},e.prototype.calculateScale=function(e,t,o){void 0===e&&(e=0),void 0===t&&(t=this.previewSize),void 0===o&&(o=this.defaultScale);var n=t.width,i=t.height,a=new r.Vector2({x:n,y:i}),s=new r.Vector2(Math.abs(a.x*Math.cos(e))+Math.abs(a.y*Math.sin(e)),Math.abs(a.x*Math.sin(e))+Math.abs(a.y*Math.cos(e))),l=a.subtract(s).divide(2).multiply(o).abs;return l.y>l.x?2*l.y/a.y+o:2*l.x/a.x+o},Object.defineProperty(e.prototype,"defaultIndex",{get:function(){var e=this;return this.SCALE_LEVELS.findIndex((function(t){return t===e.defaultScale}))},enumerable:!0,configurable:!0}),e.prototype.getPositionWithOffset=function(e){void 0===e&&(e=this.offset);var t=this.position;return{x:t.x-e.x,y:t.y-e.y}},e.prototype.scaleRender=function(e){void 0===e&&(e=!1);var t=this.editor.scale.getPositionWithOffset(),o=e?this.defaultScale:this.scale,n={x:o,y:o};this.editor.engineMediator.preview.container.setScale(n),this.editor.engineMediator.preview.container.setPosition(t),this.editor.engineMediator.preview.savePreviewTransform({scale:n,position:t,rotation:0}),e||this.editor.render()},Object.defineProperty(e.prototype,"scale",{get:function(){var e=this.state.scaleIndex;return-1!==e?this.SCALE_LEVELS[e]:this.defaultScale},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomLevel",{get:function(){var e=window.devicePixelRatio||1;return(this.scale/e*100).toFixed(1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canDrag",{get:function(){return this.defaultScale<this.scale},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canZoomOut",{get:function(){return this.state.scaleIndex>this.defaultIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canZoomIn",{get:function(){return this.SCALE_LEVELS.length-1>this.state.scaleIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"doesTopOverlap",{get:function(){return this.position.y-this.scaledSize.height/2+20>$n},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"doesBottomOverlap",{get:function(){var e=this.position.y+this.scaledSize.height/2-20;return this.editor.canvasStore.canvasSize.height-e>$n},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.state.position},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaledSize",{get:function(){var e=this.state.scaleIndex,t=-1!==e?this.SCALE_LEVELS[e]:this.defaultScale,o=this.previewSize;return{width:o.width*t/this.defaultScale,height:o.height*t/this.defaultScale}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previewSize",{get:function(){return this.editor.getPreviewSize()},enumerable:!0,configurable:!0}),r.__decorate([_e],e.prototype,"state",void 0),r.__decorate([xt],e.prototype,"in",void 0),r.__decorate([xt],e.prototype,"out",void 0),r.__decorate([xt],e.prototype,"setInitialTransform",null),r.__decorate([xt],e.prototype,"resetScale",null),r.__decorate([xt],e.prototype,"resetPosition",null),r.__decorate([xt],e.prototype,"setPosition",null),r.__decorate([xt],e.prototype,"savePosition",null),r.__decorate([xt],e.prototype,"setDefaultScale",null),r.__decorate([xt],e.prototype,"setScaleToDefault",null),r.__decorate([Oe],e.prototype,"scale",null),r.__decorate([Oe],e.prototype,"zoomLevel",null),r.__decorate([Oe],e.prototype,"canDrag",null),r.__decorate([Oe],e.prototype,"canZoomOut",null),r.__decorate([Oe],e.prototype,"canZoomIn",null),r.__decorate([Oe],e.prototype,"doesTopOverlap",null),r.__decorate([Oe],e.prototype,"doesBottomOverlap",null),r.__decorate([Oe],e.prototype,"position",null),r.__decorate([Oe],e.prototype,"scaledSize",null),e}(),Jn=[[0,0],[0,1],[1,0],[1,1]],Qn=zn.canvas.sprite.rotateHandle.height,er=function(){function e(t,o,n){void 0===o&&(o="center"),void 0===n&&(n=!0),this.considerRotation=!0,this.store=t,this.m="center"===o?e.movePivotTo([.5,.5]):Jn,this.considerRotation=n}return e.floor=function(e){return Math.floor(e)},e.movePivotTo=function(e){return Jn.map((function(t){return[t[0]-e[0],t[1]-e[1]]}))},Object.defineProperty(e.prototype,"position",{get:function(){return this.store.position},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.store.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.considerRotation?this.store.rotationWRTOutputRotation:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftTop",{get:function(){var t=this.m[0][0]*this.size.width,o=this.m[0][1]*this.size.height,n=this.position;return e.coordinatesWithRotation({width:t,height:o},this.rotation,n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftBottom",{get:function(){var t=this.m[1][0]*this.size.width,o=this.m[1][1]*this.size.height,n=this.position;return e.coordinatesWithRotation({width:t,height:o},this.rotation,n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightTop",{get:function(){var t=this.m[2][0]*this.size.width,o=this.m[2][1]*this.size.height,n=this.position;return e.coordinatesWithRotation({width:t,height:o},this.rotation,n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightBottom",{get:function(){var t=this.m[3][0]*this.size.width,o=this.m[3][1]*this.size.height,n=this.position;return e.coordinatesWithRotation({width:t,height:o},this.rotation,n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftBottomHandle",{get:function(){var t=this.m[1][0]*this.size.width,o=this.m[1][1]*this.size.height+Qn,n=this.position;return e.coordinatesWithRotation({width:t,height:o},this.rotation,n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightBottomHandle",{get:function(){var t=this.m[3][0]*this.size.width,o=this.m[3][1]*this.size.height+Qn,n=this.position;return e.coordinatesWithRotation({width:t,height:o},this.rotation,n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftMid",{get:function(){var e=new r.Vector2(this.leftTop),t=new r.Vector2(this.leftBottom);return e.add(t).divide(2)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightMid",{get:function(){var e=new r.Vector2(this.rightTop),t=new r.Vector2(this.rightBottom);return e.add(t).divide(2)},enumerable:!0,configurable:!0}),e.coordinatesWithRotation=function(e,t,o){var n=e.width,i=e.height;return new r.Vector2({x:n*Math.cos(t)-i*Math.sin(t)+o.x,y:n*Math.sin(t)+i*Math.cos(t)+o.y}).floored},r.__decorate([Oe],e.prototype,"position",null),r.__decorate([Oe],e.prototype,"size",null),r.__decorate([Oe],e.prototype,"rotation",null),r.__decorate([Oe],e.prototype,"leftTop",null),r.__decorate([Oe],e.prototype,"leftBottom",null),r.__decorate([Oe],e.prototype,"rightTop",null),r.__decorate([Oe],e.prototype,"rightBottom",null),r.__decorate([Oe],e.prototype,"leftBottomHandle",null),r.__decorate([Oe],e.prototype,"rightBottomHandle",null),r.__decorate([Oe],e.prototype,"leftMid",null),r.__decorate([Oe],e.prototype,"rightMid",null),e}(),tr=function(){function e(){this.minCropSize=zn.canvas.crop.minSize,this.state=gn}return e.prototype.changeIdentifier=function(e){this.state.identifier=e,this.state.cropState.get(e)||this.state.cropState.set(e,r.__assign({},fn))},e.prototype.changeRatio=function(e){var t=this.state.cropState.get(this.identifier);t&&this.state.cropState.set(this.identifier,r.__assign({},t,{ratio:e}))},e.prototype.flipRatio=function(){var e=this.state.cropState.get(this.identifier);e&&this.state.cropState.set(this.identifier,r.__assign({},e,{isRatioFlipped:!e.isRatioFlipped}))},e.prototype.changeSize=function(e){var t=this.state.cropState.get(this.identifier);t&&(e.width&&(t.size.width=Math.floor(e.width)),e.height&&(t.size.height=Math.floor(e.height)),this.state.cropState.set(this.identifier,t))},e.prototype.changePositionX=function(e,t){var o=this.state.cropState.get(this.identifier);return!!(o&&e<=t-this.minCropSize&&e>=0)&&(o.position.x=Math.floor(e),this.state.cropState.set(this.identifier,o),!0)},e.prototype.changePositionY=function(e,t){var o=this.state.cropState.get(this.identifier);return!!(o&&e<=t-this.minCropSize&&e>=0)&&(o.position.y=Math.floor(e),this.state.cropState.set(this.identifier,o),!0)},e.prototype.changePosition=function(e,t){var o=this.state.cropState.get(this.identifier);return!!(o&&e.x<=t.width-this.minCropSize&&e.x>=0&&e.y<=t.height-this.minCropSize&&e.y>=0)&&(o.position.x=Math.floor(e.x),o.position.y=Math.floor(e.y),this.state.cropState.set(this.identifier,o),!0)},e.prototype.changeLockResolution=function(e){var t=this.state.cropState.get(this.identifier);t&&(t.lockResolution=void 0!==e?e:!t.lockResolution,this.state.cropState.set(this.identifier,t))},e.prototype.changeForceDimensions=function(e){var t=this.state.cropState.get(this.identifier);t&&(t.forceDimensions=e,this.state.cropState.set(this.identifier,t))},e.prototype.setRotation=function(e){this.state.rotationInDegrees=e},e.prototype.resetRotation=function(){this.state.rotationInDegrees=0},e.prototype.resetFlip=function(){this.state.flipHorizontally=!1,this.state.flipVertically=!1},e.prototype.updateFlip=function(e){var t=e.flipHorizontally,o=e.flipVertically;this.state.flipHorizontally=t,this.state.flipVertically=o},e.prototype.setOutputRotation=function(e){this.state.outputRotation=e},e.prototype.flipHorizontally=function(){this.state.flipHorizontally=!this.state.flipHorizontally},e.prototype.flipVertically=function(){this.state.flipVertically=!this.state.flipVertically},Object.defineProperty(e.prototype,"identifier",{get:function(){return this.state.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.selectedCrop?this.selectedCrop.size.height:fn.size.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.selectedCrop?this.selectedCrop.size.width:fn.size.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.selectedCrop?this.selectedCrop.position:fn.position},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ratio",{get:function(){return this.selectedCrop?this.selectedCrop.ratio:fn.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRatioFlipped",{get:function(){return this.selectedCrop?this.selectedCrop.isRatioFlipped:fn.isRatioFlipped},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.selectedCrop?this.selectedCrop.size:fn.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.selectedCrop?this.selectedCrop.position.x:fn.position.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.selectedCrop?this.selectedCrop.position.y:fn.position.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lockResolution",{get:function(){return this.selectedCrop?this.selectedCrop.lockResolution:fn.lockResolution},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forceDimensions",{get:function(){return this.selectedCrop?this.selectedCrop.forceDimensions:fn.forceDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedCrop",{get:function(){return this.state.cropState.get(this.identifier)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationInDegrees",{get:function(){return this.state.rotationInDegrees},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputRotation",{get:function(){return this.state.outputRotation},enumerable:!0,configurable:!0}),r.__decorate([_e],e.prototype,"state",void 0),r.__decorate([xt],e.prototype,"changeIdentifier",null),r.__decorate([xt],e.prototype,"changeRatio",null),r.__decorate([xt],e.prototype,"flipRatio",null),r.__decorate([xt],e.prototype,"changeSize",null),r.__decorate([xt],e.prototype,"changePositionX",null),r.__decorate([xt],e.prototype,"changePositionY",null),r.__decorate([xt],e.prototype,"changePosition",null),r.__decorate([xt],e.prototype,"changeLockResolution",null),r.__decorate([xt],e.prototype,"changeForceDimensions",null),r.__decorate([xt],e.prototype,"setRotation",null),r.__decorate([xt],e.prototype,"resetRotation",null),r.__decorate([xt],e.prototype,"resetFlip",null),r.__decorate([xt],e.prototype,"updateFlip",null),r.__decorate([xt],e.prototype,"setOutputRotation",null),r.__decorate([xt],e.prototype,"flipHorizontally",null),r.__decorate([xt],e.prototype,"flipVertically",null),r.__decorate([Oe],e.prototype,"identifier",null),r.__decorate([Oe],e.prototype,"height",null),r.__decorate([Oe],e.prototype,"width",null),r.__decorate([Oe],e.prototype,"position",null),r.__decorate([Oe],e.prototype,"ratio",null),r.__decorate([Oe],e.prototype,"isRatioFlipped",null),r.__decorate([Oe],e.prototype,"size",null),r.__decorate([Oe],e.prototype,"x",null),r.__decorate([Oe],e.prototype,"y",null),r.__decorate([Oe],e.prototype,"lockResolution",null),r.__decorate([Oe],e.prototype,"forceDimensions",null),r.__decorate([Oe],e.prototype,"selectedCrop",null),r.__decorate([Oe],e.prototype,"rotationInDegrees",null),r.__decorate([Oe],e.prototype,"outputRotation",null),e}(),or=function(){function e(e){this.transforms={output:JSON.stringify(r.RectTransform.IDENTITY),preview:JSON.stringify(r.RectTransform.IDENTITY)},this.editor=e}return e.rotateOutput=function(e,t){switch(e%=360){case 90:case-270:return t.swapped.multiply(-1,1);case 180:case-180:return t.multiply(-1);case 270:case-90:return t.swapped.multiply(1,-1);default:return t}},e.prototype.onLeave=function(){var t=this.editor.devicePixelRatio,o=this.transformToolStore.rotateFlipState,n=o.flipHorizontally,i=o.flipVertically,a=o.rotation,s=o.outputRotation,l=this.engineMediator.preview.container,c=this.editor.outputContainer;c.setResolution(At(this.transformToolStore.localOutputImageResolution)),c.setData({flipVertically:i,flipHorizontally:n});var u=l.getScale();this.saveTransforms();var d=1;if(this.transformToolStore.lockResolution){var p=this.transformToolStore.size,h=this.transformToolStore.defaultImageResolution,f=this.transformToolStore.defaultSize;d={height:p.height*h.height/f.height,width:p.width*h.width/f.width}.width/this.transformToolStore.localOutputImageResolution.width}var g=d/(Math.abs(u.x)/this.transformToolStore.defaultScale),m={x:g,y:g},y=-(a-s),b=this.editor.previewToOutput(new r.Vector2(this.engineMediator.preview.initialTransform.position).divide(t)),v=this.editor.previewToOutput(new r.Vector2(this.transformToolStore.leftTop).add(new r.Vector2(this.transformToolStore.rightBottom)).divide(2).add(new r.Vector2(this.transformToolStore.unRotatedDefaults.position))),_=new r.Vector2(b).multiply(d),x=e.rotateOutput(180*this.transformToolStore.outputRotation/Math.PI,new r.Vector2(v)).subtract(_),S=new r.Vector2(c.getPosition()).add(x);c.setTransform({scale:m,position:S,rotation:y}),this.editor.engineMediator.preview.updateTransform(0,!1),this.editor.scale.setInitialTransform(),this.editor.spriteStore.updateCanvasControls(),this.editor.focusToolStore.updateCanvasControls()},e.prototype.onEnter=function(){this.editor.scale.setScaleToDefault();var e=this.engineMediator.preview.container,t=this.editor.outputContainer,o=JSON.parse(this.transforms.preview);t.setResolution(At(this.transformToolStore.defaultImageResolution)),e.setTransform(o),t.setTransform(JSON.parse(this.transforms.output));var n=o.scale;this.editor.outputContainer.setData({flipVertically:!1,flipHorizontally:!1}),this.transformToolStore.transformStore.updateFlip({flipVertically:n.y<0,flipHorizontally:n.x<0}),this.engineMediator.preview.savePreviewTransform(o);var r=this.engineMediator.preview.calculateTransform().scale;this.editor.scale.setInitialTransform(r.x)},e.prototype.rotateOutputContainer=function(e){var t=this;void 0===e&&(e=!1),this.editor.outputContainer.rotate90(e),this.transformToolStore.transformStore.setOutputRotation(this.editor.outputContainer.getRotation());var o=this.transformToolStore.rotateFlipState.rotation;this.engineMediator.preview.updateTransform(o),St((function(){t.editor.scale.setInitialTransform();var e=t.getScaleWithFlip(o);t.engineMediator.preview.container.setScale(e),t.transformToolStore.setCropDefaults(!0),t.transformToolStore.updateCropbox()})),this.editor.render()},e.prototype.applyPreviewTransform=function(){var e=this.transformToolStore.rotateFlipState,t=e.rotation,o=e.flipHorizontally,n=e.flipVertically,r=this.editor.scale.getPositionWithOffset(),i=this.getScaleWithFlip(),a=t;o&&(a=Vo(a)),n&&(a=Vo(a));var s={position:r,rotation:a,scale:i};this.engineMediator.preview.savePreviewTransform(s),this.engineMediator.preview.container.setTransform(s)},e.prototype.getScaleWithFlip=function(e){void 0===e&&(e=this.transformToolStore.rotateFlipState.rotation);var t=this.transformToolStore.rotateFlipState,o=t.flipHorizontally?-1:1,n=t.flipVertically?-1:1,r=this.editor.scale.calculateScale(e);return{x:r*o,y:r*n}},e.prototype.saveTransforms=function(){var e=JSON.stringify(this.engineMediator.preview.container.getTransform()),t=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:e,output:t}},e.prototype.saveTransformsBasedOnFlip=function(){var e=this.engineMediator.preview.container.getTransform(),t=e.scale,o=this.editor.outputContainer.getData(),n=o.flipVertically,i=o.flipHorizontally,a=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:JSON.stringify(r.__assign({},e,{scale:{x:i?-t.x:t.x,y:n?-t.y:t.y}})),output:a}},Object.defineProperty(e.prototype,"engineMediator",{get:function(){return this.editor.engineMediator},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transformToolStore",{get:function(){return this.editor.transformToolStore},enumerable:!0,configurable:!0}),e}(),nr=zn.canvas.crop.minSize,rr=function(){function e(e){var t=this;this.unRotatedDefaults={position:{x:0,y:0},scale:1},this.defaultAngle=0,this.dragMode=_e.box(!1),this.defaultCrop={position:{x:0,y:0},size:{width:0,height:0},imageResolution:{width:0,height:0},scale:1},this.localOutputResolution={width:0,height:0},this.defaultIdentifier="imgly_transform_common_custom",this.flipRatio=function(){t.transformStore.flipRatio(),t.changeIdentifier(t.identifier,!0)},this.reset=function(){t.transformStore.resetRotation(),t.transformStore.resetFlip(),t.setDefaultAngle(0),0!==t.editor.outputContainer.getRotation()&&t.engineMediator.output.applyNewImageTransform(),t.engineMediator.preview.updateTransform(),t.editor.scale.setInitialTransform(),t.setCropDefaults(),t.applyInitialCrop(),t.editor.render()},this.changeLocalOutputResolution=function(e){t.localOutputResolution.height=Math.floor(e.height),t.localOutputResolution.width=Math.floor(e.width)},this.changeDefaultScale=function(e){t.defaultCrop.scale=e},this.changeLocalOutputHeight=function(e){t.localOutputResolution.height=Math.floor(e)},this.changeLocalOutputWidth=function(e){t.localOutputResolution.width=Math.floor(e)},this.changeLockResolution=function(){t.transformStore.changeLockResolution(),t.addSnapshot()},this.rotateClockwise=function(){t.rotateOutputContainer(!1)},this.rotateAntiClockwise=function(){t.rotateOutputContainer(!0)},this.flipHorizontally=function(){t.transformStore.flipHorizontally(),t.editor.spriteStore.reverseTextHorizontally(),t.transformRender(),t.addSnapshot()},this.flipVertically=function(){t.transformStore.flipVertically(),t.editor.spriteStore.reverseTextVertically(),t.transformRender(),t.addSnapshot()},this.applyDefaultCrop=function(e){void 0===e&&(e=!1),"identity"===t.identifier&&t.changeIdentifier(t.defaultIdentifier,e)},this.updateCropbox=function(){t.changeIdentifier(t.identifier,!0)},this.onLeftTop=function(e){var o=e.x,n=e.y,i=t.getRatio(),a={width:t.rightTop.x-o,height:t.leftBottom.y-n};if("*"===i)t.changeCropAndOutputSize(a),t.changePosition({x:o,y:n});else{var s=new r.Vector2(t.leftTop.x,t.leftTop.y),l=t.proportionalSize(i,a),c=new r.Vector2(o,n).subtract(s);t.changePosition(s.add(new r.Vector2(c.y*i,c.y)))&&t.changeCropAndOutputSize(l)}},this.onLeftBottom=function(e){var o=e.x,n=e.y,i=t.getRatio(),a={width:t.rightBottom.x-o,height:n-t.leftTop.y};if("*"===i)t.changeCropAndOutputSize(a),t.changePositionX(o);else{var s=new r.Vector2(t.leftBottom.x,t.leftBottom.y),l=t.proportionalSize(i,a),c=new r.Vector2(o,n),u=s.subtract(c),d=s.add(new r.Vector2(u.y*i,u.y));t.changePositionX(d.x)&&t.changeCropAndOutputSize(l)}},this.onRightTop=function(e){var o=e.x,n=e.y,i=t.getRatio(),a={width:o-t.leftTop.x,height:t.rightBottom.y-n};if("*"===i)t.changeCropAndOutputSize(a),t.changePositionY(n);else{var s=new r.Vector2(t.rightTop.x,t.rightTop.y),l=t.proportionalSize(i,a),c=new r.Vector2(o,n).subtract(s),u=s.add(new r.Vector2(c.y*i,c.y));if(t.changePositionY(u.y)){var d={x:t.leftTop.x+l.width,y:t.leftTop.y},p=t.defaultCrop.size;d.x<=p.width&&d.y>=0&&t.changeCropAndOutputSize(l)}}},this.onRightBottom=function(e){var o=e.x,n=e.y,r=t.getRatio(),i={width:o-t.leftBottom.x,height:n-t.rightTop.y};if("*"===r)t.changeCropAndOutputSize(i);else{var a=t.proportionalSize(r,i),s={x:t.leftTop.x+a.width,y:t.leftTop.y+a.height},l=t.defaultCrop.size;s.x<=l.width&&s.y<=l.height&&t.changeCropAndOutputSize(a)}},this.onBlurWidth=function(){var e=t.localOutputResolution.width||nr,o=t.entityManager.items.find((function(e){return e.identifier===t.identifier})),n=t.defaultCrop.imageResolution;if(o&&o.ratio){var r=Math.max(e>n.width?n.width:e,nr);t.changeLocalOutputWidth(r),"*"!==o.ratio&&t.changeLocalOutputHeight(r/o.ratio),t.updatePreviewSizeWRTImageResolution(),t.addSnapshot()}},this.onBlurHeight=function(){var e=t.localOutputResolution.height||nr,o=t.entityManager.items.find((function(e){return e.identifier===t.identifier})),n=t.defaultCrop.imageResolution;if(o&&o.ratio){var r=Math.max(e>n.height?n.height:e,nr);t.changeLocalOutputHeight(r),"*"!==o.ratio&&t.changeLocalOutputWidth(e*o.ratio),t.updatePreviewSizeWRTImageResolution(),t.addSnapshot()}},this.editor=e,this.transformStore=new tr,this.transformations=new or(e);var o=this.config,n=(o.enableRotation,o.enableFlip,r.__rest(o,["enableRotation","enableFlip"])),i=this.editor.assetProvider.getAssets("transform");this.entityManager=new Ro(i,r.__assign({},n,{categoryKey:"",itemKey:"thumbnailURI",flattenCategories:!1,locale:r.__assign({},this.locale.items,this.locale.categories),getAssetPath:this.editor.getAssetPath("transform")})),this.rect=new er(this.transformStore,"topLeft",!1),this.defaultIdentifier=this.entityManager.items[0].identifier}return e.inRadians=function(e){return e*Math.PI/180},e.prototype.changeIdentifier=function(e,t){void 0===t&&(t=!1),this.transformStore.changeIdentifier(e);var o=this.getCropMask(e,this.defaultCrop.imageResolution);o&&(this.transformStore.changeRatio(o.ratio),this.changeLocalOutputResolution(o),this.updatePreviewSizeWRTImageResolution(),void 0!==o.yChanged&&this.updatePositionWRTPreviewSize(o.yChanged),t&&this.addSnapshot())},e.prototype.setDragMode=function(e){this.dragMode.set(e)},e.prototype.getCropMask=function(e,t){var o=this.getTransform(e);if(o){if(!o.ratio){this.transformStore.changeForceDimensions(o.forceDimensions),this.transformStore.changeLockResolution(o.lockDimensions);var n=o.dimensions,i=n.x,a=n.y;return r.__assign({},this.placeCropMask(i/a,t),{ratio:null})}switch(o.ratio){case"*":return this.changePosition({x:0,y:0}),r.__assign({},t,{yChanged:void 0,ratio:"*"});default:var s=this.isRatioFlipped?1/o.ratio:o.ratio;return r.__assign({},this.placeCropMask(s,t),{ratio:o.ratio})}}return null},e.prototype.setCropDefaults=function(e){void 0===e&&(e=!1);var t=this.editor.outputContainer.getResolution();this.setDefaultImageResolution(t);var o=this.editor.getPreviewSize(),n=this.editor.engineMediator.preview.previewTransformWithoutDpr.position;this.setDefaultCropSize(o),this.setDefaultCropPosition({x:n.x-o.width/2,y:n.y-o.height/2}),this.changeDefaultScale(this.editor.scale.defaultScale),e||(this.unRotatedDefaults.position=this.defaultPosition,this.unRotatedDefaults.scale=this.defaultScale)},e.prototype.setDefaultImageResolution=function(e){this.defaultCrop.imageResolution=e,this.localOutputResolution=e},e.prototype.setDefaultCropSize=function(e){this.defaultCrop.size.height=e.height,this.defaultCrop.size.width=e.width},e.prototype.setDefaultCropPosition=function(e){this.defaultCrop.position.x=e.x,this.defaultCrop.position.y=e.y},e.prototype.placeCropMask=function(e,t){if(t.height*e>t.width)return{height:t.width/e,width:t.width,yChanged:!0};var o=t.height*e;return{height:t.height,width:o,yChanged:!1}},e.prototype.resetCrop=function(){this.state.cropState=_e.map({}),this.state.identifier="identity"},e.prototype.pureReset=function(){this.transformStore.resetRotation(),this.transformStore.resetFlip(),this.resetCrop()},e.prototype.changePosition=function(e){return this.transformStore.changePosition(e,this.defaultCrop.size)},e.prototype.changePositionX=function(e){return this.transformStore.changePositionX(e,this.defaultCrop.size.width)},e.prototype.changePositionY=function(e){return this.transformStore.changePositionY(e,this.defaultCrop.size.height)},e.prototype.changeCropAndOutputSize=function(e){this.transformStore.changeSize(e),this.lockResolution||(void 0!==e.height&&this.changeLocalOutputHeight(e.height*this.defaultCrop.imageResolution.height/this.defaultCrop.size.height),void 0!==e.width&&this.changeLocalOutputWidth(e.width*this.defaultCrop.imageResolution.width/this.defaultCrop.size.width))},e.prototype.transformRender=function(){this.transformations.applyPreviewTransform(),this.editor.render()},e.prototype.addSnapshot=function(e){if(void 0===e&&(e=""),"identity"!==this.state.identifier){var t=this.state,o=(t.cropState,r.__rest(t,["cropState"]));this.editor.addLocalTransformSnapshot(r.__assign({},o,this.cropState,{localOutputResolution:At(this.localOutputResolution),outputResolution:this.engineMediator.output.container.getResolution(),defaults:At(this.defaultCrop),preview:this.engineMediator.preview.container.getTransform(),output:this.engineMediator.output.container.getTransform()}),e)}},e.prototype.updateLocalStateFromHistory=function(e){this.editor.activeStore.tool===r.Tool.TRANSFORM&&(this.transformStore.changeLockResolution(e.lockResolution),this.transformStore.changeForceDimensions(e.forceDimensions),this.transformStore.changeIdentifier(e.identifier),this.transformStore.setRotation(e.rotationInDegrees),this.setDefaultAngle(e.rotationInDegrees),this.transformStore.setOutputRotation(e.outputRotation),this.transformStore.updateFlip(e),this.changeLocalOutputResolution(e.localOutputResolution),this.engineMediator.output.container.setRotation(e.outputRotation),this.setDefaultImageResolution(e.defaults.imageResolution),this.transformStore.changeSize(e.size),this.changePosition(e.position),this.setDefaultCropSize(e.defaults.size),this.setDefaultCropPosition(e.defaults.position),this.changeDefaultScale(e.defaults.scale),this.engineMediator.output.container.setResolution(e.outputResolution),this.engineMediator.output.container.setTransform(e.output),this.engineMediator.preview.container.setTransform(e.preview))},e.prototype.updateStateFromHistory=function(e){this.editor.activeStore.tool!==r.Tool.TRANSFORM&&(this.engineMediator.output.container.setTransform(e.output),this.engineMediator.preview.container.setTransform(e.preview),this.engineMediator.output.container.setResolution(e.resolution),this.changeLocalOutputResolution(e.resolution))},e.prototype.updateStateFromSerialization=function(e){this.editor.outputContainer.setData({flipHorizontally:e.flipHorizontally,flipVertically:e.flipVertically});var t=new r.Vector2(e.start),o=new r.Vector2(e.end),n=Math.abs(t.x-o.x),i=Math.abs(t.y-o.y);if(this.changePosition(t),this.transformStore.setRotation(e.rotation),this.transformStore.changeSize({width:n,height:i}),this.changeLocalOutputResolution({height:i*this.defaultCrop.imageResolution.height/this.defaultCrop.size.height,width:n*this.defaultCrop.imageResolution.width/this.defaultCrop.size.width}),e.outputRotation)switch(e.outputRotation){case 90:this.transformations.rotateOutputContainer();break;case 180:this.transformations.rotateOutputContainer(),this.transformations.rotateOutputContainer();break;case 270:this.transformations.rotateOutputContainer(!0)}},e.prototype.setDefaultAngle=function(e){this.defaultAngle=e},e.prototype.updateCanvasControls=function(e){var t=At(this.position),o=At(this.size),n=At(this.defaultCrop.size);this.changeCropAndOutputSize({height:n.height*o.height/e.height,width:n.width*o.width/e.width}),this.changePosition({y:n.height*t.y/e.height,x:n.width*t.x/e.width})},e.prototype.onLeave=function(){this.transformations.onLeave()},e.prototype.onEnter=function(){this.transformations.onEnter()},e.prototype.saveTransforms=function(){this.transformations.saveTransforms()},e.prototype.saveTransformsBasedOnFlip=function(){this.transformations.saveTransformsBasedOnFlip()},e.prototype.setRotation=function(e){this.transformStore.setRotation(e),this.transformRender()},e.prototype.rotateOutputContainer=function(e){return void 0===e&&(e=!1),r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.setDragMode(!0),this.transformations.rotateOutputContainer(e),[4,this.editor.wait()];case 1:return t.sent(),this.setDragMode(!1),[2]}}))}))},e.prototype.applyInitialCrop=function(){this.changeIdentifier(this.defaultIdentifier,!1)},e.prototype.clickableCanvas=function(e){this.editor.clickableCanvas(e)},e.prototype.proportionalSize=function(e,t,o){return void 0===o&&(o=this.defaultCrop.size),t.height*e>o.width?{height:t.width/e,width:t.width}:{height:t.height,width:t.height*e}},e.prototype.updatePositionWRTPreviewSize=function(e){var t=this.size,o=this.defaultCrop.size;e?this.changePosition({x:0,y:Math.abs(o.height-t.height)/2}):this.changePosition({x:Math.abs(o.width-t.width)/2,y:0})},e.prototype.updatePreviewSizeWRTImageResolution=function(){var e=zn.canvas.crop.minSize,t=At(this.localOutputResolution),o=At(this.defaultCrop.imageResolution),n=At(this.defaultCrop.size);this.transformStore.changeSize({height:Math.max(n.height,e)*t.height/o.height,width:Math.max(n.width,e)*t.width/o.width})},e.prototype.getScaleWithFlip=function(e){return void 0===e&&(e=this.rotateFlipState.rotation),this.transformations.getScaleWithFlip(e)},Object.defineProperty(e.prototype,"cropState",{get:function(){return this.transformStore.selectedCrop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.transformStore.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ratio",{get:function(){return this.transformStore.ratio},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRatioFlipped",{get:function(){return this.transformStore.isRatioFlipped},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.transformStore.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.transformStore.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localOutputImageResolution",{get:function(){return this.localOutputResolution},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localOutputHeight",{get:function(){return this.localOutputResolution.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localOutputWidth",{get:function(){return this.localOutputResolution.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lockResolution",{get:function(){return this.transformStore.lockResolution},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forceDimensions",{get:function(){return this.transformStore.forceDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationInDegrees",{get:function(){return this.transformStore.rotationInDegrees},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputRotation",{get:function(){return this.transformStore.outputRotation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDragMode",{get:function(){return this.dragMode.get()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotateFlipState",{get:function(){var t=this.transformStore.state,o=t.flipHorizontally,n=t.flipVertically,r=t.rotationInDegrees,i=t.outputRotation;return{flipHorizontally:o,flipVertically:n,rotation:e.inRadians(r),outputRotation:i}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categories",{get:function(){return this.entityManager.categories},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){var e=this;return this.entityManager.categories.reduce((function(t,o,n){var i=e.entityManager.isCategory(o)?o.items:[o];return r.__spread(t,i)}),[])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.editor.configStore.config[r.Tool.TRANSFORM]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get:function(){return this.editor.configStore.locale[r.Tool.TRANSFORM]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOptionSelected",{get:function(){return"identity"!==this.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftTop",{get:function(){return this.rect.leftTop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftBottom",{get:function(){return this.rect.leftBottom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightTop",{get:function(){return this.rect.rightTop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightBottom",{get:function(){return this.rect.rightBottom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transformStore.position},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.transformStore.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this.transformStore.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultImageResolution",{get:function(){return this.defaultCrop.imageResolution},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultSize",{get:function(){return this.defaultCrop.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultPosition",{get:function(){return this.defaultCrop.position},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultScale",{get:function(){return this.defaultCrop.scale},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"engineMediator",{get:function(){return this.editor.engineMediator},enumerable:!0,configurable:!0}),e.prototype.getRatio=function(){var e=this.getTransform(this.identifier);if(e){if(e.hasOwnProperty("ratio"))return this.lockResolution?this.localOutputWidth/this.localOutputHeight:e.ratio;var t=e.dimensions;return t.x/t.y}return"*"},e.prototype.getTransform=function(e){return this.entityManager.items.find((function(t){return t.identifier===e}))},r.__decorate([_e],e.prototype,"defaultCrop",void 0),r.__decorate([_e],e.prototype,"localOutputResolution",void 0),r.__decorate([xt],e.prototype,"changeIdentifier",null),r.__decorate([xt],e.prototype,"setDragMode",null),r.__decorate([xt],e.prototype,"setCropDefaults",null),r.__decorate([xt],e.prototype,"setDefaultImageResolution",null),r.__decorate([xt],e.prototype,"setDefaultCropSize",null),r.__decorate([xt],e.prototype,"setDefaultCropPosition",null),r.__decorate([xt],e.prototype,"flipRatio",void 0),r.__decorate([xt],e.prototype,"resetCrop",null),r.__decorate([xt],e.prototype,"pureReset",null),r.__decorate([xt],e.prototype,"reset",void 0),r.__decorate([xt],e.prototype,"changePosition",null),r.__decorate([xt],e.prototype,"changePositionX",null),r.__decorate([xt],e.prototype,"changePositionY",null),r.__decorate([xt],e.prototype,"changeCropAndOutputSize",null),r.__decorate([xt],e.prototype,"onLeave",null),r.__decorate([xt],e.prototype,"onEnter",null),r.__decorate([xt],e.prototype,"changeLocalOutputResolution",void 0),r.__decorate([xt],e.prototype,"changeDefaultScale",void 0),r.__decorate([xt],e.prototype,"changeLocalOutputHeight",void 0),r.__decorate([xt],e.prototype,"changeLocalOutputWidth",void 0),r.__decorate([xt],e.prototype,"changeLockResolution",void 0),r.__decorate([xt],e.prototype,"setRotation",null),r.__decorate([xt],e.prototype,"rotateClockwise",void 0),r.__decorate([xt],e.prototype,"rotateAntiClockwise",void 0),r.__decorate([xt],e.prototype,"rotateOutputContainer",null),r.__decorate([xt],e.prototype,"flipHorizontally",void 0),r.__decorate([xt],e.prototype,"flipVertically",void 0),r.__decorate([xt],e.prototype,"applyDefaultCrop",void 0),r.__decorate([xt],e.prototype,"applyInitialCrop",null),r.__decorate([xt],e.prototype,"updateCropbox",void 0),r.__decorate([xt],e.prototype,"clickableCanvas",null),r.__decorate([xt],e.prototype,"onLeftTop",void 0),r.__decorate([xt],e.prototype,"onLeftBottom",void 0),r.__decorate([xt],e.prototype,"onRightTop",void 0),r.__decorate([xt],e.prototype,"onRightBottom",void 0),r.__decorate([xt],e.prototype,"proportionalSize",null),r.__decorate([xt],e.prototype,"onBlurWidth",void 0),r.__decorate([xt],e.prototype,"onBlurHeight",void 0),r.__decorate([xt],e.prototype,"updatePositionWRTPreviewSize",null),r.__decorate([xt],e.prototype,"updatePreviewSizeWRTImageResolution",null),r.__decorate([Oe],e.prototype,"cropState",null),r.__decorate([Oe],e.prototype,"identifier",null),r.__decorate([Oe],e.prototype,"ratio",null),r.__decorate([Oe],e.prototype,"isRatioFlipped",null),r.__decorate([Oe],e.prototype,"height",null),r.__decorate([Oe],e.prototype,"width",null),r.__decorate([Oe],e.prototype,"localOutputImageResolution",null),r.__decorate([Oe],e.prototype,"localOutputHeight",null),r.__decorate([Oe],e.prototype,"localOutputWidth",null),r.__decorate([Oe],e.prototype,"lockResolution",null),r.__decorate([Oe],e.prototype,"forceDimensions",null),r.__decorate([Oe],e.prototype,"rotationInDegrees",null),r.__decorate([Oe],e.prototype,"outputRotation",null),r.__decorate([Oe],e.prototype,"isDragMode",null),r.__decorate([Oe],e.prototype,"rotateFlipState",null),r.__decorate([Oe],e.prototype,"categories",null),r.__decorate([Oe],e.prototype,"options",null),r.__decorate([Oe],e.prototype,"config",null),r.__decorate([Oe],e.prototype,"locale",null),r.__decorate([Oe],e.prototype,"isOptionSelected",null),r.__decorate([Oe],e.prototype,"leftTop",null),r.__decorate([Oe],e.prototype,"leftBottom",null),r.__decorate([Oe],e.prototype,"rightTop",null),r.__decorate([Oe],e.prototype,"rightBottom",null),r.__decorate([Oe],e.prototype,"position",null),r.__decorate([Oe],e.prototype,"size",null),r.__decorate([Oe],e.prototype,"state",null),r.__decorate([Oe],e.prototype,"defaultImageResolution",null),r.__decorate([Oe],e.prototype,"defaultSize",null),r.__decorate([Oe],e.prototype,"defaultPosition",null),r.__decorate([Oe],e.prototype,"defaultScale",null),e}(),ir=zn.canvas.sprite.minSize/Math.sqrt(2),ar=function(e){return{height:e.y,width:e.x}},sr={},lr={x:0,y:0},cr=function(){function e(e){var t=this;this.state=_e.map(sr),this.selectedId=_e.box("none"),this.editMode=_e.box(!1),this.dragMode=_e.box(!1),this.setEditMode=function(e){t.currentSprite&&-1!==[r.Tool.TEXT,r.Tool.TEXT_DESIGN].indexOf(t.tool)&&(e?t.editor.modalStore.showModalOfType(exports.ModalType.TEXT_EDIT):t.editor.modalStore.hideModal(),t.editMode.set(e))},this.onWidthDrag=function(e){var o=e.x,n=e.y,i=new r.Vector2(t.currentSprite.position),a=new r.Vector2(o,n).subtract(i).magnitude,s=t.editor.previewToWorld(2*a);s>ir&&(t.setContainerProperties(t.id,{width:s},!0),t.isSpriteText&&t.textToolStore.changeWidth(2*a))},this.onPaddingDrag=function(e){var o=e.x,n=e.y,i=new r.Vector2(t.currentSprite.position),a=new r.Vector2(o,n).subtract(i).floored.abs.x-t.defaultSize.width/2;a>=0&&t.setContainerProperties(t.id,{padding:t.editor.previewToWorld(a)},!0)},this.reverseTextHorizontally=function(){Object.values(t.container).forEach((function(e){"text"!==e.type&&"text-design"!==e.type||e.setFlipHorizontally(!e.getFlipHorizontally())}))},this.reverseTextVertically=function(){Object.values(t.container).forEach((function(e){"text"!==e.type&&"text-design"!==e.type||e.setFlipVertically(!e.getFlipVertically())}))},this.updatePositionAndSize=function(e,o){void 0===e&&(e=t.id),void 0===o&&(o=!1);var n=t.getSizePositionFromContainer(e),r=n.position,i=n.size,a=t.state.get(e);if(a){if(a.position.x=r.x,a.position.y=r.y,a.size.width=i.width,a.size.height=i.height,o){var s=t.container[e].getRotation();t.container[e].setRotation(s),a.rotation=t.container[e].getRotation()}t.state.set(e,a)}},this.getDefaultSize=function(e){void 0===e&&(e=t.id);var o=t.container[e];if(o){var n=o.getSizeInWorldSpace();return{width:Math.floor(t.editor.worldToPreview(n.width)),height:Math.floor(t.editor.worldToPreview(n.height))}}return{width:0,height:0}},this.editor=e,this.container={},this.stickerToolStore=new Qo(e),this.textToolStore=new nn(e),this.textDesignToolStore=new sn(e),this.rect=new er(this)}return e.magnitude=function(e,t){return new r.Vector2(e,t||e).magnitude},e.sizeMagnitude=function(e){return r.Vector2.fromSize(e).magnitude},e.prototype.addSticker=function(t,o){var n=this,i=t.spriteId,a=t.state,s=t.transform;void 0===o&&(o=!0),s=this.getTransform(s);var l=a.identifier,c=this.editor.orderHelper.addSprite(l);this.editor.engine.addStickerFromAssets(l,this.editor.engineMediator.image.container,c).then((function(t){i&&t.setData({id:i});var c=t.getID();n.container[c]=t,n.editor.orderHelper.renameSprite(l,c);var u,d=n.getDefaultSize(c);if(t.setPivot(.5,.5),s.scale)u=s.scale;else if(s.size)u={x:s.size.width/d.width,y:s.size.height/d.height};else{var p=.4*n.editor.shortestOutputSide,h=e.magnitude(p)/e.sizeMagnitude(t.getSizeInWorldSpace());u={x:h,y:h}}var f=n.editor.outputContainer.getData(),g=f.flipHorizontally,m=f.flipVertically;t.setFlipHorizontally(g),t.setFlipVertically(m),t.setTransform({position:s.position,scale:u,rotation:s.rotation}),void 0!==a.flipHorizontally&&t.setFlipHorizontally(a.flipHorizontally),n.setContainerProperties(c,r.__assign({},a));var y=t.getData();n.setInitialSpriteState(c,r.Tool.STICKER,d),n.stickerToolStore.setState(c,r.__assign({},y,{identifier:l})),n.editor.render(),o&&(n.selectedId.set(c),n.addSnapshot("add",n.stickerLocale.add))})).catch((function(e){console.error(e)}))},e.prototype.addText=function(e,t){var o=this,n=e.spriteId,i=e.state,a=e.transform;void 0===t&&(t=!0),a=this.getTransform(a);var s=this.editor.orderHelper.addSprite(i.identifier),l=this.editor.shortestOutputSide,c={fontIdentifier:i.identifier,text:i.text,width:i.width||.6*l,fontSize:i.fontSize||.1*l,lineHeight:i.lineHeight,alignment:i.alignment,textColor:i.textColor,backgroundColor:i.backgroundColor};i.backgroundColor===en.backgroundColor&&delete c.backgroundColor,this.editor.engine.addTextWithFontLoading(c,this.editor.engineMediator.image.container,s).then((function(e){n&&e.setData({id:n});var s=e.getID();o.container[s]=e,o.editor.orderHelper.renameSprite(i.identifier,o.id);var l=o.editor.outputContainer.getData(),c=l.flipHorizontally,u=l.flipVertically;e.setFlipHorizontally(c),e.setFlipVertically(u);var d=o.getDefaultSize(s);e.setPivot(.5,.5),e.setPosition(a.position),e.setRotation(a.rotation),o.setInitialSpriteState(s,r.Tool.TEXT,d);var p=e.getData();o.textToolStore.setState(s,r.__assign({},p,{backgroundColorId:i.backgroundColorId,textColorId:i.textColorId})),o.editor.render(),t&&(o.selectedId.set(s),o.addSnapshot("add",o.textLocale.add))})).catch((function(e){console.error(e)}))},e.prototype.addTextDesign=function(e,t){var o=this,n=e.spriteId,i=e.state,a=e.transform;void 0===t&&(t=!0),a=this.getTransform(a);var s=this.editor.orderHelper.addSprite(i.identifier),l=this.editor.shortestOutputSide,c={width:i.width||.6*l,text:i.text,color:i.color,inverted:i.isInverted,seed:i.seed,padding:i.padding};this.editor.engine.addTextDesignAsync(i.identifier,c,this.editor.engineMediator.image.container,s).then((function(e){n&&e.setData({id:n});var s=e.getID();o.container[s]=e,o.editor.orderHelper.renameSprite(i.identifier,o.id);var l=o.editor.outputContainer.getData(),c=l.flipHorizontally,u=l.flipVertically;e.setFlipHorizontally(c),e.setFlipVertically(u),e.setPivot(.5,.5),e.setPosition(a.position),e.setRotation(a.rotation);var d=o.getDefaultSize(s);o.setInitialSpriteState(s,r.Tool.TEXT_DESIGN,d);var p=e.getData();o.textDesignToolStore.setState(s,r.__assign({},p,{identifier:i.identifier,textColorId:i.textColorId})),o.editor.render(),t&&(o.selectedId.set(s),o.addSnapshot("add",o.textDesignLocale.add))})).catch((function(e){console.error(e)}))},e.prototype.spriteLocalTransform=function(){return{position:this.editor.previewToOutput(this.position),size:this.size,rotation:this.rotation}},e.prototype.clickableCanvas=function(e){this.editor.clickableCanvas(e)},e.prototype.setContainerProperties=function(e,t,o){void 0===o&&(o=!1),this.container[e].setData(t),o&&this.updatePositionAndSize(),this.editor.render()},e.prototype.setContainerPosition=function(e,t){this.container[e].setPosition(t)},e.prototype.pureRemoveSprite=function(e){return this.editor.engine.removeContainer(this.container[e]),-1===this.container[e].getIndexInParent()&&(delete this.container[e],this.state.delete(e),this.editor.orderHelper.removeSprite(e),!0)},e.prototype.removeSprite=function(e){this.pureRemoveSprite(e)&&(this.selectLast(),this.spriteSnapshot("delete"),this.editor.render())},e.prototype.addSnapshot=function(e,t){var o=this.getSpriteState(),n=this.editor.canvasStore.sizeVector,i=n.magnitude;Object.keys(o.common).forEach((function(e){o.common[e].position=new r.Vector2(o.common[e].position).divide(n),o.common[e].size=ar(r.Vector2.fromSize(o.common[e].size).divide(n))})),Object.keys(o[r.Tool.TEXT]).forEach((function(e){o[r.Tool.TEXT][e].width=o[r.Tool.TEXT][e].width/i})),Object.keys(o[r.Tool.TEXT_DESIGN]).forEach((function(e){o[r.Tool.TEXT_DESIGN][e].width=o[r.Tool.TEXT_DESIGN][e].width/i})),this.editor.addSnapshot({sprite:o},e,t)},e.prototype.spriteSnapshot=function(e){this.addSnapshot("edit",this.historyLocale[e])},e.prototype.updateStateFromHistory=function(e,t){var o=Object.keys(this.container),n=e.spriteIdList;if(n.length!==o.length){var i=o.filter((function(e){return-1===n.indexOf(e)})),a=n.filter((function(e){return-1===o.indexOf(e)}));if(i.length&&this.pureRemoveSprite(i[0]),a.length){var s=a[0],l=e.common?e.common[s]:void 0,c=e.sticker?e.sticker[s]:void 0,u=e.text?e.text[s]:void 0,d=e.textdesign?e.textdesign[s]:void 0;if(l){var p={spriteId:s,transform:{size:l.size?ar(r.Vector2.fromSize(l.size).multiply(t)):void 0,position:this.editor.previewToWorld(new r.Vector2(l.position).multiply(t)),rotation:l.rotation}};u?this.addNewText(p,u):d?this.addNewTextDesign(p,d):c&&this.addNewsticker(p,c)}}}else this.upateSpriteStateFromHistory(e,t)},e.prototype.addNewText=function(e,t){if(!this.textToolStore.doesTextAssetExist(t.identifier))throw new Error("Text identifier "+t.identifier+" doesn't exist");this.addText(r.__assign({},e,{state:t}),!1)},e.prototype.addNewTextDesign=function(e,t){if(!this.textDesignToolStore.doesTextDesignAssetExist(t.identifier))throw new Error("Text identifier "+t.identifier+" doesn't exist");this.addTextDesign(r.__assign({},e,{state:t}),!1)},e.prototype.addNewsticker=function(e,t){if(!this.stickerToolStore.doesStickerAssetExist(t.identifier))throw new Error("Text identifier "+t.identifier+" doesn't exist");this.addSticker(r.__assign({},e,{state:t}),!1)},e.prototype.upateSpriteStateFromHistory=function(t,o){var n=this,i=o.magnitude;Object.keys(this.container).forEach((function(a){var s=t.common?t.common[a]:void 0,l=t.sticker?t.sticker[a]:void 0,c=t.text?t.text[a]:void 0,u=t.textdesign?t.textdesign[a]:void 0,d=n.state.get(a);if(d&&s){n.state.set(a,d);var p=n.editor.previewToWorld(new r.Vector2(s.position).multiply(o));if(n.container[a].setPosition(p),n.container[a].setRotation(s.rotation),d.rotation=n.container[a].getRotation(),l){var h=e.sizeMagnitude(ar(r.Vector2.fromSize(s.size).multiply(o)))/e.sizeMagnitude(s.defaultSize);n.container[a].setScale({x:h,y:h}),n.stickerToolStore.updateStateFromHistory(a,l)}else c?n.textToolStore.updateStateFromHistory(a,r.__assign({},c,{width:c.width*i,fontIdentifier:c.identifier})):u&&n.textDesignToolStore.updateStateFromHistory(a,r.__assign({},u,{width:u.width*i,inverted:u.isInverted}));n.updatePositionAndSize(a),c&&n.setDefaultSize(a)}}))},e.prototype.getSpriteState=function(){var e,t=At(this.state),o=At(this.textToolStore.state),n=At(this.textDesignToolStore.state);return(e={common:t})[r.Tool.STICKER]=At(this.stickerToolStore.state),e[r.Tool.TEXT]=o,e[r.Tool.TEXT_DESIGN]=n,e.spriteIdList=Object.keys(this.container),e},e.prototype.updateStateFromSerialization=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var o,n,i=this;return r.__generator(this,(function(a){switch(a.label){case 0:if(!t||!t.length)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),o=t.map((function(e){return Jo(e.raster.data,!0)})),[4,Promise.all(o)];case 2:return n=a.sent(),this.stickerToolStore.addCustomStickerAsset(t.map((function(e,t){return{image:n[t].image,smallImage:n[t].smallImage,name:e.name,type:e.raster.type,id:e.identifier}}))),[3,4];case 3:return a.sent(),this.editor.modalStore.hideModal(),this.editor.modalStore.showActionModal({identifier:"stickerLoading"}),[3,4];case 4:return e.spriteIdList.forEach((function(t){var o=e.common?e.common[t]:void 0,n=e.sticker?e.sticker[t]:void 0,a=e.text?e.text[t]:void 0,s=e.textdesign?e.textdesign[t]:void 0;if(o){var l={spriteId:t,transform:{size:o.size,position:i.editor.previewToWorld(new r.Vector2(o.position)),rotation:o.rotation}};if(a){var c=i.editor.previewToWorld(a.width);i.addNewText(l,r.__assign({},a,{width:c}))}else if(s){c=i.editor.previewToWorld(s.width);i.addNewTextDesign(l,r.__assign({},s,{width:c}))}else n&&i.addNewsticker(l,n)}})),[2]}}))}))},e.prototype.updateCanvasControls=function(){var e=this;Object.keys(this.container).forEach((function(t){e.updatePositionAndSize(t,!0);var o=e.state.get(t);if(o)if(o.tool===r.Tool.TEXT){var n=e.getContainerProperties(t);e.textToolStore.changeSize(t,n),e.setDefaultSize(t)}else if(o.tool===r.Tool.TEXT_DESIGN){n=e.getContainerProperties(t);e.textToolStore.changeWidth(n.width)}}))},e.prototype.setDragMode=function(e){this.dragMode.set(e)},e.prototype.setPosition=function(e){var t=this.currentSprite,o=this.container[this.id];if(t&&o){o.setPosition(this.editor.previewToWorld(e));var n=this.getSizePositionFromContainer().position;t.position.x=n.x,t.position.y=n.y,this.state.set(this.id,t),this.editor.render()}},e.prototype.setSize=function(e){var t=this.currentSprite;t&&(t.size.width=e.width,t.size.height=e.height,this.state.set(this.id,t))},e.prototype.setDefaultSize=function(e){void 0===e&&(e=this.id);var t=this.state.get(e);if(t){var o=this.getDefaultSize(e);t.defaultSize.width=o.width,t.defaultSize.height=o.height,this.state.set(e,t)}},e.prototype.setRotation=function(e){var t=this.currentSprite;if(t){var o=this.editor.outputContainer.getData(),n=o.flipHorizontally,r=o.flipVertically,i=this.editor.outputContainer.getRotation(),a=Wo({rotation:e+i,flipHorizontally:n,flipVertically:r});this.container[this.id].setRotation(a),t.rotation=this.container[this.id].getRotation(),this.state.set(this.id,t),this.editor.render()}},e.prototype.onCanvasClick=function(e){this.isEditMode||this.selectHighestOrderSprite(e)},e.prototype.select=function(e){var t=this.state.get(e);t&&(this.editor.activeStore.tool!==t.tool&&this.editor.activeStore.selectTool(t.tool),this.selectedId.set(e))},e.prototype.selectLast=function(){var e=this.editor.orderHelper.getLastSpriteId();e&&this.select(e)},e.prototype.selectNext=function(){var e=this;if(this.currentSprite){var t=this.container[this.id].getIndexInParent();if(t){var o=Object.keys(this.container).find((function(o){return e.container[o].getIndexInParent()===t-1}));o&&this.select(o)}}},e.prototype.deselect=function(){this.selectedId.set("none")},e.prototype.bringToFront=function(e){var t=this.editor.orderHelper.bringToFront(e);this.container[e].setIndexInParent(t),this.spriteSnapshot("order"),this.editor.render()},e.prototype.flipHorizontally=function(e){var t=this.container[e];t.setFlipHorizontally(!t.getFlipHorizontally()),this.spriteSnapshot("flip"),this.editor.render()},e.prototype.pureReset=function(){var e=this;this.selectedId.set("none"),Array.from(this.state.keys()).map((function(t){e.pureRemoveSprite(t)})),this.stickerToolStore.pureReset(),this.textToolStore.pureReset(),this.textDesignToolStore.pureReset()},e.prototype.selectHighestOrderSprite=function(e){var t=this,o=this.editor.brushToolStore.containerId();if((e=e.filter((function(e){return e!==o}))).length<1)this.deselect();else{var n="",r=0;e.forEach((function(e){var o=t.container[e],i=o&&o.getIndexInParent()||0;i>=r&&(r=i,n=e)})),this.select(n)}},e.prototype.onCornerDrag=function(e){var t=e.x,o=e.y;if(this.currentSprite){var n=new r.Vector2(this.currentSprite.position),i=new r.Vector2(t,o),a=i.subtract(n).magnitude,s=2*a/this.defaultLength;if(a>ir)if(this.isSpriteSticker){var l=this.editor.engineMediator.preview.container.getScale(),c=this.editor.transformToolStore.defaultScale/l.x;if("keepAspect"===this.stickerToolStore.resizeMode)this.setScaleInContainer({x:s*c,y:s*c});else{var u=this.rotationWRTOutputRotation,d=this.defaultSize,p=d.width,h=d.height,f=i.subtract(n),g=Math.cos(u),m=Math.sin(u),y=Math.max(Math.abs(f.x*g*2+f.y*m*2),ir)*c,b=Math.max(Math.abs(f.x*-m*2+f.y*g*2),ir)*c;this.setScaleInContainer({x:y/p,y:b/h})}}else this.setFontSizeInContainer(s);this.editor.render()}},Object.defineProperty(e.prototype,"currentSprite",{get:function(){if(this.isSpriteSelected)return this.state.get(this.id)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this.textDesignToolStore.padding},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEditMode",{get:function(){return this.editMode.get()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDragMode",{get:function(){return this.dragMode.get()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.selectedId.get()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSpriteSelected",{get:function(){return"none"!==this.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){if(this.currentSprite)return this.currentSprite.position},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tool",{get:function(){if(this.currentSprite)return this.currentSprite.tool},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(this.currentSprite)return this.currentSprite.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){if(this.currentSprite)return this.currentSprite.rotation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationInQuadrant",{get:function(){var e=this.editor.outputContainer.getData(),t=e.flipHorizontally,o=e.flipVertically,n=this.editor.outputContainer.getRotation();if(this.currentSprite){var r=(180*Wo({rotation:this.rotation+n,flipHorizontally:t,flipVertically:o})/Math.PI+360)%360;return r>=0&&r<90?"q1":r>=90&&r<180?"q2":r>=180&&r<270?"q3":"q4"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationWRTOutputRotation",{get:function(){if(this.currentSprite){var e=this.editor.outputContainer.getData(),t=e.flipHorizontally,o=e.flipVertically,n=this.editor.outputContainer.getRotation();return Wo({rotation:this.currentSprite.rotation-n,flipHorizontally:t,flipVertically:o})}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flipHorizontal",{get:function(){if(this.currentSprite)return this.currentSprite.flipHorizontally},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultSize",{get:function(){if(this.currentSprite)return this.currentSprite.defaultSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultLength",{get:function(){if(this.currentSprite)return e.sizeMagnitude(this.currentSprite.defaultSize)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSpriteSticker",{get:function(){return this.tool===r.Tool.STICKER},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSpriteText",{get:function(){return this.tool===r.Tool.TEXT},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSpriteTextDesign",{get:function(){return this.tool===r.Tool.TEXT_DESIGN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spritePosition",{get:function(){if(this.currentSprite){var e=this.currentSprite.position,t=e.x,o=e.y,n=this.currentSprite.size,r=n.height,i=n.width;return{x:er.floor(t-i/2),y:er.floor(o-r/2)}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentRect",{get:function(){if(this.currentSprite)return this.rect},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftTopPosition",{get:function(){if(this.currentSprite)return this.rect.leftTop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftBottomPosition",{get:function(){if(this.currentSprite)return this.rect.leftBottom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftMidPosition",{get:function(){if(this.currentSprite)return this.rect.leftMid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftMidPadPosition",{get:function(){if(this.currentSprite){var e=this.rect.leftMid;return{x:e.x-this.padding,y:e.y}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightTopPosition",{get:function(){if(this.currentSprite)return this.rect.rightTop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightBottomPosition",{get:function(){if(this.currentSprite)return this.rect.rightBottom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightMidPosition",{get:function(){if(this.currentSprite)return this.rect.rightMid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightMidPadPosition",{get:function(){if(this.currentSprite){var e=this.rect.rightMid;return{x:e.x+this.padding,y:e.y}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftBottomHandlePosition",{get:function(){if(this.currentSprite)return this.rect.leftBottomHandle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightBottomHandlePosition",{get:function(){if(this.currentSprite)return this.rect.rightBottomHandle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"historyLocale",{get:function(){return this.isSpriteSticker?this.stickerLocale:this.isSpriteText?this.textDesignLocale:this.textLocale},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stickerLocale",{get:function(){return this.editor.configStore.locale[r.Tool.STICKER].history},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textLocale",{get:function(){return this.editor.configStore.locale[r.Tool.TEXT].history},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textDesignLocale",{get:function(){return this.editor.configStore.locale[r.Tool.TEXT_DESIGN].history},enumerable:!0,configurable:!0}),e.prototype.getOutputProperties=function(){return this.editor.outputContainer.getData()},e.prototype.getContainerProperties=function(e){return this.container[e].getData()},e.prototype.getContainerTransform=function(e){return this.container[e].getTransform()},e.prototype.getDuplicateContainerTransform=function(e){var t=this.container[e].getTransform(),o=.1*this.editor.shortestOutputSide,n=new r.Vector2(t.position).add(new r.Vector2(o,o));return r.__assign({},t,{position:n})},e.prototype.getDuplicateContainerFlip=function(e){return this.container[e].getFlipHorizontally()},e.prototype.getTransform=function(e){var t=this.editor.outputToWorld(lr);return e?r.__assign({position:t},e):{rotation:this.editor.outputContainer.getRotation(),position:t}},e.prototype.setInitialSpriteState=function(e,t,o){void 0===o&&(o={height:0,width:0});var n=this.container[e],r=this.getSizePositionFromContainer(e),i=r.position,a=r.size,s=n.getRotation();this.state.set(e,{tool:t,position:i,rotation:s,size:a,defaultSize:o,flipHorizontally:!1})},e.prototype.setScaleInContainer=function(e){this.container[this.id].setScale(e);var t=this.currentSprite;if(t){var o=this.getSizePositionFromContainer().size;t.size=o,this.state.set(this.id,t)}},e.prototype.setFontSizeInContainer=function(e){var t=this.currentSprite,o=this.textToolStore.currentText,n=this.textDesignToolStore.currentTextDesign;if(t)if(o){var i={fontSize:Math.floor(this.textToolStore.defaultFontSize*e)},a={width:this.editor.previewToWorld(this.defaultSize.width*e)},s=this.isSpriteText?r.__assign({},a,i):a;if(a.width>ir&&i.fontSize){this.setContainerProperties(this.id,s,!0);var l=this.getContainerProperties(this.id),c=l.fontSize,u=l.width;this.textToolStore.changeFontSize(c,!0),this.textToolStore.changeWidth(this.editor.previewToWorld(u))}}else if(n){if((u=this.editor.previewToWorld(this.defaultSize.width*e))>ir){this.setContainerProperties(this.id,{width:u},!0);var d=this.getContainerProperties(this.id).width;this.textDesignToolStore.changeWidth(this.editor.previewToWorld(d))}}},e.prototype.getSizePositionFromContainer=function(e){void 0===e&&(e=this.id);var t=this.container[e];if(t){var o=this.editor.worldToPreview(t.getPosition()),n=t.getSizeInWorldSpace();return{position:o,size:{width:Math.floor(this.editor.worldToPreview(n.width)),height:Math.floor(this.editor.worldToPreview(n.height))}}}return{position:{x:0,y:0},size:{height:1,width:1}}},r.__decorate([xt],e.prototype,"addSticker",null),r.__decorate([xt],e.prototype,"addText",null),r.__decorate([xt],e.prototype,"addTextDesign",null),r.__decorate([xt],e.prototype,"clickableCanvas",null),r.__decorate([xt],e.prototype,"setContainerProperties",null),r.__decorate([xt],e.prototype,"setContainerPosition",null),r.__decorate([xt],e.prototype,"pureRemoveSprite",null),r.__decorate([xt],e.prototype,"removeSprite",null),r.__decorate([xt],e.prototype,"addSnapshot",null),r.__decorate([xt],e.prototype,"updateStateFromHistory",null),r.__decorate([xt],e.prototype,"addNewText",null),r.__decorate([xt],e.prototype,"addNewTextDesign",null),r.__decorate([xt],e.prototype,"addNewsticker",null),r.__decorate([xt],e.prototype,"upateSpriteStateFromHistory",null),r.__decorate([xt],e.prototype,"updateStateFromSerialization",null),r.__decorate([xt],e.prototype,"updateCanvasControls",null),r.__decorate([xt],e.prototype,"setEditMode",void 0),r.__decorate([xt],e.prototype,"setDragMode",null),r.__decorate([xt],e.prototype,"setPosition",null),r.__decorate([xt],e.prototype,"setSize",null),r.__decorate([xt],e.prototype,"setDefaultSize",null),r.__decorate([xt],e.prototype,"setRotation",null),r.__decorate([xt],e.prototype,"onCanvasClick",null),r.__decorate([xt],e.prototype,"select",null),r.__decorate([xt],e.prototype,"selectLast",null),r.__decorate([xt],e.prototype,"selectNext",null),r.__decorate([xt],e.prototype,"deselect",null),r.__decorate([xt],e.prototype,"bringToFront",null),r.__decorate([xt],e.prototype,"flipHorizontally",null),r.__decorate([xt],e.prototype,"pureReset",null),r.__decorate([xt],e.prototype,"onCornerDrag",null),r.__decorate([xt],e.prototype,"onWidthDrag",void 0),r.__decorate([xt],e.prototype,"onPaddingDrag",void 0),r.__decorate([xt],e.prototype,"reverseTextHorizontally",void 0),r.__decorate([xt],e.prototype,"reverseTextVertically",void 0),r.__decorate([Oe],e.prototype,"currentSprite",null),r.__decorate([Oe],e.prototype,"padding",null),r.__decorate([Oe],e.prototype,"isEditMode",null),r.__decorate([Oe],e.prototype,"isDragMode",null),r.__decorate([Oe],e.prototype,"id",null),r.__decorate([Oe],e.prototype,"isSpriteSelected",null),r.__decorate([Oe],e.prototype,"position",null),r.__decorate([Oe],e.prototype,"tool",null),r.__decorate([Oe],e.prototype,"size",null),r.__decorate([Oe],e.prototype,"rotation",null),r.__decorate([Oe],e.prototype,"rotationInQuadrant",null),r.__decorate([Oe],e.prototype,"rotationWRTOutputRotation",null),r.__decorate([Oe],e.prototype,"flipHorizontal",null),r.__decorate([Oe],e.prototype,"defaultSize",null),r.__decorate([Oe],e.prototype,"defaultLength",null),r.__decorate([Oe],e.prototype,"isSpriteSticker",null),r.__decorate([Oe],e.prototype,"isSpriteText",null),r.__decorate([Oe],e.prototype,"isSpriteTextDesign",null),r.__decorate([Oe],e.prototype,"spritePosition",null),r.__decorate([Oe],e.prototype,"currentRect",null),r.__decorate([Oe],e.prototype,"leftTopPosition",null),r.__decorate([Oe],e.prototype,"leftBottomPosition",null),r.__decorate([Oe],e.prototype,"leftMidPosition",null),r.__decorate([Oe],e.prototype,"leftMidPadPosition",null),r.__decorate([Oe],e.prototype,"rightTopPosition",null),r.__decorate([Oe],e.prototype,"rightBottomPosition",null),r.__decorate([Oe],e.prototype,"rightMidPosition",null),r.__decorate([Oe],e.prototype,"rightMidPadPosition",null),r.__decorate([Oe],e.prototype,"leftBottomHandlePosition",null),r.__decorate([Oe],e.prototype,"rightBottomHandlePosition",null),r.__decorate([Oe],e.prototype,"historyLocale",null),r.__decorate([Oe],e.prototype,"stickerLocale",null),r.__decorate([Oe],e.prototype,"textLocale",null),r.__decorate([Oe],e.prototype,"textDesignLocale",null),e}(),ur={options:[],query:""},dr=function(){function e(e){var t=this;this.initProvider=function(e){e&&(t.libraryProvider=new e)},this.addOptionsToSelectedCategory=function(e,t,o){var n=e.findIndex((function(e){return e.identifier===t}));return-1!==n?r.__spread(e.slice(0,n+1),o,e.slice(n+1)):e},this.configStore=e.configStore,this.state=_e(ur),this.selectedCategory=""}return e.prototype.saveScrollbar=function(e){this.scrollbar=e},e.prototype.recalculateScrollContainer=function(){var e=this;setTimeout((function(){return e.scrollbar.recalculate()}),0)},e.prototype.fetchImages=function(e){return void 0===e&&(e=""),r.__awaiter(this,void 0,void 0,(function(){var t,o,n,i,a,s=this;return r.__generator(this,(function(l){switch(l.label){case 0:return this.libraryProvider?(t=[this.libraryProvider.getCategories(),this.libraryProvider.searchImages(e)],[4,Promise.all(t)]):[3,2];case 1:o=r.__read.apply(void 0,[l.sent(),2]),n=o[0],i=o[1],a=n.map((function(e){var t=i.filter((function(t){return t.category===e.name}));return{identifier:e.name,defaultName:e.name,coverImage:e.coverImageUrl,options:t.map((function(e,t){return{defaultName:"image"+t,identifier:e.thumbUrl,coverImage:e.thumbUrl,rawUrl:e.rawUrl}}))}})).filter((function(e){return e.options.length})),St((function(){s.state.query=e,s.state.options=a})),l.label=2;case 2:return[2]}}))}))},e.prototype.toggleCategorySelection=function(e){this.selectedCategory=this.selectedCategory!==e?e:""},Object.defineProperty(e.prototype,"selectedCategoryIdentifier",{get:function(){return this.selectedCategory},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"images",{get:function(){return this.state.options.map((function(e){return e.options})).reduce((function(e,t){return r.__spread(e,t)}),[])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"query",{get:function(){return this.state.query},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.configStore.config[r.Tool.LIBRARY]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get:function(){return this.configStore.locale[r.Tool.LIBRARY]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categories",{get:function(){return this.state.options.map((function(e,t){return{type:exports.CardType.LARGE,identifier:e.defaultName,defaultName:e.defaultName,coverImage:e.coverImage,delay:.08*t}}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){var e=this.selectedCategory,t=this.state.options.findIndex((function(t){return t.defaultName===e}));return-1!==t?this.state.options[t].options.map((function(e,t){return r.__assign({type:exports.CardType.MEDIUM,delay:.08*t},e)})):[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categoriesAndOptions",{get:function(){return this.addOptionsToSelectedCategory(this.categories,this.selectedCategory,this.options)},enumerable:!0,configurable:!0}),e.prototype.getRawUrl=function(e){var t=this.images.findIndex((function(t){return t.identifier===e}));return-1!==t?this.images[t].rawUrl:e},r.__decorate([_e],e.prototype,"selectedCategory",void 0),r.__decorate([xt],e.prototype,"saveScrollbar",null),r.__decorate([xt],e.prototype,"recalculateScrollContainer",null),r.__decorate([xt],e.prototype,"initProvider",void 0),r.__decorate([xt],e.prototype,"fetchImages",null),r.__decorate([xt],e.prototype,"toggleCategorySelection",null),r.__decorate([Oe],e.prototype,"selectedCategoryIdentifier",null),r.__decorate([Oe],e.prototype,"images",null),r.__decorate([Oe],e.prototype,"query",null),r.__decorate([Oe],e.prototype,"config",null),r.__decorate([Oe],e.prototype,"locale",null),r.__decorate([Oe],e.prototype,"categories",null),r.__decorate([Oe],e.prototype,"options",null),r.__decorate([Oe],e.prototype,"categoriesAndOptions",null),e}();!function(e){e.LEADING="leading",e.CENTER="center",e.TRAILING="trailing"}(An||(An={}));var pr={horizontalGuides:[],verticalGuides:[],rotationGuides:[]},hr=function(){function e(e){var t=this;this.previewTopLeftPosition={x:0,y:0},this.getGuideValue=function(e,o){var n=t.editor.getPreviewSize(),r=n.height,i=n.width,a=t.configStore.config.snapping.position,s=a.snapToLeft,l=a.snapToRight,c=a.snapToTop,u=a.snapToBottom,d=Math.min(r,i),p=0;return"bottom"===o?p=Math.round(r-d*u):"top"===o?p=Math.round(d*c):"right"===o?p=Math.round(i-d*l):"left"===o?p=Math.round(d*s):"vertical"===e&&"center"===o?p=Math.round(i/2):"horizontal"===e&&"center"===o&&(p=Math.round(r/2)),p},this.getVerticalGuidesFromConfig=function(){var e=t.configStore.config.snapping.position,o=e.snapToVerticalCenter,n=e.snapToLeft,r=e.snapToRight,i=[];return o&&i.push({value:t.getGuideValue("vertical","center"),edge:An.CENTER,isVisible:!1,direction:"vertical"}),n&&i.push({value:t.getGuideValue("vertical","left"),edge:An.LEADING,isVisible:!1,direction:"vertical"}),r&&i.push({value:t.getGuideValue("vertical","right"),edge:An.TRAILING,isVisible:!1,direction:"vertical"}),i},this.getHorizontalGuidesFromConfig=function(){var e=t.configStore.config.snapping.position,o=e.snapToHorizontalCenter,n=e.snapToTop,r=e.snapToBottom,i=[];return o&&i.push({value:t.getGuideValue("horizontal","center"),edge:An.CENTER,isVisible:!1,direction:"horizontal"}),n&&i.push({value:t.getGuideValue("horizontal","top"),edge:An.LEADING,isVisible:!1,direction:"horizontal"}),r&&i.push({value:t.getGuideValue("horizontal","bottom"),edge:An.TRAILING,isVisible:!1,direction:"horizontal"}),i},this.getRotationGuidesFromConfig=function(){var e=t.configStore.config.snapping.rotation.angles,o=[];return e.forEach((function(e){o.push(e),o.push(e+360),o.push(e-360)})),o.filter((function(e,t){return o.indexOf(e)===t})).map((function(e){return{value:e*Math.PI/180,edge:An.CENTER,isVisible:!1,position:{x:0,y:0}}}))},this.getSpriteDimensions=function(e){var t=e.leftTop,o=e.leftBottom,n=e.rightTop,r=e.rightBottom,i=Math.min(t.y,n.y,o.y,r.y),a=Math.max(t.y,n.y,o.y,r.y),s=Math.min(t.x,n.x,o.x,r.x),l=Math.max(t.x,n.x,o.x,r.x);return{height:Math.round(a-i),width:Math.round(l-s)}},this.mapRange=function(e){var t=e.value,o=e.fromMin,n=e.fromLength,r=e.toMin;return(t-o)*e.toLength/n+r},this.updateGuides=function(){t.state.horizontalGuides=t.getHorizontalGuidesFromConfig(),t.state.verticalGuides=t.getVerticalGuidesFromConfig()},this.mapToSnapSystem=function(e,o,n,r){if(0===o.length)return e;if(o[0]>e)return e-n;for(var i=0;i<o.length-1;i++){var a=o[i],s=o[i+1],l=a+n,c=s-n,u=0;r&&(l+=u=i*n*2,c+=u+2*n);if(a<=e&&e<=s)return e<=a+1e-5?a+u:e>=s-1e-5?s+u+(r?2*n:0):t.mapRange({value:e,fromMin:a,fromLength:s-a,toMin:l,toLength:c-l})}return r?e+(o.length-1)*n*2+n:e},this.mapFromSnapSystem=function(e,o,n,r){if(0===o.length)return e;if(o[0]>e)return e>=o[0]-n?o[0]:e+n;for(var i=e,a=0;a<o.length-1;a++){var s=o[a],l=o[a+1],c=s+n,u=l-n,d=l;if(r&&(u+=2*n,d+=2*n,i=e-a*n*2),s<=i&&i<=d)return c<=i&&i<=u?t.mapRange({value:i,fromMin:c,fromLength:u-c,toMin:s,toLength:l-s}):i<c?s:l}i-=3*n;var p=o[o.length-1];return i<=p?p:i},this.centerSnapValue=function(e,t){var o=.5*t,n=e.value,r=e.edge,i=n;return r===An.LEADING?i+=o:r===An.TRAILING&&(i-=o),i},this.mapSnappingGuidesToCenter=function(e,o){var n=[];return e.forEach((function(e){n.push(t.centerSnapValue(e,o))})),n},this.calcSnapThresholdInRadians=function(e,t){return 0===e?0:t/e},this.calculatePreviewTopLeftPosition=function(){var e=t.editor.engineMediator.preview.container.getPosition(),o=t.editor.getPreviewSize(),n=t.editor.devicePixelRatio;t.previewTopLeftPosition={x:e.x/n-o.width/2,y:e.y/n-o.height/2}},this.snapToRotation=function(e,o,n){var i=t.state.rotationGuides,a=t.configStore.config.snapping.rotation,s=a.enabled,l=a.threshold,c=t.previewTopLeftPosition,u=c.x,d=c.y,p=t.editor.getPreviewSize().width,h=(e+2*Math.PI)%(2*Math.PI);if(s){var f=new r.Vector2(o).magnitude,g=i.map((function(e){return e.value})).sort((function(e,t){return e-t})),m=t.calcSnapThresholdInRadians(f,l);if(!t.rotationOffset){var y=t.mapToSnapSystem(e,g,m,!1);t.rotationOffset=y-h}h=t.mapFromSnapSystem(h+t.rotationOffset,g,m,!1);var b={x:n.position.x-u-p,y:n.position.y-d};return i.forEach((function(e){e.isVisible=e.value===h,e.position=b})),h}return e},this.snapToPosition=function(e,o){var n=t.state,i=n.horizontalGuides,a=n.verticalGuides,s=t.configStore.config.snapping.position,l=s.enabled,c=s.threshold,u=new r.Vector2(t.previewTopLeftPosition),d=t.getSpriteDimensions(o),p=d.height,h=d.width,f=new r.Vector2(e).subtract(u),g=f.x,m=f.y;if(l){var y=t.mapSnappingGuidesToCenter(i,p).sort((function(e,t){return e-t})),b=t.mapSnappingGuidesToCenter(a,h).sort((function(e,t){return e-t}));if(!t.positionOffset){var v=t.mapToSnapSystem(g,b,c,!0),_=t.mapToSnapSystem(m,y,c,!0);t.positionOffset=new r.Vector2(v,_).subtract(new r.Vector2(g,m))}var x=t.mapFromSnapSystem(g+t.positionOffset.x,b,c,!0),S=t.mapFromSnapSystem(m+t.positionOffset.y,y,c,!0);return x=Math.round(x),S=Math.round(S),i.forEach((function(e){var o=Math.round(t.centerSnapValue(e,p));e.isVisible=o===S})),a.forEach((function(e){var o=Math.round(t.centerSnapValue(e,h));e.isVisible=o===x})),new r.Vector2(x,S).add(u)}return{x:g,y:m}},this.editor=e,this.configStore=e.configStore,this.state=_e(pr),this.rotationOffset=null,this.positionOffset=null,this.state.horizontalGuides=this.getHorizontalGuidesFromConfig(),this.state.verticalGuides=this.getVerticalGuidesFromConfig(),this.state.rotationGuides=this.getRotationGuidesFromConfig()}return e.prototype.hidePositionGuides=function(){this.positionOffset=null,this.state.verticalGuides=this.state.verticalGuides.map((function(e){return r.__assign({},e,{isVisible:!1})})),this.state.horizontalGuides=this.state.horizontalGuides.map((function(e){return r.__assign({},e,{isVisible:!1})}))},e.prototype.hideRotationGuides=function(){this.rotationOffset=null,this.state.rotationGuides=this.state.rotationGuides.map((function(e){return r.__assign({},e,{isVisible:!1})}))},Object.defineProperty(e.prototype,"positionGuides",{get:function(){var e=this.state,t=e.verticalGuides,o=e.horizontalGuides;return r.__spread(t,o)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationGuides",{get:function(){return this.state.rotationGuides},enumerable:!0,configurable:!0}),r.__decorate([_e],e.prototype,"state",void 0),r.__decorate([xt],e.prototype,"snapToRotation",void 0),r.__decorate([xt],e.prototype,"snapToPosition",void 0),r.__decorate([xt],e.prototype,"hidePositionGuides",null),r.__decorate([xt],e.prototype,"hideRotationGuides",null),r.__decorate([Oe],e.prototype,"positionGuides",null),r.__decorate([Oe],e.prototype,"rotationGuides",null),e}(),fr=function(){function e(e){this.editor=e}return e.prototype.serialize=function(e){var t=this,o=(void 0===e?{image:!1}:e).image;return this.editor.modalStore.showInfoModal("saving"),new Promise((function(e,n){new Promise((function(e){e(require("./index-002ee911.js"))})).then((function(i){var a=i.Serializer;return r.__awaiter(t,void 0,void 0,(function(){var t,i,l,c,u,d,p,h,f,g,m=this;return r.__generator(this,(function(y){switch(y.label){case 0:return y.trys.push([0,3,,4]),this.editor.transformToolStore.applyDefaultCrop(!1),i=this.editor.engineMediator.output.container.getResolution(),l=this.editor.engineMediator.image.container.getBounds().size,c=new a(this.editor.transformToolStore.defaultPosition,this.editor.transformToolStore.defaultSize,i,l),(t={})[r.Tool.ADJUSTMENT]=At(this.editor.adjustmentsToolStore.state),t[r.Tool.FILTER]=At(this.editor.filterToolStore.state),t[r.Tool.FOCUS]=At(this.editor.focusToolStore.state),t[r.Tool.OVERLAY]=At(this.editor.overlayToolStore.state),t[r.Tool.FRAME]=At(this.editor.frameToolStore.state),t[r.Tool.BRUSH]=this.editor.brushToolStore.strokes||{strokes:[]},u=t,d=this.editor.transformToolStore.rotateFlipState,p=180*this.editor.engineMediator.output.container.getRotation()/Math.PI%360,u.transform=r.__assign({start:this.editor.transformToolStore.leftTop,end:this.editor.transformToolStore.rightBottom,identifier:this.editor.transformToolStore.identifier,outputRotation:p<0?p+360:p},d),u.sprite=this.editor.spriteStore.getSpriteState(),Object.keys(u.sprite[r.Tool.TEXT]).forEach((function(e){u.sprite[r.Tool.TEXT][e].width=m.editor.worldToPreview(u.sprite[r.Tool.TEXT][e].width)})),Object.keys(u.sprite[r.Tool.TEXT_DESIGN]).forEach((function(e){u.sprite[r.Tool.TEXT_DESIGN][e].width=m.editor.worldToPreview(u.sprite[r.Tool.TEXT_DESIGN][e].width)})),h=this.editor.spriteStore.stickerToolStore.customStickerIds,u.customStickers=h.map((function(e){var t=e.identifier,o=e.type,n=m.editor.spriteStore.stickerToolStore.entities.find((function(e){return t===e.identifier}));if(n){var i=m.editor.assetProvider.getStickerAsset(n.identifier);if(r.isStickerAssetDynamic(i))return{identifier:t,raster:{type:o,name:n.name,data:i.sticker}}}})).filter(Boolean),f=null,o?[4,this.editor.engineMediator.engine.export(s.ExportFormat.DATA_URL)]:[3,2];case 1:f=y.sent(),y.label=2;case 2:return this.editor.modalStore.hideModal(),e(c.serialise(u,f)),[3,4];case 3:return g=y.sent(),this.editor.modalStore.hideModal(),n(g),[3,4];case 4:return[2]}}))}))}))}))},e.prototype.deserialize=function(e){var t=this;return this.editor.modalStore.showInfoModal("loading"),this.editor.resetToolStates(),new Promise((function(o,n){try{new Promise((function(e){e(require("./index-002ee911.js"))})).then((function(i){var a=i.Deserializer;return r.__awaiter(t,void 0,void 0,(function(){var t,i,s,l,c,u,d=this;return r.__generator(this,(function(r){switch(r.label){case 0:return t=this.editor.engineMediator.output.container.getResolution(),i=this.editor.engineMediator.image.container.getBounds().size,s=new a(this.editor.transformToolStore.defaultPosition,this.editor.transformToolStore.defaultSize,t,i),l="Unexpected error occured",(c=s.deserialise(e,(function(e){"unsupportedVersion"===e.identifier&&(d.editor.modalStore.hideModal(),d.editor.modalStore.showActionModal({identifier:"unsupportedSerializationVersion"}),l=d.editor.modalStore.modalProps.message.body)})))?c.image&&c.image.data?(u=c.image.data,this.editor.setImage(u),this.editor.scale.defaultScale=1,this.editor.scale.resetOffset(),this.editor.transformToolStore.pureReset(),this.editor.activeStore.setImage(u),[4,this.editor.engineMediator.image.addImageToContainer()]):[3,2]:[3,4];case 1:r.sent(),this.editor.engineMediator.output.applyNewImageTransform(),this.editor.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.editor.transformToolStore.setCropDefaults(),this.editor.historyStore.addInitialSnapshot(),this.editor.transformToolStore.saveTransforms(),r.label=2;case 2:return this.editor.transformToolStore.applyDefaultCrop(!1),this.editor.canvasStore.updateCanvasDimensions(),this.applyUIstate(c),[4,this.editor.render()];case 3:return r.sent(),this.editor.modalStore.hideModal(),o(),[3,5];case 4:n(l),r.label=5;case 5:return[2]}}))}))}))}catch(e){"loading"===t.editor.modalStore.identifier&&t.editor.modalStore.hideModal(),n(e)}}))},e.prototype.applyUIstate=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(o){switch(o.label){case 0:return t=this.editor.activeStore.tool===r.Tool.TRANSFORM,e.filter?[4,this.editor.filterToolStore.updateStateFromSerialization(e.filter)]:[3,2];case 1:o.sent(),o.label=2;case 2:return e.adjustment&&this.editor.adjustmentsToolStore.updateStateFromSerialization(e.adjustment),e.focus&&this.editor.focusToolStore.updateStateFromSerialization(e.focus),e.frame?[4,this.editor.frameToolStore.updateStateFromSerialization(e.frame)]:[3,4];case 3:o.sent(),o.label=4;case 4:return e.overlay?[4,this.editor.overlayToolStore.updateStateFromSerialization(e.overlay)]:[3,6];case 5:o.sent(),o.label=6;case 6:return e.sprite&&this.editor.spriteStore.updateStateFromSerialization(e.sprite,e.customStickers),e.transform?(t||this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.updateStateFromSerialization(e.transform),[4,this.editor.wait()]):[3,8];case 7:o.sent(),t||this.editor.transformToolStore.onLeave(),o.label=8;case 8:return[2]}}))}))},e}(),gr=function(){return-1!==(window&&window.navigator&&window.navigator.userAgent||"").indexOf("Edge")},mr=function(e){for(var t=atob(e.split(",")[1]),o=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),r=new Uint8Array(n),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return new Blob([n],{type:o})},yr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},br=/^\s+|\s+$/g,vr=/^[-+]0x[0-9a-f]+$/i,_r=/^0b[01]+$/i,xr=/^0o[0-7]+$/i,Sr=parseInt,wr="object"==typeof yr&&yr&&yr.Object===Object&&yr,kr="object"==typeof self&&self&&self.Object===Object&&self,Cr=wr||kr||Function("return this")(),Or=Object.prototype.toString,Tr=Math.max,Er=Math.min,Pr=function(){return Cr.Date.now()};function Mr(e,t,o){var n,r,i,a,s,l,c=0,u=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var o=n,i=r;return n=r=void 0,c=t,a=e.apply(i,o)}function f(e){return c=e,s=setTimeout(m,t),u?h(e):a}function g(e){var o=e-l;return void 0===l||o>=t||o<0||d&&e-c>=i}function m(){var e=Pr();if(g(e))return y(e);s=setTimeout(m,function(e){var o=t-(e-l);return d?Er(o,i-(e-c)):o}(e))}function y(e){return s=void 0,p&&n?h(e):(n=r=void 0,a)}function b(){var e=Pr(),o=g(e);if(n=arguments,r=this,l=e,o){if(void 0===s)return f(l);if(d)return s=setTimeout(m,t),h(l)}return void 0===s&&(s=setTimeout(m,t)),a}return t=Rr(t)||0,zr(o)&&(u=!!o.leading,i=(d="maxWait"in o)?Tr(Rr(o.maxWait)||0,t):i,p="trailing"in o?!!o.trailing:p),b.cancel=function(){void 0!==s&&clearTimeout(s),c=0,n=l=r=s=void 0},b.flush=function(){return void 0===s?a:y(Pr())},b}function zr(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Rr(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==Or.call(e)}(e))return NaN;if(zr(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=zr(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(br,"");var o=_r.test(e);return o||xr.test(e)?Sr(e.slice(2),o?2:8):vr.test(e)?NaN:+e}var Ir=function(e,t,o){var n=!0,r=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return zr(o)&&(n="leading"in o?!!o.leading:n,r="trailing"in o?!!o.trailing:r),Mr(e,t,{leading:n,maxWait:t,trailing:r})},Dr=/^\s+|\s+$/g,jr=/^[-+]0x[0-9a-f]+$/i,Ar=/^0b[01]+$/i,Lr=/^0o[0-7]+$/i,Fr=parseInt,Br="object"==typeof yr&&yr&&yr.Object===Object&&yr,Nr="object"==typeof self&&self&&self.Object===Object&&self,Hr=Br||Nr||Function("return this")(),Vr=Object.prototype.toString,Wr=Math.max,Gr=Math.min,Ur=function(){return Hr.Date.now()};function Xr(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Yr(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==Vr.call(e)}(e))return NaN;if(Xr(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Xr(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Dr,"");var o=Ar.test(e);return o||Lr.test(e)?Fr(e.slice(2),o?2:8):jr.test(e)?NaN:+e}var Kr=function(e,t,o){var n,r,i,a,s,l,c=0,u=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var o=n,i=r;return n=r=void 0,c=t,a=e.apply(i,o)}function f(e){return c=e,s=setTimeout(m,t),u?h(e):a}function g(e){var o=e-l;return void 0===l||o>=t||o<0||d&&e-c>=i}function m(){var e=Ur();if(g(e))return y(e);s=setTimeout(m,function(e){var o=t-(e-l);return d?Gr(o,i-(e-c)):o}(e))}function y(e){return s=void 0,p&&n?h(e):(n=r=void 0,a)}function b(){var e=Ur(),o=g(e);if(n=arguments,r=this,l=e,o){if(void 0===s)return f(l);if(d)return s=setTimeout(m,t),h(l)}return void 0===s&&(s=setTimeout(m,t)),a}return t=Yr(t)||0,Xr(o)&&(u=!!o.leading,i=(d="maxWait"in o)?Wr(Yr(o.maxWait)||0,t):i,p="trailing"in o?!!o.trailing:p),b.cancel=function(){void 0!==s&&clearTimeout(s),c=0,n=l=r=s=void 0},b.flush=function(){return void 0===s?a:y(Ur())},b},qr=/^\[object .+?Constructor\]$/,$r="object"==typeof yr&&yr&&yr.Object===Object&&yr,Zr="object"==typeof self&&self&&self.Object===Object&&self,Jr=$r||Zr||Function("return this")();var Qr,ei=Array.prototype,ti=Function.prototype,oi=Object.prototype,ni=Jr["__core-js_shared__"],ri=(Qr=/[^.]+$/.exec(ni&&ni.keys&&ni.keys.IE_PROTO||""))?"Symbol(src)_1."+Qr:"",ii=ti.toString,ai=oi.hasOwnProperty,si=oi.toString,li=RegExp("^"+ii.call(ai).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ci=ei.splice,ui=bi(Jr,"Map"),di=bi(Object,"create");function pi(e){var t=-1,o=e?e.length:0;for(this.clear();++t<o;){var n=e[t];this.set(n[0],n[1])}}function hi(e){var t=-1,o=e?e.length:0;for(this.clear();++t<o;){var n=e[t];this.set(n[0],n[1])}}function fi(e){var t=-1,o=e?e.length:0;for(this.clear();++t<o;){var n=e[t];this.set(n[0],n[1])}}function gi(e,t){for(var o,n,r=e.length;r--;)if((o=e[r][0])===(n=t)||o!=o&&n!=n)return r;return-1}function mi(e){return!(!_i(e)||(t=e,ri&&ri in t))&&(function(e){var t=_i(e)?si.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?li:qr).test(function(e){if(null!=e){try{return ii.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function yi(e,t){var o,n,r=e.__data__;return("string"==(n=typeof(o=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==o:null===o)?r["string"==typeof t?"string":"hash"]:r.map}function bi(e,t){var o=function(e,t){return null==e?void 0:e[t]}(e,t);return mi(o)?o:void 0}function vi(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var o=function(){var n=arguments,r=t?t.apply(this,n):n[0],i=o.cache;if(i.has(r))return i.get(r);var a=e.apply(this,n);return o.cache=i.set(r,a),a};return o.cache=new(vi.Cache||fi),o}function _i(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}pi.prototype.clear=function(){this.__data__=di?di(null):{}},pi.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},pi.prototype.get=function(e){var t=this.__data__;if(di){var o=t[e];return"__lodash_hash_undefined__"===o?void 0:o}return ai.call(t,e)?t[e]:void 0},pi.prototype.has=function(e){var t=this.__data__;return di?void 0!==t[e]:ai.call(t,e)},pi.prototype.set=function(e,t){return this.__data__[e]=di&&void 0===t?"__lodash_hash_undefined__":t,this},hi.prototype.clear=function(){this.__data__=[]},hi.prototype.delete=function(e){var t=this.__data__,o=gi(t,e);return!(o<0)&&(o==t.length-1?t.pop():ci.call(t,o,1),!0)},hi.prototype.get=function(e){var t=this.__data__,o=gi(t,e);return o<0?void 0:t[o][1]},hi.prototype.has=function(e){return gi(this.__data__,e)>-1},hi.prototype.set=function(e,t){var o=this.__data__,n=gi(o,e);return n<0?o.push([e,t]):o[n][1]=t,this},fi.prototype.clear=function(){this.__data__={hash:new pi,map:new(ui||hi),string:new pi}},fi.prototype.delete=function(e){return yi(this,e).delete(e)},fi.prototype.get=function(e){return yi(this,e).get(e)},fi.prototype.has=function(e){return yi(this,e).has(e)},fi.prototype.set=function(e,t){return yi(this,e).set(e,t),this},vi.Cache=fi;var xi=vi,Si=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var o=-1;return e.some((function(e,n){return e[0]===t&&(o=n,!0)})),o}return(function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var o=e(this.__entries__,t),n=this.__entries__[o];return n&&n[1]},t.prototype.set=function(t,o){var n=e(this.__entries__,t);~n?this.__entries__[n][1]=o:this.__entries__.push([t,o])},t.prototype.delete=function(t){var o=this.__entries__,n=e(o,t);~n&&o.splice(n,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var o=0,n=this.__entries__;o<n.length;o++){var r=n[o];e.call(t,r[1],r[0])}},t}())}(),wi="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,ki="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Ci="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(ki):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var Oi=["top","right","bottom","left","width","height","size","weight"],Ti="undefined"!=typeof MutationObserver,Ei=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var o=!1,n=!1,r=0;function i(){o&&(o=!1,e()),n&&s()}function a(){Ci(i)}function s(){var e=Date.now();if(o){if(e-r<2)return;n=!0}else o=!0,n=!1,setTimeout(a,t);r=e}return s}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,o=t.indexOf(e);~o&&t.splice(o,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){wi&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Ti?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){wi&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,o=void 0===t?"":t;Oi.some((function(e){return!!~o.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),Pi=function(e,t){for(var o=0,n=Object.keys(t);o<n.length;o++){var r=n[o];Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return e},Mi=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||ki},zi=Li(0,0,0,0);function Ri(e){return parseFloat(e)||0}function Ii(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];return t.reduce((function(t,o){return t+Ri(e["border-"+o+"-width"])}),0)}function Di(e){var t=e.clientWidth,o=e.clientHeight;if(!t&&!o)return zi;var n=Mi(e).getComputedStyle(e),r=function(e){for(var t={},o=0,n=["top","right","bottom","left"];o<n.length;o++){var r=n[o],i=e["padding-"+r];t[r]=Ri(i)}return t}(n),i=r.left+r.right,a=r.top+r.bottom,s=Ri(n.width),l=Ri(n.height);if("border-box"===n.boxSizing&&(Math.round(s+i)!==t&&(s-=Ii(n,"left","right")+i),Math.round(l+a)!==o&&(l-=Ii(n,"top","bottom")+a)),!function(e){return e===Mi(e).document.documentElement}(e)){var c=Math.round(s+i)-t,u=Math.round(l+a)-o;1!==Math.abs(c)&&(s-=c),1!==Math.abs(u)&&(l-=u)}return Li(r.left,r.top,s,l)}var ji="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof Mi(e).SVGGraphicsElement}:function(e){return e instanceof Mi(e).SVGElement&&"function"==typeof e.getBBox};function Ai(e){return wi?ji(e)?function(e){var t=e.getBBox();return Li(0,0,t.width,t.height)}(e):Di(e):zi}function Li(e,t,o,n){return{x:e,y:t,width:o,height:n}}var Fi=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Li(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=Ai(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),Bi=function(e,t){var o=function(e){var t=e.x,o=e.y,n=e.width,r=e.height,i="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(i.prototype);return Pi(a,{x:t,y:o,width:n,height:r,top:o,right:t+n,bottom:r+o,left:t}),a}(t);Pi(this,{target:e,contentRect:o})},Ni=function(){function e(e,t,o){if(this.activeObservations_=[],this.observations_=new Si,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=o}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof Mi(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Fi(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof Mi(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new Bi(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),Hi="undefined"!=typeof WeakMap?new WeakMap:new Si,Vi=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var o=Ei.getInstance(),n=new Ni(t,o,this);Hi.set(this,n)};["observe","unobserve","disconnect"].forEach((function(e){Vi.prototype[e]=function(){var t;return(t=Hi.get(this))[e].apply(t,arguments)}}));var Wi=void 0!==ki.ResizeObserver?ki.ResizeObserver:Vi,Gi=!("undefined"==typeof window||!window.document||!window.document.createElement),Ui=function(){if("undefined"==typeof document)return 0;var e=document.body,t=document.createElement("div"),o=t.style;o.position="fixed",o.left="0",o.visibility="hidden",o.overflowY="scroll",e.appendChild(t);var n=t.getBoundingClientRect().right;return e.removeChild(t),n},Xi=function(){function e(t,o){var n=this;this.minScrollbarWidth=20,this.initDOM=function(){if(Array.prototype.filter.call(n.el.children,(function(e){return e.classList.contains(n.classNames.wrapper)})).length)n.wrapperEl=n.el.querySelector("."+n.classNames.wrapper),n.contentWrapperEl=n.el.querySelector("."+n.classNames.contentWrapper),n.offsetEl=n.el.querySelector("."+n.classNames.offset),n.maskEl=n.el.querySelector("."+n.classNames.mask),n.contentEl=n.el.querySelector("."+n.classNames.contentEl),n.placeholderEl=n.el.querySelector("."+n.classNames.placeholder),n.heightAutoObserverWrapperEl=n.el.querySelector("."+n.classNames.heightAutoObserverWrapperEl),n.heightAutoObserverEl=n.el.querySelector("."+n.classNames.heightAutoObserverEl),n.axis.x.track.el=n.el.querySelector("."+n.classNames.track+"."+n.classNames.horizontal),n.axis.y.track.el=n.el.querySelector("."+n.classNames.track+"."+n.classNames.vertical);else{for(n.wrapperEl=document.createElement("div"),n.contentWrapperEl=document.createElement("div"),n.offsetEl=document.createElement("div"),n.maskEl=document.createElement("div"),n.contentEl=document.createElement("div"),n.placeholderEl=document.createElement("div"),n.heightAutoObserverWrapperEl=document.createElement("div"),n.heightAutoObserverEl=document.createElement("div"),n.wrapperEl.classList.add(n.classNames.wrapper),n.contentWrapperEl.classList.add(n.classNames.contentWrapper),n.offsetEl.classList.add(n.classNames.offset),n.maskEl.classList.add(n.classNames.mask),n.contentEl.classList.add(n.classNames.contentEl),n.placeholderEl.classList.add(n.classNames.placeholder),n.heightAutoObserverWrapperEl.classList.add(n.classNames.heightAutoObserverWrapperEl),n.heightAutoObserverEl.classList.add(n.classNames.heightAutoObserverEl);n.el.firstChild;)n.contentEl.appendChild(n.el.firstChild);n.contentWrapperEl.appendChild(n.contentEl),n.offsetEl.appendChild(n.contentWrapperEl),n.maskEl.appendChild(n.offsetEl),n.heightAutoObserverWrapperEl.appendChild(n.heightAutoObserverEl),n.wrapperEl.appendChild(n.heightAutoObserverWrapperEl),n.wrapperEl.appendChild(n.maskEl),n.wrapperEl.appendChild(n.placeholderEl),n.el.appendChild(n.wrapperEl)}if(!n.axis.x.track.el||!n.axis.y.track.el){var e=document.createElement("div"),t=document.createElement("div");e.classList.add(n.classNames.track),t.classList.add(n.classNames.scrollbar),e.appendChild(t),n.axis.x.track.el=e.cloneNode(!0),n.axis.x.track.el.classList.add(n.classNames.horizontal),n.axis.y.track.el=e.cloneNode(!0),n.axis.y.track.el.classList.add(n.classNames.vertical),n.el.appendChild(n.axis.x.track.el),n.el.appendChild(n.axis.y.track.el)}n.axis.x.scrollbar.el=n.axis.x.track.el.querySelector("."+n.classNames.scrollbar),n.axis.y.scrollbar.el=n.axis.y.track.el.querySelector("."+n.classNames.scrollbar),n.options.autoHide||(n.axis.x.scrollbar.el.classList.add(n.classNames.visible),n.axis.y.scrollbar.el.classList.add(n.classNames.visible)),n.el.setAttribute("data-simplebar","init")},this.initListeners=function(){n.options.autoHide&&n.el.addEventListener("mouseenter",n.onMouseEnter),["mousedown","click","dblclick","touchstart","touchend","touchmove"].forEach((function(e){n.el.addEventListener(e,n.onPointerEvent,{capture:!0,passive:!0})})),n.el.addEventListener("mousemove",n.onMouseMove),n.el.addEventListener("mouseleave",n.onMouseLeave),n.contentWrapperEl.addEventListener("scroll",n.onScroll),window.addEventListener("resize",n.onWindowResize),n.resizeObserver=new Wi(n.recalculate),n.resizeObserver.observe(n.el),n.resizeObserver.observe(n.contentEl)},this.recalculate=function(){var e=n.heightAutoObserverEl.offsetHeight<=1,t=n.heightAutoObserverEl.offsetWidth<=1;n.elStyles=window.getComputedStyle(n.el),n.isRtl="rtl"===n.elStyles.direction,n.contentEl.style.padding=n.elStyles.paddingTop+" "+n.elStyles.paddingRight+" "+n.elStyles.paddingBottom+" "+n.elStyles.paddingLeft,n.wrapperEl.style.margin="-"+n.elStyles.paddingTop+" -"+n.elStyles.paddingRight+" -"+n.elStyles.paddingBottom+" -"+n.elStyles.paddingLeft,n.contentWrapperEl.style.height=e?"auto":"100%",n.placeholderEl.style.width=t?n.contentEl.offsetWidth+"px":"auto",n.placeholderEl.style.height=n.contentEl.scrollHeight+"px",n.axis.x.isOverflowing=n.contentWrapperEl.scrollWidth>n.contentWrapperEl.offsetWidth,n.axis.y.isOverflowing=n.contentWrapperEl.scrollHeight>n.contentWrapperEl.offsetHeight,n.axis.x.isOverflowing="hidden"!==n.elStyles.overflowX&&n.axis.x.isOverflowing,n.axis.y.isOverflowing="hidden"!==n.elStyles.overflowY&&n.axis.y.isOverflowing,n.axis.x.forceVisible="x"===n.options.forceVisible||!0===n.options.forceVisible,n.axis.y.forceVisible="y"===n.options.forceVisible||!0===n.options.forceVisible,n.hideNativeScrollbar(),n.axis.x.track.rect=n.axis.x.track.el.getBoundingClientRect(),n.axis.y.track.rect=n.axis.y.track.el.getBoundingClientRect(),n.axis.x.scrollbar.size=n.getScrollbarSize("x"),n.axis.y.scrollbar.size=n.getScrollbarSize("y"),n.axis.x.scrollbar.el.style.width=n.axis.x.scrollbar.size+"px",n.axis.y.scrollbar.el.style.height=n.axis.y.scrollbar.size+"px",n.positionScrollbar("x"),n.positionScrollbar("y"),n.toggleTrackVisibility("x"),n.toggleTrackVisibility("y")},this.getScrollbarSize=function(e){void 0===e&&(e="y");var t,o=n.scrollbarWidth?n.contentWrapperEl[n.axis[e].scrollSizeAttr]:n.contentWrapperEl[n.axis[e].scrollSizeAttr]-n.minScrollbarWidth,r=n.axis[e].track.rect[n.axis[e].sizeAttr];if(n.axis[e].isOverflowing){var i=r/o;return t=Math.max(~~(i*r),n.options.scrollbarMinSize),n.options.scrollbarMaxSize&&(t=Math.min(t,n.options.scrollbarMaxSize)),t}},this.positionScrollbar=function(t){void 0===t&&(t="y");var o=n.contentWrapperEl[n.axis[t].scrollSizeAttr],r=n.axis[t].track.rect[n.axis[t].sizeAttr],i=parseInt(n.elStyles[n.axis[t].sizeAttr],10),a=n.axis[t].scrollbar,s=n.contentWrapperEl[n.axis[t].scrollOffsetAttr],l=(s="x"===t&&n.isRtl&&e.getRtlHelpers().isRtlScrollingInverted?-s:s)/(o-i),c=~~((r-a.size)*l);c="x"===t&&n.isRtl&&e.getRtlHelpers().isRtlScrollbarInverted?c+(r-a.size):c,a.el.style.transform="x"===t?"translate3d("+c+"px, 0, 0)":"translate3d(0, "+c+"px, 0)"},this.toggleTrackVisibility=function(e){void 0===e&&(e="y");var t=n.axis[e].track.el,o=n.axis[e].scrollbar.el;n.axis[e].isOverflowing||n.axis[e].forceVisible?(t.style.visibility="visible",n.contentWrapperEl.style[n.axis[e].overflowAttr]="scroll"):(t.style.visibility="hidden",n.contentWrapperEl.style[n.axis[e].overflowAttr]="hidden"),o.style.display=n.axis[e].isOverflowing?"block":"none"},this.onScroll=function(){n.scrollXTicking||(window.requestAnimationFrame(n.scrollX),n.scrollXTicking=!0),n.scrollYTicking||(window.requestAnimationFrame(n.scrollY),n.scrollYTicking=!0)},this.scrollX=function(){n.axis.x.isOverflowing&&(n.showScrollbar("x"),n.positionScrollbar("x")),n.scrollXTicking=!1},this.scrollY=function(){n.axis.y.isOverflowing&&(n.showScrollbar("y"),n.positionScrollbar("y")),n.scrollYTicking=!1},this.onMouseEnter=function(){n.showScrollbar("x"),n.showScrollbar("y")},this.onMouseMove=function(e){n.mouseX=e.clientX,n.mouseY=e.clientY,(n.axis.x.isOverflowing||n.axis.x.forceVisible)&&n.onMouseMoveForAxis("x"),(n.axis.y.isOverflowing||n.axis.y.forceVisible)&&n.onMouseMoveForAxis("y")},this.onMouseMoveForAxis=function(e){void 0===e&&(e="y"),n.axis[e].track.rect=n.axis[e].track.el.getBoundingClientRect(),n.axis[e].scrollbar.rect=n.axis[e].scrollbar.el.getBoundingClientRect(),n.isWithinBounds(n.axis[e].scrollbar.rect)?n.axis[e].scrollbar.el.classList.add(n.classNames.hover):n.axis[e].scrollbar.el.classList.remove(n.classNames.hover),n.isWithinBounds(n.axis[e].track.rect)?(n.showScrollbar(e),n.axis[e].track.el.classList.add(n.classNames.hover)):n.axis[e].track.el.classList.remove(n.classNames.hover)},this.onMouseLeave=function(){n.onMouseMove.cancel(),(n.axis.x.isOverflowing||n.axis.x.forceVisible)&&n.onMouseLeaveForAxis("x"),(n.axis.y.isOverflowing||n.axis.y.forceVisible)&&n.onMouseLeaveForAxis("y"),n.mouseX=-1,n.mouseY=-1},this.onWindowResize=function(){n.scrollbarWidth=Ui(),n.hideNativeScrollbar()},this.hideScrollbars=function(){n.axis.x.track.rect=n.axis.x.track.el.getBoundingClientRect(),n.axis.y.track.rect=n.axis.y.track.el.getBoundingClientRect(),n.isWithinBounds(n.axis.y.track.rect)||(n.axis.y.scrollbar.el.classList.remove(n.classNames.visible),n.axis.y.isVisible=!1),n.isWithinBounds(n.axis.x.track.rect)||(n.axis.x.scrollbar.el.classList.remove(n.classNames.visible),n.axis.x.isVisible=!1)},this.onPointerEvent=function(e){var t,o;n.axis.x.scrollbar.rect=n.axis.x.scrollbar.el.getBoundingClientRect(),n.axis.y.scrollbar.rect=n.axis.y.scrollbar.el.getBoundingClientRect(),(n.axis.x.isOverflowing||n.axis.x.forceVisible)&&(o=n.isWithinBounds(n.axis.x.scrollbar.rect)),(n.axis.y.isOverflowing||n.axis.y.forceVisible)&&(t=n.isWithinBounds(n.axis.y.scrollbar.rect)),(t||o)&&(e.preventDefault(),e.stopPropagation(),"mousedown"===e.type&&(t&&n.onDragStart(e,"y"),o&&n.onDragStart(e,"x")))},this.drag=function(t){var o=n.axis[n.draggedAxis].track,r=o.rect[n.axis[n.draggedAxis].sizeAttr],i=n.axis[n.draggedAxis].scrollbar;t.preventDefault(),t.stopPropagation();var a=(("y"===n.draggedAxis?t.pageY:t.pageX)-o.rect[n.axis[n.draggedAxis].offsetAttr]-n.axis[n.draggedAxis].dragOffset)/o.rect[n.axis[n.draggedAxis].sizeAttr]*n.contentWrapperEl[n.axis[n.draggedAxis].scrollSizeAttr];"x"===n.draggedAxis&&(a=n.isRtl&&e.getRtlHelpers().isRtlScrollbarInverted?a-(r+i.size):a,a=n.isRtl&&e.getRtlHelpers().isRtlScrollingInverted?-a:a),n.contentWrapperEl[n.axis[n.draggedAxis].scrollOffsetAttr]=a},this.onEndDrag=function(e){e.preventDefault(),e.stopPropagation(),n.el.classList.remove(n.classNames.dragging),document.removeEventListener("mousemove",n.drag,!0),document.removeEventListener("mouseup",n.onEndDrag,!0),n.removePreventClickId=window.setTimeout((function(){document.removeEventListener("click",n.preventClick,!0),document.removeEventListener("dblclick",n.preventClick,!0),n.removePreventClickId=null}))},this.preventClick=function(e){e.preventDefault(),e.stopPropagation()},this.el=t,this.options=r.__assign({},e.defaultOptions,o),this.classNames=r.__assign({},e.defaultOptions.classNames,this.options.classNames),this.axis={x:{scrollOffsetAttr:"scrollLeft",sizeAttr:"width",scrollSizeAttr:"scrollWidth",offsetAttr:"left",overflowAttr:"overflowX",dragOffset:0,isOverflowing:!0,isVisible:!1,forceVisible:!1,track:{},scrollbar:{}},y:{scrollOffsetAttr:"scrollTop",sizeAttr:"height",scrollSizeAttr:"scrollHeight",offsetAttr:"top",overflowAttr:"overflowY",dragOffset:0,isOverflowing:!0,isVisible:!1,forceVisible:!1,track:{},scrollbar:{}}},this.removePreventClickId=null,this.el.SimpleBar||(this.recalculate=Ir(this.recalculate,64),this.onMouseMove=Ir(this.onMouseMove,64),this.hideScrollbars=Kr(this.hideScrollbars,this.options.timeout),this.onWindowResize=Kr(this.onWindowResize,64,{leading:!0}),e.getRtlHelpers=xi(e.getRtlHelpers),this.init())}return e.getRtlHelpers=function(){var t=document.createElement("div");t.innerHTML='<div class="hs-dummy-scrollbar-size"><div style="height: 200% width: 200% margin: 10px 0"></div></div>';var o=t.firstElementChild;document.body.appendChild(o);var n=o.firstElementChild;o.scrollLeft=0;var r=e.getOffset(o),i=e.getOffset(n);o.scrollLeft=999;var a=e.getOffset(n);return{isRtlScrollingInverted:r.left!==i.left&&i.left-a.left!=0,isRtlScrollbarInverted:r.left!==i.left}},e.initHtmlApi=function(){this.initDOMLoadedElements=this.initDOMLoadedElements.bind(this),"undefined"!=typeof MutationObserver&&(this.globalObserver=new MutationObserver((function(t){t.forEach((function(t){Array.prototype.forEach.call(t.addedNodes,(function(t){1===t.nodeType&&(t.hasAttribute("data-simplebar")&&!t.SimpleBar?new e(t,e.getElOptions(t)):Array.prototype.forEach.call(t.querySelectorAll("[data-simplebar]"),(function(t){t.SimpleBar||new e(t,e.getElOptions(t))})))})),Array.prototype.forEach.call(t.removedNodes,(function(e){1===e.nodeType&&(e.hasAttribute("data-simplebar")&&e.SimpleBar?e.SimpleBar.unMount():Array.prototype.forEach.call(e.querySelectorAll("[data-simplebar]"),(function(e){e.SimpleBar&&e.SimpleBar.unMount()})))}))}))})),this.globalObserver.observe(document,{childList:!0,subtree:!0})),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.scroll?window.setTimeout(this.initDOMLoadedElements):(document.addEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.addEventListener("load",this.initDOMLoadedElements))},e.getElOptions=function(e){return Array.prototype.reduce.call(e.attributes,(function(e,t){var o=t.name.match(/data-simplebar-(.+)/);if(o){var n=o[1].replace(/\W+(.)/g,(function(e,t){return t.toUpperCase()}));switch(t.value){case"true":e[n]=!0;break;case"false":e[n]=!1;break;case void 0:e[n]=!0;break;default:e[n]=t.value}}return e}),{})},e.removeObserver=function(){this.globalObserver.disconnect()},e.initDOMLoadedElements=function(){document.removeEventListener("DOMContentLoaded",this.initDOMLoadedElements),window.removeEventListener("load",this.initDOMLoadedElements),Array.prototype.forEach.call(document.querySelectorAll("[data-simplebar]"),(function(t){t.SimpleBar||new e(t,e.getElOptions(t))}))},e.getOffset=function(e){var t=e.getBoundingClientRect();return{top:t.top+(window.pageYOffset||document.documentElement.scrollTop),left:t.left+(window.pageXOffset||document.documentElement.scrollLeft)}},e.prototype.init=function(){this.el.SimpleBar=this,Gi&&(this.initDOM(),this.scrollbarWidth=Ui(),this.recalculate(),this.initListeners())},e.prototype.hideNativeScrollbar=function(){if(this.offsetEl.style[this.isRtl?"left":"right"]=this.axis.y.isOverflowing||this.axis.y.forceVisible?"-"+(this.scrollbarWidth||this.minScrollbarWidth)+"px":0,this.offsetEl.style.bottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?"-"+(this.scrollbarWidth||this.minScrollbarWidth)+"px":0,!this.scrollbarWidth){var e=this.isRtl?"paddingLeft":"paddingRight";this.contentWrapperEl.style[e]=this.axis.y.isOverflowing||this.axis.y.forceVisible?this.minScrollbarWidth+"px":0,this.contentWrapperEl.style.paddingBottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?this.minScrollbarWidth+"px":0}},e.prototype.onMouseLeaveForAxis=function(e){void 0===e&&(e="y"),this.axis[e].track.el.classList.remove(this.classNames.hover),this.axis[e].scrollbar.el.classList.remove(this.classNames.hover)},e.prototype.showScrollbar=function(e){void 0===e&&(e="y");var t=this.axis[e].scrollbar.el;this.axis[e].isVisible||(t.classList.add(this.classNames.visible),this.axis[e].isVisible=!0),this.options.autoHide&&this.hideScrollbars()},e.prototype.onDragStart=function(e,t){void 0===t&&(t="y");var o=this.axis[t].scrollbar.el,n="y"===t?e.pageY:e.pageX;this.axis[t].dragOffset=n-o.getBoundingClientRect()[this.axis[t].offsetAttr],this.draggedAxis=t,this.el.classList.add(this.classNames.dragging),document.addEventListener("mousemove",this.drag,!0),document.addEventListener("mouseup",this.onEndDrag,!0),null===this.removePreventClickId?(document.addEventListener("click",this.preventClick,!0),document.addEventListener("dblclick",this.preventClick,!0)):(window.clearTimeout(this.removePreventClickId),this.removePreventClickId=null)},e.prototype.getContentElement=function(){return this.contentEl},e.prototype.getScrollElement=function(){return this.contentWrapperEl},e.prototype.removeListeners=function(){var e=this;this.options.autoHide&&this.el.removeEventListener("mouseenter",this.onMouseEnter),["mousedown","click","dblclick","touchstart","touchend","touchmove"].forEach((function(t){e.el.removeEventListener(t,e.onPointerEvent,{capture:!0,passive:!0})})),this.el.removeEventListener("mousemove",this.onMouseMove),this.el.removeEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onWindowResize),this.mutationObserver&&this.mutationObserver.disconnect(),this.resizeObserver.disconnect(),this.recalculate.cancel(),this.onMouseMove.cancel(),this.hideScrollbars.cancel(),this.onWindowResize.cancel()},e.prototype.unMount=function(){this.removeListeners(),this.el.SimpleBar=null},e.prototype.isChildNode=function(e){return null!==e&&(e===this.el||this.isChildNode(e.parentNode))},e.prototype.isWithinBounds=function(e){return this.mouseX>=e.left&&this.mouseX<=e.left+e.width&&this.mouseY>=e.top&&this.mouseY<=e.top+e.height},e.defaultOptions={autoHide:!0,forceVisible:!1,classNames:{contentEl:"simplebar-content",contentWrapper:"simplebar-content-wrapper",offset:"simplebar-offset",mask:"simplebar-mask",wrapper:"simplebar-wrapper",placeholder:"simplebar-placeholder",scrollbar:"simplebar-scrollbar",track:"simplebar-track",heightAutoObserverWrapperEl:"simplebar-height-auto-observer-wrapper",heightAutoObserverEl:"simplebar-height-auto-observer",visible:"simplebar-visible",horizontal:"simplebar-horizontal",vertical:"simplebar-vertical",hover:"simplebar-hover",dragging:"simplebar-dragging"},scrollbarMinSize:25,scrollbarMaxSize:0,timeout:1e3},e}();Gi&&Xi.initHtmlApi();var Yi,Ki=function(){function e(e){var t=this;this.checkImageResize=function(){t.engine.on(s.EngineEvent.BEGAN_IMAGE_DOWNSCALING,(function(){t.modalStore.showInfoModal("resizing")})),t.engine.on(s.EngineEvent.IMAGE_DOWNSCALED,(function(){}))},this.onToolChange=function(e,o,n){if(void 0===o&&(o=null),void 0===n&&(n=!0),e!==o&&t.engineMediator.preview.container){if(-1!==[e,o].indexOf(r.Tool.TRANSFORM)){var i=t.canvasStore.canvasSize,a=zn.basic.toolControlBar.controlsBarHeight;if(e===r.Tool.TRANSFORM){t.configStore.isLayoutAdvanced||(t.canvasStore.state.canvasSize.height=i.height+a,t.resize()),t.transformToolStore.onLeave(),t.historyStore.removeTransformLocalSnapshots();var s=t.engineMediator.preview.container.getScale().x,l=t.engineMediator.output.container.getResolution(),c=t.transformToolStore.defaultImageResolution;(1!==s||c.width!==l.width||c.height!==l.height)&&t.addSnapshot(void 0,"edit",""),t.snappingStore.calculatePreviewTopLeftPosition()}else o===r.Tool.TRANSFORM&&(t.configStore.isLayoutAdvanced||(t.canvasStore.state.canvasSize.height=i.height-a,t.resize()),t.transformToolStore.onEnter(),t.transformToolStore.addSnapshot())}else t.scale.resetOffset(),t.scale.resetPosition(),t.scale.setScaleToDefault(),t.scale.scaleRender(!0);n&&t.render()}},this.resize=function(){try{t.transformToolStore.applyDefaultCrop(!1),t.canvasStore.updateCanvasDimensions();var e=At(t.transformToolStore.defaultSize),o=t.activeStore.tool===r.Tool.TRANSFORM;o||t.transformToolStore.onEnter();var n=t.engineMediator.preview.container.getRotation();if(t.engineMediator.preview.updateTransform(n)){t.scale.setInitialTransform(),t.transformToolStore.setCropDefaults(),t.transformToolStore.updateCanvasControls(e),t.focusToolStore.updateCanvasControls(),t.spriteStore.updateCanvasControls();var i=t.transformToolStore.getScaleWithFlip(n);t.engineMediator.preview.container.setScale(i),o||t.transformToolStore.onLeave(),t.snappingStore.calculatePreviewTopLeftPosition(),t.render()}}catch(e){t.modalStore.showActionModal({identifier:"rendering",handlers:{buttonYes:function(){window.location.reload()}}})}},this.export=function(e){return new Promise((function(o,n){t.modalStore.showInfoModal("exporting");var i=t.activeStore.tool===r.Tool.TRANSFORM;i&&t.transformToolStore.onLeave();var a=t.configStore.config,s=a.export.image,l=void 0===e?s.enableDownload:e;t.engineMediator.engine.export(s.exportType,s.format,s.quality).then((function(e){if(l){var n=-1!==s.format.indexOf("jpeg")?".jpeg":".png",r=a.export.filename+n;if(e.src)if(gr()&&navigator.msSaveBlob){var c=mr(e.src);navigator.msSaveBlob(c,r)}else{var u=document.createElement("a"),d=URL.createObjectURL(mr(e.src));document.body.appendChild(u),u.href=d,u.download=r,u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(d)}}t.configStore.events.onExport(e.src),o(e.src),i&&t.transformToolStore.onEnter(),t.modalStore.hideModal()})).catch((function(e){n(e),i&&t.transformToolStore.onEnter(),t.modalStore.hideModal()}))}))},this.wait=function(e){return void 0===e&&(e=0),new Promise((function(t){return setTimeout(t,e)}))},this.getAssetPath=function(e){return t.assetProvider.getAbsolutePathForCategory(e)},this.getPreviewSize=function(){var e=t.engine.getOutputDimensions(),o=e.width,n=e.height;return o&&n?{width:Math.floor(t.worldToPreview(t.outputToWorld(o))),height:Math.floor(t.worldToPreview(t.outputToWorld(n)))}:{height:n,width:o}},this.configStore=new Mn;var o=this.configStore.saveConfig(e);this.engineMediator=new Hn(this),this.serializationMediator=new fr(this),this.spriteStore=new cr(this),this.scale=new Zn(this),this.filterToolStore=new Lo(this),this.adjustmentsToolStore=new Io(this),this.focusToolStore=new Go(this),this.overlayToolStore=new Ko(this),this.frameToolStore=new dn(this),this.brushToolStore=new hn(this),this.transformToolStore=new rr(this),this.libraryStore=new dr(this),this.modalStore=new qn(this),this.snappingStore=new hr(this),this.activeStore=new Un(this),this.canvasStore=new Yn(this),this.historyStore=new Wn(this),this.modalStore.showInfoModal("loading"),this.libraryStore.initProvider(o),this.configStore.config.displayResizeWarning&&this.checkImageResize()}return e.prototype.init=function(e){var t=this;this.historyStore.isDirty()?this.modalStore.showActionModal({identifier:"discardChanges",handlers:{buttonYes:function(){t.setImage(e),t.resetToolStates()},buttonNo:function(){t.setImage(e,!0)}}}):(this.setImage(e),this.historyStore.reset()),this.libraryStore.fetchImages()},e.prototype.setImage=function(e,t){return void 0===t&&(t=!1),r.__awaiter(this,void 0,void 0,(function(){var o,n,i,a;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),this.modalStore.showInfoModal("resizing"),this.scale.defaultScale=1,this.scale.resetOffset(),this.activeStore.setImage(e),[4,this.engineMediator.image.addImageToContainer()];case 1:return r.sent(),this.engineMediator.output.applyNewImageTransform(),this.engineMediator.preview.updateTransform(),this.scale.setInitialTransform(),this.transformToolStore.setCropDefaults(),this.historyStore.addInitialSnapshot(),o=this.transformToolStore.rotateFlipState,n=o.flipHorizontally,i=o.flipVertically,this.outputContainer.setData({flipVertically:i,flipHorizontally:n}),t?(this.focusToolStore.updateCanvasControls(),this.spriteStore.updateCanvasControls(),this.transformToolStore.resetCrop(),this.transformToolStore.applyDefaultCrop(),this.transformToolStore.saveTransformsBasedOnFlip(),this.transformToolStore.onEnter(),this.transformToolStore.setRotation(this.transformToolStore.rotationInDegrees),this.transformToolStore.onLeave()):this.transformToolStore.saveTransforms(),this.snappingStore.calculatePreviewTopLeftPosition(),[4,this.renderPromise()];case 2:return r.sent(),this.activeStore.tool||this.onReady(),this.modalStore.hideModal(),[3,4];case 3:return a=r.sent(),this.modalStore.hideModal(),this.modalStore.showActionModal({identifier:a.identifier?a.identifier:"rendering",error:a,handlers:{buttonYes:function(){window.location.reload()}}}),[3,4];case 4:return[2]}}))}))},Object.defineProperty(e.prototype,"defaultColors",{get:function(){return Object.keys(d).map((function(e){var t=d[e];return{identifier:e,color:t,colorString:u(t)}}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultBackgroundColors",{get:function(){return Object.keys(p).map((function(e){var t=p[e];return{identifier:e,color:t,colorString:u(t)}}))},enumerable:!0,configurable:!0}),e.prototype.serialize=function(e){var t=(void 0===e?{image:!0}:e).image;return this.serializationMediator.serialize({image:t})},e.prototype.deserialize=function(e){return this.serializationMediator.deserialize(e)},e.prototype.close=function(){this.configStore.events.onClose()},e.prototype.clickableCanvas=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return e?[4,new Promise((function(e){return setTimeout(e,0)}))]:[3,2];case 1:return t.sent(),this.canvasStore.enableCanvasClick(),[3,3];case 2:this.canvasStore.disableCanvasClick(),t.label=3;case 3:return[2]}}))}))},Object.defineProperty(e.prototype,"shortestOutputSide",{get:function(){var e=this.outputContainer.getBounds();return Math.min(e.width,e.height)},enumerable:!0,configurable:!0}),e.prototype.onReady=function(){"advanced"===this.configStore.config.layout&&this.activeStore.selectTool(this.configStore.defaultTool),this.configStore.events.onEditorReady()},e.prototype.addSnapshot=function(e,t,o){this.historyStore.addSnapshot(e,t,o)},e.prototype.addLocalTransformSnapshot=function(e,t,o){void 0===o&&(o="edit"),this.historyStore.addSnapshot({localTransform:e},o,t)},e.prototype.resetToolStates=function(){this.filterToolStore.pureReset(),this.focusToolStore.pureReset(),this.adjustmentsToolStore.pureReset(),this.overlayToolStore.pureReset(),this.frameToolStore.pureReset(),this.brushToolStore.pureReset(),this.spriteStore.pureReset(),this.transformToolStore.pureReset(),this.historyStore.reset(),this.render()},Object.defineProperty(e.prototype,"assetProvider",{get:function(){return this.configStore.assetProvider},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"engine",{get:function(){return this.engineMediator.engine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageContainer",{get:function(){return this.engineMediator.image.container},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orderHelper",{get:function(){return this.engineMediator.orderHelper},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"devicePixelRatio",{get:function(){return window.devicePixelRatio||1},enumerable:!0,configurable:!0}),e.prototype.render=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,this.renderPromise()];case 1:return e.sent(),[2]}}))}))},e.prototype.renderPromise=function(){return this.engineMediator.render(this.engineMediator.preview.container)},e.prototype.previewToWorld=function(e,t){return r.isNumber(e),this.engineMediator.previewSpaceToWorldSpace(e,t)},e.prototype.worldToPreview=function(e){return r.isNumber(e),this.engineMediator.worldSpaceToPreviewSpace(e)},e.prototype.outputToWorld=function(e){return r.isNumber(e),this.engineMediator.outputSpaceToWorldSpace(e)},e.prototype.previewToOutput=function(e){return r.isNumber(e),this.engineMediator.previewSpaceToOutputSpace(e)},e.prototype.applyFlipToPreview=function(e){return this.engineMediator.previewSpaceToFlippedPreviewSpace(e)},Object.defineProperty(e.prototype,"outputContainer",{get:function(){return this.engineMediator.output.container},enumerable:!0,configurable:!0}),r.__decorate([xt],e.prototype,"resize",void 0),r.__decorate([xt],e.prototype,"export",void 0),r.__decorate([Oe],e.prototype,"defaultColors",null),r.__decorate([Oe],e.prototype,"defaultBackgroundColors",null),r.__decorate([xt],e.prototype,"clickableCanvas",null),e}(),qi=c.div(Yi||(Yi=r.__makeTemplateObject(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  background: ",";\n  color: ",";\n  display: flex;\n  flex-direction: row;\n  font-family: '","', sans-serif;\n  overflow-y: hidden;\n  overflow-x: hidden;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  * {\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n"],["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  background: ",";\n  color: ",";\n  display: flex;\n  flex-direction: row;\n  font-family: '","', sans-serif;\n  overflow-y: hidden;\n  overflow-x: hidden;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  * {\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n"])),(function(e){return e.theme.background}),(function(e){return e.theme.foreground}),(function(e){return e.theme.typography.fontFamily}));qi.defaultProps={theme:On};var $i,Zi,Ji,Qi,ea,ta,oa,na,ra,ia,aa,sa,la,ca,ua=l.keyframes($i||($i=r.__makeTemplateObject(["\nfrom {\n  opacity: 1;\n  transform: scale(0);\n}\nto {\n  opacity: 0;\n  transform: scale(10);\n}\n"],["\nfrom {\n  opacity: 1;\n  transform: scale(0);\n}\nto {\n  opacity: 0;\n  transform: scale(10);\n}\n"]))),da=l.css(Zi||(Zi=r.__makeTemplateObject(["\n  &:focus {\n    outline: none;\n    box-shadow: 0 0 2px ",";\n  }\n  &:-moz-focusring {\n    outline: none;\n    box-shadow: 0 0 2px ",";\n  }\n"],["\n  &:focus {\n    outline: none;\n    box-shadow: 0 0 2px ",";\n  }\n  &:-moz-focusring {\n    outline: none;\n    box-shadow: 0 0 2px ",";\n  }\n"])),(function(e){return e.theme.focusOutlineColor}),(function(e){return e.theme.focusOutlineColor})),pa=l.css(Ji||(Ji=r.__makeTemplateObject([""," 1.2s"],[""," 1.2s"])),ua),ha=c.button(ea||(ea=r.__makeTemplateObject(["\n  ","\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n  background: transparent;\n  padding: 4px 8px;\n  border: none;\n  border-radius: ","px;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  font-family: ",", sans-serif;\n  overflow: hidden;\n  ","\n  &:hover, &.hover {\n    color: ",";\n    background: ",";\n  }\n  &.active {\n    color: ",";\n  }\n\n  span.ripple {\n    position: absolute;\n    border-radius: 50%;\n    background-color: rgba(255, 255, 255, 0.12);\n\n    width: 100px;\n    height: 100px;\n    margin-top: -50px;\n    margin-left: -50px;\n\n    animation: ",";\n    opacity: 0;\n  }\n"],["\n  ","\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n  background: transparent;\n  padding: 4px 8px;\n  border: none;\n  border-radius: ","px;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  font-family: ",", sans-serif;\n  overflow: hidden;\n  ","\n  &:hover, &.hover {\n    color: ",";\n    background: ",";\n  }\n  &.active {\n    color: ",";\n  }\n\n  span.ripple {\n    position: absolute;\n    border-radius: 50%;\n    background-color: rgba(255, 255, 255, 0.12);\n\n    width: 100px;\n    height: 100px;\n    margin-top: -50px;\n    margin-left: -50px;\n\n    animation: ",";\n    opacity: 0;\n  }\n"])),da,(function(e){return e.theme.shape.radiusMedium}),(function(e){return e.theme.measurements.fontSystem.button1.size}),(function(e){return e.theme.measurements.fontSystem.button1.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.button1.case}),(function(e){return e.theme.typography.fontFamily}),(function(e){return e.isDisabled?l.css(Qi||(Qi=r.__makeTemplateObject(["\n      background: ",";\n      color: ",";\n      opacity: 0.5;\n      cursor: default;\n      pointer-events: none;\n    "],["\n      background: ",";\n      color: ",";\n      opacity: 0.5;\n      cursor: default;\n      pointer-events: none;\n    "])),e.theme.button.inactiveBackground,e.theme.button.inactiveForeground):"cursor: pointer;"}),(function(e){return e.theme.button.hoverForeground}),(function(e){return e.theme.button.hoverBackground}),(function(e){return e.theme.button.activeForeground}),pa),fa=c.div(oa||(oa=r.__makeTemplateObject(["\n  &:focus: {\n    outline: none;\n  }\n  > img {\n    height: 18px;\n    width: 18px;\n  }\n  > svg {\n    transform: scale(0.6);\n  }\n  ","\n"],["\n  &:focus: {\n    outline: none;\n  }\n  > img {\n    height: 18px;\n    width: 18px;\n  }\n  > svg {\n    transform: scale(0.6);\n  }\n  ","\n"])),(function(e){return e.showIconOnlyOnMobile?l.css(ta||(ta=r.__makeTemplateObject(["\n      display: none;\n      @media all and (min-width: 0) and (max-width: 599px) {\n        display: flex;\n      }\n    "],["\n      display: none;\n      @media all and (min-width: 0) and (max-width: 599px) {\n        display: flex;\n      }\n    "]))):"display: flex;"})),ga=c.div(ra||(ra=r.__makeTemplateObject(["\n  &:focus: {\n    outline: none;\n  }\n  ","\n"],["\n  &:focus: {\n    outline: none;\n  }\n  ","\n"])),(function(e){var t=e.hasIcon;return e.showIconOnlyOnMobile&&t?l.css(na||(na=r.__makeTemplateObject(["\n      display: flex;\n      @media all and (min-width: 0) and (max-width: 599px) {\n        display: none;\n      }\n    "],["\n      display: flex;\n      @media all and (min-width: 0) and (max-width: 599px) {\n        display: none;\n      }\n    "]))):"display: flex;"})),ma=c.span(ia||(ia=r.__makeTemplateObject(["\n  display: block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"],["\n  display: block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"]))),ya=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={display:"none",left:0,top:0},t.timeout=null,t.node=function(){var e=t.props,o=e.children,n=e.icon,r=e.showIconOnlyOnMobile;return"string"!=typeof o||n?i.createElement(ga,{hasIcon:!!n,showIconOnlyOnMobile:r},o):i.createElement(ma,null,o)},t.onClick=function(e){var o=e.currentTarget.getBoundingClientRect(),n=e.pageX-o.left,r=e.pageY-o.top;"block"===t.state.display?t.setState({display:"none"},(function(){t.setRippleState(n,r)})):t.setRippleState(n,r),t.props.onClick(e)},t.setRippleState=function(e,o){t.setState({left:e,top:o,display:"block"}),t.timeout=setTimeout((function(){t.setState({display:"none"})}),1200)},t}return r.__extends(t,e),t.prototype.componentWillUnmount=function(){clearTimeout(this.timeout)},t.prototype.render=function(){var e=this.props,t=e.showIconOnlyOnMobile,o=e.isDisabled,n=e.icon,r=e.onMouseOver,a=e.onMouseOut,s=e.className,l=e.ariaLabel,c=e.type,u=e.children;return i.createElement(ha,{"aria-label":l,disabled:o,hasIcon:!!n,isDisabled:o,type:c,onClick:this.onClick,onMouseOver:r,onMouseOut:a,className:s},i.createElement("span",{className:"ripple",style:this.state}),n&&i.createElement(fa,{showIconOnlyOnMobile:t},n),u&&this.node())},t.defaultProps={showIconOnlyOnMobile:!1,type:"button"},t}(i.Component),ba=l.css(aa||(aa=r.__makeTemplateObject(["\n  letter-spacing: 0.86px;\n  text-transform: uppercase;\n  font-weight: 500;\n"],["\n  letter-spacing: 0.86px;\n  text-transform: uppercase;\n  font-weight: 500;\n"]))),va=l.css(sa||(sa=r.__makeTemplateObject(["\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n"],["\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n"])),(function(e){return e.theme.button.primaryBackground}),(function(e){return e.theme.button.primaryForeground}),(function(e){return e.theme.button.borderColor})),_a=c(ya)(la||(la=r.__makeTemplateObject(["\n  ","\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n"],["\n  ","\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n"])),ba,(function(e){return e.theme.button.secondaryBackground}),(function(e){return e.theme.button.secondaryForeground}),(function(e){return e.theme.button.borderColor})),xa=c(ya)(ca||(ca=r.__makeTemplateObject(["\n  ","\n  ","\n"],["\n  ","\n  ","\n"])),ba,va);ha.defaultProps={theme:On};var Sa,wa,ka,Ca,Oa,Ta,Ea,Pa,Ma,za=l.keyframes(Sa||(Sa=r.__makeTemplateObject(["\n  from { transform: translate(-50%, 0%); }\n  to { transform: translate(-50%, 50%); }\n"],["\n  from { transform: translate(-50%, 0%); }\n  to { transform: translate(-50%, 50%); }\n"]))),Ra=l.css(wa||(wa=r.__makeTemplateObject([""," 0.5s, fadeout 0.5s 2.5s"],[""," 0.5s, fadeout 0.5s 2.5s"])),za),Ia=c.div(ka||(ka=r.__makeTemplateObject(["\n  position absolute;\n  top: ","px;\n  left: ","px;\n  transform: translate(-50%, 50%);\n  background: black;\n  color: white;\n  border-radius: ","px;\n  padding: 10px 16px;\n  text-align: center;\n  z-index: 2;\n  visibility: hidden;\n  &.show {\n    visibility: visible;\n    -webkit-animation: ",";\n    animation: ",";\n  }\n"],["\n  position absolute;\n  top: ","px;\n  left: ","px;\n  transform: translate(-50%, 50%);\n  background: black;\n  color: white;\n  border-radius: ","px;\n  padding: 10px 16px;\n  text-align: center;\n  z-index: 2;\n  visibility: hidden;\n  &.show {\n    visibility: visible;\n    -webkit-animation: ",";\n    animation: ",";\n  }\n"])),(function(e){return e.position.y}),(function(e){return e.position.x}),(function(e){return e.theme.shape.radiusMedium}),Ra,Ra),Da=zn.shared.color.colorItem.button.size,ja=c.button.attrs({type:"button"})(Ca||(Ca=r.__makeTemplateObject(["\n  position: relative;\n  background: transparent;\n  border: none;\n  height: ","px;\n  width: ","px;\n  margin: 1px;\n  padding: 0;\n  cursor: pointer;\n  border-radius: ","px;\n  &:hover, &.hover {\n    opacity: 0.7;\n  }\n  &:focus {\n    outline: none;\n    box-shadow: 0 0 0 1px ",";\n    opacity: 0.9;\n  }\n  &:disabled {\n    opacity: 0.4;\n    cursor: default;\n  }\n"],["\n  position: relative;\n  background: transparent;\n  border: none;\n  height: ","px;\n  width: ","px;\n  margin: 1px;\n  padding: 0;\n  cursor: pointer;\n  border-radius: ","px;\n  &:hover, &.hover {\n    opacity: 0.7;\n  }\n  &:focus {\n    outline: none;\n    box-shadow: 0 0 0 1px ",";\n    opacity: 0.9;\n  }\n  &:disabled {\n    opacity: 0.4;\n    cursor: default;\n  }\n"])),Da,Da,(function(e){return e.theme.shape.radiusSmall}),(function(e){return e.theme.focusBorderColor})),Aa=l.css(Oa||(Oa=r.__makeTemplateObject(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: ","px;\n  width: ","px;\n  box-sizing: border-box;\n"],["\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: ","px;\n  width: ","px;\n  box-sizing: border-box;\n"])),Da,Da),La=c.div.attrs((function(e){return{style:{background:e.backgroundColor}}}))(Ta||(Ta=r.__makeTemplateObject(["\n  ","\n  border-radius: ","px;\n  border: 2px solid transparent;\n  transition: border-color 300ms ease-in-out;\n  &:focus {\n    background: ",";\n  }\n  &.active {\n    border-color: ",";\n  }\n"],["\n  ","\n  border-radius: ","px;\n  border: 2px solid transparent;\n  transition: border-color 300ms ease-in-out;\n  &:focus {\n    background: ",";\n  }\n  &.active {\n    border-color: ",";\n  }\n"])),Aa,(function(e){return e.theme.shape.radiusSmall}),(function(e){return e.theme.focusBackground}),(function(e){return e.theme.primary})),Fa=c.div(Ea||(Ea=r.__makeTemplateObject(["\n  ","\n  border-radius: ","px;\n  background-image: url(assets/colorpicker/controls/tiled-background.png);\n"],["\n  ","\n  border-radius: ","px;\n  background-image: url(assets/colorpicker/controls/tiled-background.png);\n"])),Aa,(function(e){return e.theme.shape.radiusSmall+1})),Ba=c.div(Pa||(Pa=r.__makeTemplateObject(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  height: ","px;\n  width: ","px;\n  content: ' ';\n"],["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  top: 0;\n  height: ","px;\n  width: ","px;\n  content: ' ';\n"])),Da,Da),Na=c.span(Ma||(Ma=r.__makeTemplateObject(["\n  display: inline-block;\n  height: 2px;\n  width: 2px;\n  border-radius: 50%;\n  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.60);\n  background: rgba(255, 255, 255, 0.87);\n  margin: 1px;\n"],["\n  display: inline-block;\n  height: 2px;\n  width: 2px;\n  border-radius: 50%;\n  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.60);\n  background: rgba(255, 255, 255, 0.87);\n  margin: 1px;\n"])));La.defaultProps={theme:On},Fa.defaultProps={theme:On},ja.defaultProps={theme:On};var Ha,Va,Wa=l.css(Ha||(Ha=r.__makeTemplateObject(["\n  opacity: 1;\n  visibility: visible;\n  display: block;\n"],["\n  opacity: 1;\n  visibility: visible;\n  display: block;\n"]))),Ga=c.div(Va||(Va=r.__makeTemplateObject(["\n  opacity: 0;\n  visibility: hidden;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 100;\n  text-align: left;\n  background: ",";\n  transition: opacity .25s ease;\n  display: none;\n  height: 100%;\n  width: 100%;\n  ","\n"],["\n  opacity: 0;\n  visibility: hidden;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 100;\n  text-align: left;\n  background: ",";\n  transition: opacity .25s ease;\n  display: none;\n  height: 100%;\n  width: 100%;\n  ","\n"])),(function(e){return e.theme.modal.backdrop}),(function(e){return e.show&&Wa}));Ga.defaultProps={theme:On};var Ua,Xa,Ya,Ka=c.div(Ua||(Ua=r.__makeTemplateObject(["\n  position: relative;\n  height: inherit;\n  width: inherit;\n"],["\n  position: relative;\n  height: inherit;\n  width: inherit;\n"]))),qa=c.div.attrs((function(e){return{role:"dialog","aria-hidden":!1,"aria-labelledby":e.heading}}))(Xa||(Xa=r.__makeTemplateObject(["\n  display: flex;\n  flex: 0 0 auto;\n  flex-direction: column;\n  transition: top .25s ease;\n  position: absolute;\n  top: ",";\n  left: ",";\n  width: ",";\n  height: ",";\n  transform: translate(-50%, -50%);\n  border-radius: ","px;\n  background: ",";\n  color: ",";\n"],["\n  display: flex;\n  flex: 0 0 auto;\n  flex-direction: column;\n  transition: top .25s ease;\n  position: absolute;\n  top: ",";\n  left: ",";\n  width: ",";\n  height: ",";\n  transform: translate(-50%, -50%);\n  border-radius: ","px;\n  background: ",";\n  color: ",";\n"])),(function(e){return e.y}),(function(e){return e.x}),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.theme.shape.radiusLarge}),(function(e){return e.theme.modal.background}),(function(e){return e.theme.modal.bodyForeground})),$a=c.div(Ya||(Ya=r.__makeTemplateObject(["\n  display: flex;\n  flex: 0 0 auto;\n  flex-direction: row;\n  overflow: hidden;\n  width: inherit;\n  padding: 11px 20px;\n  box-sizing: border-box;\n"],["\n  display: flex;\n  flex: 0 0 auto;\n  flex-direction: row;\n  overflow: hidden;\n  width: inherit;\n  padding: 11px 20px;\n  box-sizing: border-box;\n"]))),Za=function(e){var t=e.show,o=e.height,n=e.width,r=e.position,a=e.children,s=e.footer,l=e.heading,c=r?{x:"calc(50% + "+r.x+"px)",y:"calc(50% + "+r.y+"px)"}:{x:"50%",y:"50%"},u=c.x,d=c.y;return i.createElement(Ga,{show:t},i.createElement(Ka,null,i.createElement(qa,{heading:l,x:u,y:d,height:o,width:n},i.createElement($a,null,a),s())))};qa.defaultProps={theme:On,className:""};var Ja,Qa,es,ts,os,ns,rs,is,as,ss,ls=l.keyframes(Ja||(Ja=r.__makeTemplateObject(["\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n"],["\n  0% {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n"]))),cs=l.css(Qa||(Qa=r.__makeTemplateObject([""," 2s infinite ease 1.5s"],[""," 2s infinite ease 1.5s"])),ls),us=l.css(es||(es=r.__makeTemplateObject([""," 2s infinite ease"],[""," 2s infinite ease"])),ls),ds=c.div(ts||(ts=r.__makeTemplateObject(["\n  margin-left: 30px;\n  h3 {\n    font-size: ","px;\n    letter-spacing: ","px;\n    text-transform: ",";\n    color: ",";\n  }\n  p {\n    font-size: ","px;\n    letter-spacing: ","px;\n    text-transform: ",";\n    color: ",";\n  }\n"],["\n  margin-left: 30px;\n  h3 {\n    font-size: ","px;\n    letter-spacing: ","px;\n    text-transform: ",";\n    color: ",";\n  }\n  p {\n    font-size: ","px;\n    letter-spacing: ","px;\n    text-transform: ",";\n    color: ",";\n  }\n"])),(function(e){return e.theme.measurements.fontSystem.headline2.size}),(function(e){return e.theme.measurements.fontSystem.headline2.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.body.case}),(function(e){return e.theme.modal.headerForeground}),(function(e){return e.theme.measurements.fontSystem.label.size}),(function(e){return e.theme.measurements.fontSystem.label.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.label.case}),(function(e){return e.theme.modal.bodyForeground})),ps=c.div(os||(os=r.__makeTemplateObject(["\n  height: 4px;\n  padding: 0;\n  margin: 0;\n  background: rgba(54, 90, 252, 0.5);\n  &:after {\n    position: absolute;\n    bottom: 0px;\n    content: '';\n    width: ","%;\n    border-bottom: 4px solid ",";\n  }\n"],["\n  height: 4px;\n  padding: 0;\n  margin: 0;\n  background: rgba(54, 90, 252, 0.5);\n  &:after {\n    position: absolute;\n    bottom: 0px;\n    content: '';\n    width: ","%;\n    border-bottom: 4px solid ",";\n  }\n"])),(function(e){return e.percentage}),(function(e){return e.theme.primary})),hs=c.div(ns||(ns=r.__makeTemplateObject(["\n  color: ",";\n  margin: 12px 0;\n  position: relative;\n  width: 40px;\n  height: 40px;\n  box-shadow: inset 0 0 0 2px;\n  -webkit-transform: translateZ(0);\n  -ms-transform: translateZ(0);\n  transform: translateZ(0);\n  border-radius: 50%;\n  &:before, &:after {\n    border-radius: 50%;\n    position: absolute;\n    content: '';\n  }\n  &:before {\n    width: 25px;\n    height: 45px;\n    background: ",";\n    border-radius: 45px 0 0 45px;\n    top: -2.5px;\n    left: -2.5px;\n    -webkit-transform-origin: 25px 25px;\n    transform-origin: 25px 25px;\n    -webkit-animation: ",";\n    animation: ",";\n  }\n  &:after {\n    width: 25px;\n    height: 45px;\n    background: ",";\n    border-radius: 0 45px 45px 0;\n    top: -2.5px;\n    left: 25px;\n    -webkit-transform-origin: 0px 25px;\n    transform-origin: 0px 25px;\n    -webkit-animation: ",";\n    animation: ",";\n  }\n"],["\n  color: ",";\n  margin: 12px 0;\n  position: relative;\n  width: 40px;\n  height: 40px;\n  box-shadow: inset 0 0 0 2px;\n  -webkit-transform: translateZ(0);\n  -ms-transform: translateZ(0);\n  transform: translateZ(0);\n  border-radius: 50%;\n  &:before, &:after {\n    border-radius: 50%;\n    position: absolute;\n    content: '';\n  }\n  &:before {\n    width: 25px;\n    height: 45px;\n    background: ",";\n    border-radius: 45px 0 0 45px;\n    top: -2.5px;\n    left: -2.5px;\n    -webkit-transform-origin: 25px 25px;\n    transform-origin: 25px 25px;\n    -webkit-animation: ",";\n    animation: ",";\n  }\n  &:after {\n    width: 25px;\n    height: 45px;\n    background: ",";\n    border-radius: 0 45px 45px 0;\n    top: -2.5px;\n    left: 25px;\n    -webkit-transform-origin: 0px 25px;\n    transform-origin: 0px 25px;\n    -webkit-animation: ",";\n    animation: ",";\n  }\n"])),(function(e){return e.theme.primary}),(function(e){return e.theme.modal.background}),cs,cs,(function(e){return e.theme.modal.background}),us,us),fs=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.footer=function(){return t.props.progress?i.createElement(ps,{percentage:t.props.percentage||0}):null},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.show,o=e.heading,n=e.body,r=e.position;return i.createElement(Za,{show:t,position:r,height:"90px",width:"350px",footer:this.footer},i.createElement(hs,null),i.createElement(ds,null,i.createElement("h3",null,o),i.createElement("p",null,n)))},t}(i.PureComponent),gs=c.div(rs||(rs=r.__makeTemplateObject(["\n  position: absolute;\n  top: 6px;\n  width: 0;\n  height: 0;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-top: 5px solid ",";\n  transform: rotate(","deg);\n  display: inline-block;\n  transition-duration: 0.3s;\n  transition-timing-function: ease-in;\n"],["\n  position: absolute;\n  top: 6px;\n  width: 0;\n  height: 0;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-top: 5px solid ",";\n  transform: rotate(","deg);\n  display: inline-block;\n  transition-duration: 0.3s;\n  transition-timing-function: ease-in;\n"])),(function(e){return e.theme.card.labelForeground}),(function(e){return e.rotation||0})),ms=c.div(ss||(ss=r.__makeTemplateObject(["\n  position: absolute;\n  bottom: 0px;\n  border-radius: ","px;\n  font-family: '","', sans-serif;\n  left: 0;\n  ","\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  width: 100%;\n  text-align: center;\n  cursor: pointer;\n  .label {\n    left: 50%;\n    position: absolute;\n    transform: translateX(-50%);\n    top: 13px;\n    width: 100%;\n  }\n"],["\n  position: absolute;\n  bottom: 0px;\n  border-radius: ","px;\n  font-family: '","', sans-serif;\n  left: 0;\n  ","\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  width: 100%;\n  text-align: center;\n  cursor: pointer;\n  .label {\n    left: 50%;\n    position: absolute;\n    transform: translateX(-50%);\n    top: 13px;\n    width: 100%;\n  }\n"])),(function(e){return e.theme.shape.radiusMedium}),(function(e){return e.theme.typography.fontFamily}),(function(e){return e.withBackground?l.css(is||(is=r.__makeTemplateObject(["\n    color: ",";\n    height: 40px;\n    background: ",";\n  "],["\n    color: ",";\n    height: 40px;\n    background: ",";\n  "])),e.theme.card.labelForeground,e.theme.card.labelBackground):l.css(as||(as=r.__makeTemplateObject(["\n    color: ",";\n    height: 32px;\n  "],["\n    color: ",";\n    height: 32px;\n  "])),e.theme.card.foreground)}),(function(e){return e.theme.measurements.fontSystem.label.size}),(function(e){return e.theme.measurements.fontSystem.label.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.label.case}));ms.defaultProps={theme:On,withBackground:!1};var ys,bs,vs,_s,xs,Ss,ws,ks=l.css(ys||(ys=r.__makeTemplateObject(["\n  position: absolute !important;\n  height: 1px;\n  width: 1px;\n  overflow: hidden;\n  clip: rect(1px 1px 1px 1px); /* IE6, IE7 */\n  clip: rect(1px, 1px, 1px, 1px);\n"],["\n  position: absolute !important;\n  height: 1px;\n  width: 1px;\n  overflow: hidden;\n  clip: rect(1px 1px 1px 1px); /* IE6, IE7 */\n  clip: rect(1px, 1px, 1px, 1px);\n"]))),Cs=l.css(bs||(bs=r.__makeTemplateObject(["\n  -webkit-overflow-scrolling: touch;\n  &::-webkit-scrollbar {\n    display: none;\n    /* Safari */\n    -webkit-appearance: none;\n    width: 0;\n    height: 0;\n  }\n  -ms-overflow-style: none; /* IE 11 */\n  scrollbar-width: none; /* Firefox 64 */\n"],["\n  -webkit-overflow-scrolling: touch;\n  &::-webkit-scrollbar {\n    display: none;\n    /* Safari */\n    -webkit-appearance: none;\n    width: 0;\n    height: 0;\n  }\n  -ms-overflow-style: none; /* IE 11 */\n  scrollbar-width: none; /* Firefox 64 */\n"]))),Os=c.span(vs||(vs=r.__makeTemplateObject(["\n  position: relative;\n  padding-left: 10px;\n"],["\n  position: relative;\n  padding-left: 10px;\n"]))),Ts=c.div(_s||(_s=r.__makeTemplateObject(["\n  ","\n"],["\n  ","\n"])),ks),Es=l.css(xs||(xs=r.__makeTemplateObject([""," 1.2s"],[""," 1.2s"])),ua),Ps=l.css(Ss||(Ss=r.__makeTemplateObject(["\n  padding: 0;\n  cursor: pointer;\n  box-sizing: border-box;\n  border-radius: ","px;\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-color: ",";\n  color: ",";\n  border: 1px solid ",";\n\n  /** Pressed state styles **/\n  overflow: hidden;\n  span.ripple {\n    position: absolute;\n    border-radius: 50%;\n    background-color: rgba(255, 255, 255, 0.12);\n\n    width: 100px;\n    height: 100px;\n    margin-top: -50px;\n    margin-left: -50px;\n\n    animation: ",";\n    opacity: 0;\n  }\n\n  /** Active, Hover and Disabled state base styles **/\n  span.active, span.disabled, span.hover {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n  /** Active **/\n  &.active {\n    border: 1px solid ",";\n    span.active {\n      background-color: ",";\n    }\n  }\n  /** Disabled **/\n  &:disabled {\n    cursor: default;\n    pointer-events: none;\n    span.disabled {\n      background-color: ",";\n    }\n  }\n  /** Hover **/\n  &:hover, &.hover {\n    span.hover {\n      background-color: ",";\n    }\n  }\n ","\n"],["\n  padding: 0;\n  cursor: pointer;\n  box-sizing: border-box;\n  border-radius: ","px;\n  background-size: cover;\n  background-position: center center;\n  background-repeat: no-repeat;\n  background-color: ",";\n  color: ",";\n  border: 1px solid ",";\n\n  /** Pressed state styles **/\n  overflow: hidden;\n  span.ripple {\n    position: absolute;\n    border-radius: 50%;\n    background-color: rgba(255, 255, 255, 0.12);\n\n    width: 100px;\n    height: 100px;\n    margin-top: -50px;\n    margin-left: -50px;\n\n    animation: ",";\n    opacity: 0;\n  }\n\n  /** Active, Hover and Disabled state base styles **/\n  span.active, span.disabled, span.hover {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n  /** Active **/\n  &.active {\n    border: 1px solid ",";\n    span.active {\n      background-color: ",";\n    }\n  }\n  /** Disabled **/\n  &:disabled {\n    cursor: default;\n    pointer-events: none;\n    span.disabled {\n      background-color: ",";\n    }\n  }\n  /** Hover **/\n  &:hover, &.hover {\n    span.hover {\n      background-color: ",";\n    }\n  }\n ","\n"])),(function(e){return e.theme.shape.radiusMedium}),(function(e){return e.theme.card.background}),(function(e){return e.theme.card.foreground}),(function(e){return e.theme.card.borderColor}),Es,(function(e){return e.theme.card.activeBorderColor}),(function(e){return e.theme.card.activeBackground}),(function(e){return e.theme.card.disabledBackground}),(function(e){return e.theme.card.hoverBackground}),da),Ms=c.div(ws||(ws=r.__makeTemplateObject(["\n  padding-bottom: ","px;\n"],["\n  padding-bottom: ","px;\n"])),(function(e){return 8*(e.count||1)}));Ms.defaultProps={count:1};var zs,Rs,Is=c.label(zs||(zs=r.__makeTemplateObject(["",""],["",""])),ks),Ds=c.label(Rs||(Rs=r.__makeTemplateObject(["\n  display: block;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n  &.disabled {\n    opacity: 0.6;\n    cursor: default;\n    pointer-events: none;\n  }\n"],["\n  display: block;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n  &.disabled {\n    opacity: 0.6;\n    cursor: default;\n    pointer-events: none;\n  }\n"])),(function(e){return e.theme.measurements.fontSystem.body.size}),(function(e){return e.theme.measurements.fontSystem.body.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.body.case}),(function(e){return e.theme.slider.label})),js=function(e){var t=e.name,o=e.show,n=e.styles,r=e.isDisabled,a=e.className,s=o?Ds:Is,l=r?"label disabled":"label";return i.createElement(s,{style:n||{},className:a+" "+l,htmlFor:t.replace(" ","-")},t)};js.defaultProps={show:!0},Ds.defaultProps={theme:On};var As,Ls,Fs,Bs=l.css(As||(As=r.__makeTemplateObject(["\n  transition: all .2s ease-out;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  width: 100%;\n  height: 26px;\n  color: ",";\n  padding-bottom: 7px;\n  border: none;\n  -webkit-appearance: none;\n  border-bottom: 1px solid ",";\n  background: ",";\n  font-family: '","', sans-serif;\n  transition: border-color 0.4s ease-in-out;\n  &:focus {\n    outline: none;\n    border-color: ",";\n  }\n  &:-moz-focusring {\n    outline: none;\n    border-color: ",";\n  }\n  &.disabled &:disabled {\n    opacity: 0.5;\n    pointer-events: none;\n  }\n  &:hover {\n    border-color: ",";\n  }\n"],["\n  transition: all .2s ease-out;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  width: 100%;\n  height: 26px;\n  color: ",";\n  padding-bottom: 7px;\n  border: none;\n  -webkit-appearance: none;\n  border-bottom: 1px solid ",";\n  background: ",";\n  font-family: '","', sans-serif;\n  transition: border-color 0.4s ease-in-out;\n  &:focus {\n    outline: none;\n    border-color: ",";\n  }\n  &:-moz-focusring {\n    outline: none;\n    border-color: ",";\n  }\n  &.disabled &:disabled {\n    opacity: 0.5;\n    pointer-events: none;\n  }\n  &:hover {\n    border-color: ",";\n  }\n"])),(function(e){return e.theme.measurements.fontSystem.body.size}),(function(e){return e.theme.measurements.fontSystem.body.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.body.case}),(function(e){return e.theme.textInput.foreground}),(function(e){return e.theme.textInput.borderColor}),(function(e){return e.theme.textInput.background}),(function(e){return e.theme.typography.fontFamily}),(function(e){return e.theme.textInput.hoverColor}),(function(e){return e.theme.textInput.hoverColor}),(function(e){return e.theme.textInput.hoverColor})),Ns=c.input(Ls||(Ls=r.__makeTemplateObject(["\n  ","\n  padding-bottom: unset;\n  /* override user agent style */\n  padding: 0;\n  padding-bottom: unset;\n  &:disabled {\n    opacity: 0.6;\n    cursor: default;\n    pointer-events: none;\n  }\n"],["\n  ","\n  padding-bottom: unset;\n  /* override user agent style */\n  padding: 0;\n  padding-bottom: unset;\n  &:disabled {\n    opacity: 0.6;\n    cursor: default;\n    pointer-events: none;\n  }\n"])),Bs),Hs=c.div(Fs||(Fs=r.__makeTemplateObject(["\n  position: relative;\n  &:first-child {\n    margin-right: 15px;\n  }\n"],["\n  position: relative;\n  &:first-child {\n    margin-right: 15px;\n  }\n"]))),Vs=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onChange=function(e){var o=t.props.onChange;o&&o(e.target.value)},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.id,o=e.value,n=e.type,r=e.min,a=e.max,s=e.onBlur,l=e.onFocus,c=e.onKeyUp,u=e.onKeyDown,d=e.onMouseUp,p=e.onTouchEnd,h=e.isDisabled,f=e.className,g=e.children,m=h?"disabled":"";return i.createElement(Hs,{className:f+" "+m},i.createElement(Ns,{id:t,"aria-hidden":h,disabled:h,value:o,type:n,min:r,max:a,onChange:this.onChange,onBlur:s,onFocus:l,onKeyUp:c,onKeyDown:u,onMouseUp:d,onTouchEnd:p}),g)},t.defaultProps={type:"text"},t}(i.Component);Ns.defaultProps={theme:On};var Ws,Gs,Us,Xs,Ys,Ks,qs=l.css(Ws||(Ws=r.__makeTemplateObject(["\n  width: 20px;\n  height: 20px;\n  background: ",";\n  border: 2px solid ",";\n  border-radius: 50%;\n  cursor: pointer;\n"],["\n  width: 20px;\n  height: 20px;\n  background: ",";\n  border: 2px solid ",";\n  border-radius: 50%;\n  cursor: pointer;\n"])),(function(e){return e.theme.slider.thumbBackground}),(function(e){return e.theme.slider.thumbBorderColor})),$s=function(e){var t=100*(e.value-e.min)/(e.max-e.min);return e.adjust?e.value>0?(t=e.value*(e.max/2)*100,e.theme.slider.trackColor+" 0%,\n      "+e.theme.slider.trackColor+" 50%,\n      "+e.theme.slider.activeTrackColor+" 50%,\n      "+e.theme.slider.activeTrackColor+" "+(50+t)+"%,\n      "+e.theme.slider.trackColor+" "+(50+t)+"%,\n      "+e.theme.slider.trackColor+" 100%\n      "):e.value<0?(t=e.value*(e.min/2)*100,e.theme.slider.trackColor+" 0%,\n      "+e.theme.slider.trackColor+" "+(50-t)+"%,\n      "+e.theme.slider.activeTrackColor+" "+(50-t)+"%,\n      "+e.theme.slider.activeTrackColor+" 50%,\n      "+e.theme.slider.trackColor+" 50%,\n      "+e.theme.slider.trackColor+" 100%\n      "):e.theme.slider.trackColor+" 0%,\n    "+e.theme.slider.trackColor+" 100%":e.theme.slider.activeTrackColor+" 0%,\n    "+e.theme.slider.activeTrackColor+" "+t+"%,\n    "+e.theme.slider.trackColor+" "+t+"%,\n    "+e.theme.slider.trackColor+" 100%"},Zs=c.input(Xs||(Xs=r.__makeTemplateObject(["\n  display: flex;\n  flex: 1 0 auto;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  max-width: calc(100% - 50px);\n  outline: none;\n  border-radius: 0; /* iOS */\n  ","\n  &:hover {\n    opacity: 0.7;\n  }\n  &:disabled {\n    opacity: 0.4;\n    pointer-events: none;\n  }\n\n  ","\n\n  &::-moz-focus-outer {\n    /** This is to remove the dotted focus lines in firefox */\n    border: 0;\n  }\n  &::-webkit-slider-runnable-track {\n    cursor: pointer;\n    height: 20px;\n    -webkit-appearance: none;\n    appearance: none;\n  }\n  &::-moz-range-track {\n    -moz-appearance: none;\n    appearance: none;\n    cursor: pointer;\n    height: 20px;\n  }\n  &::-ms-track {\n    cursor: pointer;\n    height: 1px;\n    -webkit-appearance: none;\n    appearance: none;\n    background: ",";\n  }\n  &::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    appearance: none;\n    ","\n  }\n  &::-moz-range-thumb {\n    -moz-appearance: none;\n    appearance: none;\n    ","\n  }\n  &::-ms-thumb {\n    -webkit-appearance: none;\n    appearance: none;\n    ","\n  }\n"],["\n  display: flex;\n  flex: 1 0 auto;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  max-width: calc(100% - 50px);\n  outline: none;\n  border-radius: 0; /* iOS */\n  ","\n  &:hover {\n    opacity: 0.7;\n  }\n  &:disabled {\n    opacity: 0.4;\n    pointer-events: none;\n  }\n\n  ","\n\n  &::-moz-focus-outer {\n    /** This is to remove the dotted focus lines in firefox */\n    border: 0;\n  }\n  &::-webkit-slider-runnable-track {\n    cursor: pointer;\n    height: 20px;\n    -webkit-appearance: none;\n    appearance: none;\n  }\n  &::-moz-range-track {\n    -moz-appearance: none;\n    appearance: none;\n    cursor: pointer;\n    height: 20px;\n  }\n  &::-ms-track {\n    cursor: pointer;\n    height: 1px;\n    -webkit-appearance: none;\n    appearance: none;\n    background: ",";\n  }\n  &::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    appearance: none;\n    ","\n  }\n  &::-moz-range-thumb {\n    -moz-appearance: none;\n    appearance: none;\n    ","\n  }\n  &::-ms-thumb {\n    -webkit-appearance: none;\n    appearance: none;\n    ","\n  }\n"])),gr()?l.css(Gs||(Gs=r.__makeTemplateObject(["height: 24px;"],["height: 24px;"]))):l.css(Us||(Us=r.__makeTemplateObject(["\n    height: 2px;\n    background: ",";\n  "],["\n    height: 2px;\n    background: ",";\n  "])),(function(e){return"linear-gradient(to right, "+$s(e)+")"})),da,(function(e){return"linear-gradient(to right, "+$s(e)+")"}),qs,qs,qs),Js=c.div(Ys||(Ys=r.__makeTemplateObject(["\n  display: flex;\n  align-items: center;\n  height: 26px;\n"],["\n  display: flex;\n  align-items: center;\n  height: 26px;\n"]))),Qs=c(Vs)(Ks||(Ks=r.__makeTemplateObject(["\n  display: flex;\n  flex: 0 1 auto;\n  max-width: 50px;\n  padding-left: 16px;\n  > input {\n    text-align: center;\n  }\n"],["\n  display: flex;\n  flex: 0 1 auto;\n  max-width: 50px;\n  padding-left: 16px;\n  > input {\n    text-align: center;\n  }\n"]))),el=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={inputValue:""+t.props.value*t.props.divider+t.props.suffix,inputActive:!1},t.onSubmit=function(){var e=t.props,o=e.onChange,n=e.suffix,r=e.divider,i=e.min,a=e.max,s=e.value,l=t.state.inputValue,c=l.replace(",",".").replace(/[a-zA-Z]/g,"").replace(n,"").trim(),u=c?parseFloat(c)/r:s;o(Math.max(i,Math.min(a,u))),n&&!l.includes(n)&&t.setState({inputActive:!1,inputValue:""+l+n}),t.setState({inputActive:!1})},t.onFocus=function(){t.setState({inputActive:!0})},t.onKeyDown=function(e){13===e.keyCode&&t.onSubmit()},t.onChange=function(e){t.setState({inputValue:e,inputActive:!0})},t.onSliderChange=function(e){(0,t.props.onChange)(parseFloat(e.target.value))},t}return r.__extends(t,e),t.getDerivedStateFromProps=function(e,t){var o=t.inputValue,n=t.inputActive,r=e.value,i=e.suffix,a=e.divider,s=e.decimal,l=""+(r*a).toFixed(s)+i;return l===o||n?null:{inputValue:l}},t.prototype.render=function(){var e=this.props,t=e.value,o=e.snap,n=e.min,r=e.max,a=e.showLabel,s=e.showInput,l=e.style,c=e.adjust,u=e.name,d=e.isDisabled,p=e.step,h=e["aria-hidden"],f=e.onMouseUp,g=e.onTouchEnd,m=this.state.inputValue,y=u.replace(" ","-"),b="number"==typeof o&&i.createElement("datalist",{id:y+"-list"},i.createElement("option",{value:o})),v=s&&i.createElement(Qs,{value:m,"aria-hidden":h,onChange:this.onChange,onKeyDown:this.onKeyDown,onBlur:this.onSubmit,onFocus:this.onFocus,onMouseUp:f,onTouchEnd:g});return i.createElement("div",null,i.createElement(js,{isDisabled:d,name:u,show:a}),i.createElement(Ms,{count:.25}),i.createElement(Js,null,i.createElement(Zs,{type:"range",role:"slider","aria-hidden":h,tabIndex:0,value:t,min:n,max:r,step:p,style:l,disabled:d,id:y,list:y+"-list",onChange:this.onSliderChange,adjust:c,name:u,onKeyUp:this.onSliderChange,onKeyDown:this.onSliderChange,onMouseUp:f,onTouchEnd:g}),b,v))},t.defaultProps={showLabel:!0,showInput:!0,adjust:!1,min:-1,max:1,value:0,step:.01,decimal:0,divider:100,suffix:""},t}(i.Component);Zs.defaultProps={theme:On};var tl,ol=c.input.attrs({type:"search"})(tl||(tl=r.__makeTemplateObject([""," "],[""," "])),Bs);ol.defaultProps={theme:On};var nl,rl,il,al,sl,ll,cl,ul=c(ya)(nl||(nl=r.__makeTemplateObject(["\n  ","\n  height: inherit;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n  &.primary {\n    color: ",";\n  }\n"],["\n  ","\n  height: inherit;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n  &.primary {\n    color: ",";\n  }\n"])),ba,(function(e){return e.theme.measurements.fontSystem.label.size}),(function(e){return e.theme.measurements.fontSystem.label.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.label.case}),(function(e){return e.theme.button.secondaryForeground}),(function(e){return e.theme.button.primaryForeground})),dl=c.div(rl||(rl=r.__makeTemplateObject(["\n  display: flex;\n  justify-content: flex-end;\n  width: inherit;\n  text-align: right;\n  height: 40px;\n"],["\n  display: flex;\n  justify-content: flex-end;\n  width: inherit;\n  text-align: right;\n  height: 40px;\n"]))),pl=c.div(il||(il=r.__makeTemplateObject(["\n  textarea {\n    caret-color: ",";\n    ","\n    height: 44px;\n    outline-offset: -8px;\n    color: ",";\n    resize: none;\n    font-family: '","', sans-serif;\n    &:selection, &:-moz-selection {\n      background-color: ",";\n      color: ",";\n    }\n  }\n"],["\n  textarea {\n    caret-color: ",";\n    ","\n    height: 44px;\n    outline-offset: -8px;\n    color: ",";\n    resize: none;\n    font-family: '","', sans-serif;\n    &:selection, &:-moz-selection {\n      background-color: ",";\n      color: ",";\n    }\n  }\n"])),(function(e){return e.theme.primary}),Bs,(function(e){return e.theme.modal.bodyForeground}),(function(e){return e.theme.typography.fontFamily}),(function(e){return e.theme.primary}),(function(e){return e.theme.foreground})),hl=c.label(al||(al=r.__makeTemplateObject(["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n"],["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n"])),(function(e){return e.theme.measurements.fontSystem.label.size}),(function(e){return e.theme.measurements.fontSystem.label.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.label.case}),(function(e){return e.theme.modal.headerForeground})),fl=function(e){function t(t){var o=e.call(this,t)||this;return o.state={show:!1,value:""},o.handleKeydown=function(e){switch(e.code){case"Escape":o.close()}},o.close=function(){o.props.close(!1)},o.save=function(){var e=o.input.value;o.input.value&&(o.props.save(e),o.close())},o.onChange=function(e){o.setState({value:e.target.value})},o.onSubmit=function(e){e.preventDefault()},o.inputRef=function(e){o.input=e},o}return r.__extends(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.text,o=e.defaultText;this.input.focus(),this.input.value=t||o||"",this.setState({value:this.input.value}),document.addEventListener("keydown",this.handleKeydown,!1),t===o&&this.input.select()},t.prototype.componentWillUnmount=function(){document.removeEventListener("keydown",this.handleKeydown,!1)},t.prototype.componentDidUpdate=function(e){e.show!==this.props.show&&(this.state.show&&this.input.focus(),this.setState({show:this.props.show}))},t.prototype.render=function(){var e=this,t=this.props,o=t.show,n=t.position;return i.createElement(Za,{show:o||!1,height:"fit-content",width:"350px",position:n,footer:function(){return i.createElement(dl,null,i.createElement(ul,{ariaLabel:e.props.closeLabel,onClick:e.close},e.props.closeLabel||"Cancel"),i.createElement(ul,{ariaLabel:e.props.saveLabel,className:"primary",isDisabled:!e.state.value,onClick:e.save},e.props.saveLabel||"Done"))}},i.createElement("form",{style:{width:"inherit"},onSubmit:this.onSubmit},i.createElement(hl,{htmlFor:"TextInput"},this.props.editLabel||"Text Input"),i.createElement(Ms,null),i.createElement(pl,null,i.createElement("textarea",{id:"TextInput",placeholder:"Write Something",rows:3,autoFocus:!0,onChange:this.onChange,ref:this.inputRef}))))},t.defaultProps={defaultText:"Write Something"},t}(i.Component),gl=c.input.attrs({type:"file",id:"fileUpload",accept:"image/png, image/jpeg"})(sl||(sl=r.__makeTemplateObject(["\n  display: none;\n"],["\n  display: none;\n"]))),ml=l.css(ll||(ll=r.__makeTemplateObject(["\n  visibility: visible;\n  opacity: 1;\n  display: block\n"],["\n  visibility: visible;\n  opacity: 1;\n  display: block\n"]))),yl=c.div(cl||(cl=r.__makeTemplateObject(["\n  color: ",";\n  background-color: ",";\n  display: block;\n  position: relative;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  width: 100%;\n  white-space: nowrap;\n  transition-duration: 0.5s;\n  &:focus a, &.toggle a {\n    outline: none;\n  }\n  &.toggle > ul {\n    ","\n  }\n  &:hover {\n    color: ",";\n  }\n  &:disabled, &.disabled {\n    opacity: 0.5;\n    pointer-events: none;\n  }\n"],["\n  color: ",";\n  background-color: ",";\n  display: block;\n  position: relative;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  width: 100%;\n  white-space: nowrap;\n  transition-duration: 0.5s;\n  &:focus a, &.toggle a {\n    outline: none;\n  }\n  &.toggle > ul {\n    ","\n  }\n  &:hover {\n    color: ",";\n  }\n  &:disabled, &.disabled {\n    opacity: 0.5;\n    pointer-events: none;\n  }\n"])),(function(e){return e.theme.dropdown.foreground}),(function(e){return e.theme.dropdown.background}),(function(e){return e.theme.measurements.fontSystem.label.size}),(function(e){return e.theme.measurements.fontSystem.label.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.label.case}),ml,(function(e){return e.theme.dropdown.hoverColor}));yl.defaultProps={theme:On};var bl,vl=c.li(bl||(bl=r.__makeTemplateObject(["\n  padding: 10px 16px;\n  text-overflow: ellipsis;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  white-space: nowrap;\n  color: ",";\n  &:hover,\n  &.hover {\n    cursor: pointer;\n    color: ",";\n  }\n  &.active {\n    border-left: 2px solid ",";\n  }\n  ","\n"],["\n  padding: 10px 16px;\n  text-overflow: ellipsis;\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  white-space: nowrap;\n  color: ",";\n  &:hover,\n  &.hover {\n    cursor: pointer;\n    color: ",";\n  }\n  &.active {\n    border-left: 2px solid ",";\n  }\n  ","\n"])),(function(e){return e.theme.measurements.fontSystem.button2.size}),(function(e){return e.theme.measurements.fontSystem.button2.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.button2.case}),(function(e){return e.theme.dropdown.foreground}),(function(e){return e.theme.dropdown.hoverColor}),(function(e){return e.theme.primary}),da);vl.defaultProps={theme:On};var _l,xl=c.ul.attrs((function(e){var t=e.scrollable;return{"data-simplebar":t?"init":null,"data-simplebar-auto-hide":t?"false":null}}))(_l||(_l=r.__makeTemplateObject(["\n  list-style: none;\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  box-shadow: ",";\n  visibility: hidden;\n  opacity: 0;\n  min-width: 5rem;\n  position: absolute;\n  transition: all 0.5s ease;\n  left: -1px;\n  display: none;\n  padding: unset;\n  width: 100%;\n  z-index: 4;\n  max-height: 160px;\n  overflow-x: hidden;\n  margin: 5px 0;\n  border-radius: 0 0 ","px ","px;\n  &[data-simplebar] {\n    position: absolute;\n  }\n"],["\n  list-style: none;\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  box-shadow: ",";\n  visibility: hidden;\n  opacity: 0;\n  min-width: 5rem;\n  position: absolute;\n  transition: all 0.5s ease;\n  left: -1px;\n  display: none;\n  padding: unset;\n  width: 100%;\n  z-index: 4;\n  max-height: 160px;\n  overflow-x: hidden;\n  margin: 5px 0;\n  border-radius: 0 0 ","px ","px;\n  &[data-simplebar] {\n    position: absolute;\n  }\n"])),(function(e){return e.theme.dropdown.listBackground}),(function(e){return e.theme.dropdown.listForeground}),(function(e){return e.theme.dropdown.listBorder}),(function(e){return e.theme.dropdown.listShadow}),(function(e){return e.theme.shape.radiusMedium}),(function(e){return e.theme.shape.radiusMedium}));xl.defaultProps={theme:On,scrollable:!0};var Sl,wl,kl,Cl,Ol,Tl=c(gs)(Sl||(Sl=r.__makeTemplateObject(["\n  right: 0;\n  top: 13px;\n  border-top: 5px solid ",";\n"],["\n  right: 0;\n  top: 13px;\n  border-top: 5px solid ",";\n"])),(function(e){return e.theme.dropdown.caretColor})),El=c.div(wl||(wl=r.__makeTemplateObject(["\n  line-height: 17px;\n  color: ",";\n  background-color: ",";\n  border: none;\n  border-bottom: 1px solid ",";\n  padding: 5px 0;\n  cursor: ",";\n  &:hover {\n    border-color: ",";\n  }\n  transition: border-color 0.4s ease-in-out;\n  ","\n"],["\n  line-height: 17px;\n  color: ",";\n  background-color: ",";\n  border: none;\n  border-bottom: 1px solid ",";\n  padding: 5px 0;\n  cursor: ",";\n  &:hover {\n    border-color: ",";\n  }\n  transition: border-color 0.4s ease-in-out;\n  ","\n"])),(function(e){return e.theme.dropdown.foreground}),(function(e){return e.theme.dropdown.background}),(function(e){return e.theme.dropdown.borderColor}),(function(e){return e.showList?"pointer":"default"}),(function(e){return e.theme.dropdown.hoverColor}),da),Pl=function(e){function t(t){var o=e.call(this,t)||this;return o.state={isOpen:!1},o.handleOutsideClick=function(e){o.node&&o.node.contains(e.target)||o.setState({isOpen:!1})},o.onSelect=function(e){o.props.onSelect(e),o.setState({isOpen:!1})},o.onClick=function(){o.setState((function(e){return{isOpen:!e.isOpen}}))},o.listItem=function(e){var t=o.props,n=t.itemStyle,r=t.selectedItem,a={};"function"==typeof n?a=n(e):null!==n&&"object"==typeof n&&(a=n);var s=r===e?"active":"";return i.createElement(vl,{"aria-hidden":!o.state.isOpen,tabIndex:0,style:a,onClick:function(){return o.onSelect(e)},key:e,className:s},e)},o.onKeyDown=function(e){"Space"!==e.code&&"Enter"!==e.code||o.onClick()},o.nodeRef=function(e){o.node=e},o}return r.__extends(t,e),t.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.handleOutsideClick,!1)},t.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleOutsideClick,!1)},t.prototype.render=function(){var e=this.props,t=e.selectedItem,o=e.list,n=e.label,a=e.style,s=e.isDisabled,l=this.state.isOpen,c=o.length>1,u=s?"disabled":l?"toggle":"",d=s?{}:{tabIndex:0};return i.createElement("div",{className:"dropdown"},i.createElement(js,{isDisabled:s,styles:{paddingLeft:0},name:n}),i.createElement(Ms,null),i.createElement("div",{ref:this.nodeRef},i.createElement(yl,{id:n.replace(" ","-"),className:u},i.createElement(El,r.__assign({"aria-hidden":s},d,{showList:c,style:a,onClick:c?this.onClick:void 0,onKeyDown:this.onKeyDown}),t,c&&i.createElement(Tl,{rotation:l?180:0})),i.createElement(xl,{scrollable:o.length>4},c&&o.map(this.listItem)))))},t}(i.PureComponent),Ml=c.div.attrs({tabIndex:0})(kl||(kl=r.__makeTemplateObject(["\n  position: absolute;\n  top: 5px;\n  right: 0;\n  height: 16px;\n  width: 16px;\n  background-color: ",";\n  border-radius: ","px;\n  transition-timing-function: ease-in;\n  transition-duration: 0.3s;\n  &::after {\n    content: '';\n    position: absolute;\n    display: inline-block;\n    left: 5px;\n    top: 1px;\n    width: 5px;\n    height: 10px;\n    border-style: solid;\n    border-width: 0 2px 2px 0;\n    border-color: transparent;\n    transform: rotate(45deg) scale(0.8);\n  }\n  ","\n"],["\n  position: absolute;\n  top: 5px;\n  right: 0;\n  height: 16px;\n  width: 16px;\n  background-color: ",";\n  border-radius: ","px;\n  transition-timing-function: ease-in;\n  transition-duration: 0.3s;\n  &::after {\n    content: '';\n    position: absolute;\n    display: inline-block;\n    left: 5px;\n    top: 1px;\n    width: 5px;\n    height: 10px;\n    border-style: solid;\n    border-width: 0 2px 2px 0;\n    border-color: transparent;\n    transform: rotate(45deg) scale(0.8);\n  }\n  ","\n"])),(function(e){return e.theme.checkbox.background}),(function(e){return e.theme.shape.radiusSmall}),da),zl=c.div(Cl||(Cl=r.__makeTemplateObject(["\n  display: block;\n  position: relative;\n  margin-bottom: 12px;\n  cursor: pointer;\n  max-width: ","px;\n  label {\n    padding-top: 5px;\n  }\n"],["\n  display: block;\n  position: relative;\n  margin-bottom: 12px;\n  cursor: pointer;\n  max-width: ","px;\n  label {\n    padding-top: 5px;\n  }\n"])),(function(e){return e.theme.measurements.basic.toolControlBar.maxWidth})),Rl=c.input.attrs({type:"checkbox",tabIndex:0})(Ol||(Ol=r.__makeTemplateObject(["\n  position: absolute;\n  opacity: 0;\n  cursor: pointer;\n  height: 0;\n  width: 0;\n  ","\n\n  &:hover ~ "," {\n    background-color: ",";\n  }\n\n  &:checked ~ "," {\n    background-color: ",";\n    &::after {\n      color: ",";\n      border-color: ",";\n    }\n    &:hover {\n      background-color: ",";\n      opacity: 0.80;\n    }\n  }\n\n  &:disabled ~ "," {\n    opacity: 0.5;\n    cursor: default;\n    pointer-events: none;\n  }\n"],["\n  position: absolute;\n  opacity: 0;\n  cursor: pointer;\n  height: 0;\n  width: 0;\n  ","\n\n  &:hover ~ "," {\n    background-color: ",";\n  }\n\n  &:checked ~ "," {\n    background-color: ",";\n    &::after {\n      color: ",";\n      border-color: ",";\n    }\n    &:hover {\n      background-color: ",";\n      opacity: 0.80;\n    }\n  }\n\n  &:disabled ~ "," {\n    opacity: 0.5;\n    cursor: default;\n    pointer-events: none;\n  }\n"])),da,Ml,(function(e){return e.theme.checkbox.hoverBackground}),Ml,(function(e){return e.theme.checkbox.activeBackground}),(function(e){return e.theme.checkbox.activeForeground}),(function(e){return e.theme.checkbox.foreground}),(function(e){return e.theme.checkbox.activeBackground}),Ml),Il=function(e){var t=e.label,o=e.value,n=e.onChange,r=e.style,a=e.isDisabled;return i.createElement(zl,null,i.createElement(js,{isDisabled:a,name:t}),i.createElement(Rl,{id:t.replace(" ","-"),onChange:n,disabled:a,checked:o,onKeyUp:n}),i.createElement(Ml,{style:r||{},onClick:n}))};Il.defaultProps={value:!1};var Dl,jl=c.span(Dl||(Dl=r.__makeTemplateObject(["\n  border: solid ",";\n  border-width: 0 2px 2px 0;\n  display: inline-block;\n  padding: 3px;\n  margin-top: 5px;\n  transform: rotate(","deg);\n  transition-duration: 0.3s;\n  transition-timing-function: ease-in;\n"],["\n  border: solid ",";\n  border-width: 0 2px 2px 0;\n  display: inline-block;\n  padding: 3px;\n  margin-top: 5px;\n  transform: rotate(","deg);\n  transition-duration: 0.3s;\n  transition-timing-function: ease-in;\n"])),(function(e){return e.theme.card.foreground}),(function(e){return e.rotation}));jl.defaultProps={theme:On,rotation:45};var Al,Ll,Fl,Bl,Nl,Hl,Vl,Wl,Gl,Ul,Xl=c.div(Al||(Al=r.__makeTemplateObject(["\n  display: flex;\n  justify-content: space-between;\n  width: ","px;\n"],["\n  display: flex;\n  justify-content: space-between;\n  width: ","px;\n"])),(function(e){return e.theme.measurements.advanced.toolControlBar.width-48})),Yl=c.article(Ll||(Ll=r.__makeTemplateObject(["\n  width: ","px;\n  font-size: ","px;\n  text-transform: ",";\n  text-align: center;\n  display: inline-block;\n  color: ",";\n"],["\n  width: ","px;\n  font-size: ","px;\n  text-transform: ",";\n  text-align: center;\n  display: inline-block;\n  color: ",";\n"])),(function(e){return.6*e.theme.measurements.advanced.toolControlBar.width}),(function(e){return e.theme.measurements.fontSystem.headline2.size}),(function(e){return e.theme.measurements.fontSystem.body.case}),(function(e){return e.theme.toolControlBar.labelForeground})),Kl=c.div(Fl||(Fl=r.__makeTemplateObject(["\n  width: ","px;\n  transform: translateZ(0);\n  overflow: hidden;\n  transition: all 500ms ease-out;\n"],["\n  width: ","px;\n  transform: translateZ(0);\n  overflow: hidden;\n  transition: all 500ms ease-out;\n"])),(function(e){return.6*e.theme.measurements.advanced.toolControlBar.width})),ql=c.span(Bl||(Bl=r.__makeTemplateObject(["\n  width: ","px;\n  margin-left: -","px;\n  position: relative;\n  display: inline-block;\n  transform: translateZ(0);\n  transition: all 800ms cubic-bezier(0.77, 0, 0.175, 1);\n  font-family: '","', sans-serif;\n"],["\n  width: ","px;\n  margin-left: -","px;\n  position: relative;\n  display: inline-block;\n  transform: translateZ(0);\n  transition: all 800ms cubic-bezier(0.77, 0, 0.175, 1);\n  font-family: '","', sans-serif;\n"])),(function(e){return.6*e.length*e.theme.measurements.advanced.toolControlBar.width}),(function(e){return.6*e.activeIndex*e.theme.measurements.advanced.toolControlBar.width}),(function(e){return e.theme.typography.fontFamily})),$l=c(jl)(Nl||(Nl=r.__makeTemplateObject(["\n  float: unset;\n  height: 0;\n"],["\n  float: unset;\n  height: 0;\n"]))),Zl=c(ya)(Hl||(Hl=r.__makeTemplateObject(["\n  border-color: transparent;\n  padding: 1px 7px 2px;\n  div {\n    display: block;\n  }\n"],["\n  border-color: transparent;\n  padding: 1px 7px 2px;\n  div {\n    display: block;\n  }\n"]))),Jl=c(Zl)(Vl||(Vl=r.__makeTemplateObject(["div {margin-left: 2px;}"],["div {margin-left: 2px;}"]))),Ql=c(Zl)(Wl||(Wl=r.__makeTemplateObject(["div {margin-right: 2px;}"],["div {margin-right: 2px;}"]))),ec=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.updateIndex=function(e,o){void 0===o&&(o=!1);var n=e+(o?-1:1),r=t.props.list.length-1;n>r&&(n=0),n<0&&(n=r),t.props.onSelect(t.props.list[n].identifier)},t.getActiveIndex=function(e){var o=t.props.list.findIndex((function(t){return t.identifier===e}));return-1!==o?o:0},t}return r.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props,o=t.list,n=t.label,r=t.showLabel,a=void 0===r||r,s=this.getActiveIndex(this.props.defaultIdentifier);return i.createElement("div",null,i.createElement(js,{show:a,name:n}),a?i.createElement(Ms,null):null,i.createElement(Xl,{id:n.replace(" ","-")},i.createElement(Jl,{ariaLabel:"Select Previous",onClick:function(){return e.updateIndex(s,!0)}},i.createElement($l,{rotation:135})),i.createElement(Kl,null,i.createElement(ql,{activeIndex:s,length:o.length},o.map((function(e){return i.createElement(Yl,{key:e.identifier},e.value)})))),i.createElement(Ql,{ariaLabel:"Select Next",onClick:function(){return e.updateIndex(s)}},i.createElement($l,{rotation:-45}))))},t.defaultProps={showLabel:!0},t}(i.PureComponent),tc=function(e){var t=e.label,o=e.children,n=e.inline,r=e.showLabel,a=e.isDisabled;return i.createElement("div",{className:"selection"},i.createElement(js,{isDisabled:a,name:t,show:r}),r&&i.createElement(Ms,null)||null,i.createElement(oc,{id:t.replace(" ","-"),inline:!!n},o))},oc=c.div(Ul||(Ul=r.__makeTemplateObject(["\n  display: inline-flex;\n  ","\n"],["\n  display: inline-flex;\n  ","\n"])),(function(e){return!e.inline&&l.css(Gl||(Gl=r.__makeTemplateObject(["flex-wrap: wrap;"],["flex-wrap: wrap;"])))||""}));function nc(e,t){for(var o=0,n=e.length;o<n;o++)if(t.apply(t,[e[o],o,e]))return e[o]}function rc(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)}function ic(e){return"number"==typeof e&&!isNaN(e)}function ac(e){return parseInt(e,10)}tc.defaultProps={showLabel:!0};var sc=["Moz","Webkit","O","ms"];function lc(e,t){return t?""+t+function(e){var t,o="",n=!0;for(t=0;t<e.length;t++)n?(o+=e[t].toUpperCase(),n=!1):"-"===e[t]?n=!0:o+=e[t];return o}(e):e}var cc=function(e){if(void 0===e&&(e="transform"),"undefined"==typeof window||void 0===window.document)return"";var t,o=window.document.documentElement.style;if(e in o)return"";for(t=0;t<sc.length;t++)if(lc(e,sc[t])in o)return sc[t];return""}(),uc="";function dc(e,t){return uc||(uc=nc(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return rc(e[t])}))),!!rc(e[uc])&&e[uc](t)}function pc(e,t,o){var n=e;do{if(dc(n,t))return!0;if(n===o)return!1;n=n.parentNode}while(n);return!1}function hc(e,t,o){e&&(e.attachEvent?e.attachEvent("on"+t,o):e.addEventListener?e.addEventListener(t,o,!0):e["on"+t]=o)}function fc(e,t,o){e&&(e.detachEvent?e.detachEvent("on"+t,o):e.removeEventListener?e.removeEventListener(t,o,!0):e["on"+t]=null)}function gc(e){var t=e.clientHeight,o=e.ownerDocument.defaultView.getComputedStyle(e);return t+=ac(o.borderTopWidth),t+=ac(o.borderBottomWidth)}function mc(e){var t=e.clientWidth,o=e.ownerDocument.defaultView.getComputedStyle(e);return t+=ac(o.borderLeftWidth),t+=ac(o.borderRightWidth)}function yc(e){var t=e.clientHeight,o=e.ownerDocument.defaultView.getComputedStyle(e);return t-=ac(o.paddingTop),t-=ac(o.paddingBottom)}function bc(e){var t=e.clientWidth,o=e.ownerDocument.defaultView.getComputedStyle(e);return t-=ac(o.paddingLeft),t-=ac(o.paddingRight)}function vc(e,t){var o=null;return e.targetTouches&&(o=nc(e.targetTouches,(function(e){return t===e.identifier}))),e.changedTouches&&!o&&(o=nc(e.changedTouches,(function(e){return t===e.identifier}))),o}function _c(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:null}function xc(e,t,o){var n=e.state,r=!ic(n.lastX),i=wc(e);return r?{node:i,deltaX:0,deltaY:0,lastX:t,lastY:o,x:t,y:o}:{node:i,deltaX:t-n.lastX,deltaY:o-n.lastY,lastX:n.lastX,lastY:n.lastY,x:t,y:o}}function Sc(e,t){return{node:t.node,x:e.state.x+t.deltaX,y:e.state.y+t.deltaY,deltaX:t.deltaX,deltaY:t.deltaY,lastX:e.state.x,lastY:e.state.y}}function wc(e){var t=a.findDOMNode(e);if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}function kc(e){return"both"===e.props.axis||"x"===e.props.axis}function Cc(e){return"both"===e.props.axis||"y"===e.props.axis}function Oc(e,t){var o=wc(t),n=t.props.offsetParent;return!n&&o instanceof HTMLElement&&(n=o.offsetParent||o.ownerDocument.body),function(e,t){var o=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect();return{x:e.clientX+t.scrollLeft-o.left,y:e.clientY+t.scrollTop-o.top}}(e,n)}var Tc,Ec,Pc,Mc,zc,Rc,Ic,Dc={start:"touchstart",move:"touchmove",stop:"touchend"},jc={start:"mousedown",move:"mousemove",stop:"mouseup"},Ac=jc,Lc={cancel:null,disabled:!1,offsetParent:null,handle:null,transform:null,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){}},Fc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:void 0},t.getTouchFromEvent=function(e){var o=_c(e);return t.setState({touchIdentifier:o}),vc(e,o)},t.preventDefault=function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},t.handleDragStart=function(e){var o=a.findDOMNode(t);if(!o||!o.ownerDocument||!o.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var n=o.ownerDocument;if(t.props.disabled||!(e.target instanceof Node)||t.props.handle&&!pc(e.target,t.props.handle,o)||t.props.cancel&&pc(e.target,t.props.cancel,o))return!1;var r=Oc(e,t);if(null==r)return!1;var i=r.x,s=r.y,l=xc(t,i,s);if(!1===t.props.onStart(e,l))return!1;t.setState({dragging:!0,lastX:i,lastY:s}),"touchmove"===Ac.move?hc(n,Ac.move,t.onTouchDrag):hc(n,Ac.move,t.onMouseDrag),hc(n,Ac.stop,t.handleDragStop)},t.handleDrag=function(e){var o=Oc(e,t);if(null!=o){var n=o.x,r=o.y,i=xc(t,n,r);if(!1!==t.props.onDrag(e,i))t.setState({lastX:n,lastY:r});else try{t.handleDragStop(new MouseEvent("mouseup"))}catch(e){var a=document.createEvent("MouseEvents");a.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),t.handleDragStop(a)}}},t.handleDragStop=function(e){if(t.state.dragging){var o=Oc(e,t);if(null!=o){var n=o.x,r=o.y,i=xc(t,n,r),s=a.findDOMNode(t);t.setState({dragging:!1,lastX:NaN,lastY:NaN}),t.props.onStop(e,i),s&&("touchmove"===Ac.move?fc(s.ownerDocument,Ac.move,t.onTouchDrag):fc(s.ownerDocument,Ac.move,t.onMouseDrag),fc(s.ownerDocument,Ac.stop,t.handleDragStop))}}},t.onMouseDown=function(e){return t.preventDefault(e),Ac=jc,t.props.onMouseDown(e),(!e.button||"number"!=typeof e.button||0===e.button)&&t.handleDragStart(e)},t.onMouseDrag=function(e){return t.preventDefault(e),t.handleDrag(e)},t.onMouseUp=function(e){return t.preventDefault(e),Ac=jc,t.handleDragStop(e)},t.onTouchStart=function(e){t.preventDefault(e),Ac=Dc;var o=t.getTouchFromEvent(e);return t.handleDragStart(o)},t.onTouchDrag=function(e){t.preventDefault(e),Ac=Dc;var o=t.getTouchFromEvent(e);return t.handleDrag(o)},t.onTouchEnd=function(e){t.preventDefault(e),Ac=Dc;var o=t.getTouchFromEvent(e);return t.handleDragStop(o)},t}return r.__extends(t,e),t.prototype.componentWillUnmount=function(){var e=a.findDOMNode(this);if(e){var t=e.ownerDocument;fc(t,jc.move,this.onMouseDrag),fc(t,Dc.move,this.onTouchDrag),fc(t,jc.stop,this.handleDragStop),fc(t,Dc.stop,this.handleDragStop)}},t.prototype.render=function(){return i.cloneElement(i.Children.only(this.props.children),{style:r.__assign({touchAction:"none"},this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})},t.defaultProps=Lc,t.displayName="DraggableCore",t}(i.Component),Bc=r.__assign({},Lc,{axis:"both",bounds:!1,defaultClassName:"draggable",defaultClassNameDragging:"draggable-dragging",defaultClassNameDragged:"draggable-dragged",defaultPosition:{x:0,y:0},position:null,rotation:0,updateOnPosition:!1}),Nc=function(e){function t(t){var o=e.call(this,t)||this;return o.onDragStart=function(e,t){if(!1===o.props.onStart(e,Sc(o,t)))return!1;o.setState({dragging:!0,dragged:!0})},o.onDrag=function(e,t){var n=o.props,i=n.position,a=n.defaultPosition,s=n.onDrag,l=n.bounds;if(!o.state.dragging)return!1;var c=Sc(o,t),u=Boolean(i),d={x:u?c.x:a.x,y:u?c.y:a.y,slackX:0,slackY:0};if(l){var p=d.x,h=d.y;d.x+=o.state.slackX,d.y+=o.state.slackY;var f=r.__read(function(e,t,o){if(!e.props.bounds)return[t,o];var n=e.props.bounds;n="string"==typeof n?n:r.__assign({},n);var i=wc(e);if("string"==typeof n){var a=i.ownerDocument,s=a.defaultView,l="parent"===n?i.parentNode:a.querySelector(n);if(!(l instanceof HTMLElement))throw new Error('Bounds selector "'+n+'" could not find an element.');if(i instanceof HTMLElement){var c=s.getComputedStyle(i),u=s.getComputedStyle(l);n={left:-i.offsetLeft+ac(u.paddingLeft)+ac(c.marginLeft),top:-i.offsetTop+ac(u.paddingTop)+ac(c.marginTop),right:bc(l)-mc(i)-i.offsetLeft+ac(u.paddingRight)-ac(c.marginRight),bottom:yc(l)-gc(i)-i.offsetTop+ac(u.paddingBottom)-ac(c.marginBottom)}}}return ic(n.right)&&(t=Math.min(t,n.right)),ic(n.bottom)&&(o=Math.min(o,n.bottom)),ic(n.left)&&(t=Math.max(t,n.left)),ic(n.top)&&(o=Math.max(o,n.top)),[t,o]}(o,d.x,d.y),2),g=f[0],m=f[1];d.x=g,d.y=m,d.slackX=o.state.slackX+(p-d.x),d.slackY=o.state.slackY+(h-d.y),c.x=d.x,c.y=d.y,c.deltaX=d.x-o.state.x,c.deltaY=d.y-o.state.y}if(!1===s(e,c))return!1;o.setState(d)},o.onDragStop=function(e,t){if(!o.state.dragging)return!1;if(!1===o.props.onStop(e,Sc(o,t)))return!1;var n={dragging:!1,slackX:0,slackY:0,x:0,y:0};if(Boolean(o.props.position)){var r=o.props.position,i=r.x,a=r.y;n.x=i,n.y=a}o.setState(n)},o.state={dragging:!1,dragged:!1,x:t.position?t.position.x:t.defaultPosition.x,y:t.position?t.position.y:t.defaultPosition.y,slackX:0,slackY:0},o}return r.__extends(t,e),t.prototype.componentDidUpdate=function(e){Boolean(this.props.position)&&(this.props.updateOnPosition?(e.position&&e.position.x!==this.props.position.x||e.position.y!==this.props.position.y)&&this.setState({x:this.props.position.x,y:this.props.position.y}):(e.position&&this.props.position.x!==this.state.x||this.props.position.y!==this.state.y)&&this.setState({x:this.props.position.x,y:this.props.position.y}))},t.prototype.componentWillUnmount=function(){this.setState({dragging:!1})},t.prototype.render=function(){var e,t=this.props,o=t.position,n=t.defaultPosition,a=t.rotation,s=t.defaultClassName,l=t.defaultClassNameDragging,c=t.defaultClassNameDragged,u=r.__rest(t,["position","defaultPosition","rotation","defaultClassName","defaultClassNameDragging","defaultClassNameDragged"]),d=this.state,p=d.x,h=d.y,f=d.dragging,g=d.dragged,m=!Boolean(o)||f,y=o||n;e=function(e){var t,o="translate("+e.x+"px,"+e.y+"px) rotate("+e.rotation+"rad)";return(t={})[lc("transform",cc)]=o,t}({x:kc(this)&&m?p:y.x,y:Cc(this)&&m?h:y.y,rotation:a});var b=i.Children.only(this.props.children),v=[b.props.className||"",s,f?l:"",g?c:""].join(" ").trim(),_=i.cloneElement(b,{className:v,style:r.__assign({},b.props.style,e)});return i.createElement(Fc,r.__assign({},u,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),_)},t.defaultProps=Bc,t.displayName="Draggable",t}(i.Component),Hc=c(dl)(Tc||(Tc=r.__makeTemplateObject(["\n  border-top: 2px solid ",";\n"],["\n  border-top: 2px solid ",";\n"])),(function(e){return"error"===e.type?e.theme.error:e.theme.warning})),Vc=c.div(Ec||(Ec=r.__makeTemplateObject(["\n  display: block;\n"],["\n  display: block;\n"]))),Wc=c.h3(Pc||(Pc=r.__makeTemplateObject(["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n"],["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n"])),(function(e){return e.theme.measurements.fontSystem.headline2.size}),(function(e){return e.theme.measurements.fontSystem.headline2.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.headline2.case}),(function(e){return e.theme.modal.headerForeground})),Gc=c.p(Mc||(Mc=r.__makeTemplateObject(["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n"],["\n  font-size: ","px;\n  letter-spacing: ","px;\n  text-transform: ",";\n  color: ",";\n"])),(function(e){return e.theme.measurements.fontSystem.body.size}),(function(e){return e.theme.measurements.fontSystem.body.letterSpacing}),(function(e){return e.theme.measurements.fontSystem.body.case}),(function(e){return e.theme.modal.bodyForeground})),Uc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={show:!1},t.closeModal=function(e){t.props.handlers.close&&t.props.handlers.close(),e&&e()},t}return r.__extends(t,e),t.prototype.componentDidUpdate=function(e){e.show!==this.props.show&&this.setState({show:this.props.show})},t.prototype.render=function(){var e=this,t=this.props,o=t.type,n=t.handlers,r=t.message,a=t.show,s=t.position,l=t.preHeadingLocale,c="error"===o?l.error:l.warning;return i.createElement(Za,{heading:r?r.heading:"",show:a||!1,width:"350px",height:"fit-content",position:s,footer:function(){return n&&r?i.createElement(Hc,{type:o},r.buttonNo&&i.createElement(ul,{ariaLabel:r.buttonNo,onClick:function(){return e.closeModal(n.buttonNo)}},r.buttonNo),r.buttonYes&&i.createElement(ul,{ariaLabel:r.buttonYes,className:"primary",onClick:function(){return e.closeModal(n.buttonYes)}},r.buttonYes)):null}},i.createElement(Vc,null,r?i.createElement(Wc,null,c,": ",r.heading||""):null,r&&r.body?i.createElement(Gc,null,r.body):null))},t.defaultProps={preHeadingLocale:{error:"Error",warning:"Warning"}},t}(i.PureComponent),Xc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.getChildren=function(){var e=this,t=[],o=[];return i.Children.forEach(this.props.children,(function(n){switch(n.type.componentName){case"case":e.props.type===n.props.value&&t.push(n);break;case"default":o.push(n)}})),t.length>0?t:o},t.prototype.render=function(){var e=this.getChildren();return 0===e.length?null:i.createElement(qc,null,e)},t}(i.Component),Yc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return this.props.children},t.componentName="case",t}(i.Component),Kc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return this.props.children},t.componentName="default",t}(i.Component),qc=c.div(zc||(zc=r.__makeTemplateObject(["\n    height: inherit;\n    width: inherit;\n"],["\n    height: inherit;\n    width: inherit;\n"]))),$c=l.keyframes(Rc||(Rc=r.__makeTemplateObject(["\n  0% {\n    opacity: 0;\n    transform: scale(0.9) translateY(-20px);\n  }\n  100% {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n  }\n"],["\n  0% {\n    opacity: 0;\n    transform: scale(0.9) translateY(-20px);\n  }\n  100% {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n  }\n"]))),Zc=l.keyframes(Ic||(Ic=r.__makeTemplateObject(["\n  0% {\n    opacity: 0;\n    transform: scale(0.9);\n  }\n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n"],["\n  0% {\n    opacity: 0;\n    transform: scale(0.9);\n  }\n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n"]))),Jc={Heading1:16,Heading2:14,Button:12,Label1:13,Label2:12,Body:14};var Qc=function(e){var t=e.height,o=e.width,n=e.x,r=e.className,a=e.style;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:o,height:t,viewBox:"0 0 102 3",className:r,style:a},i.createElement("pattern",{id:"slider-dots",fill:"currentColor",patternUnits:"userSpaceOnUse",width:"102",height:"3"},i.createElement("rect",{width:"3",height:"3",x:"99",y:"0",opacity:"0.5",rx:"1.5"}),i.createElement("rect",{width:"3",height:"3",x:"88",y:"0",opacity:"0.5",rx:"1.5"}),i.createElement("rect",{width:"3",height:"3",x:"77",y:"0",opacity:"0.5",rx:"1.5"}),i.createElement("rect",{width:"3",height:"3",x:"66",y:"0",rx:"1.5"}),i.createElement("rect",{width:"3",height:"3",x:"55",y:"0",opacity:"0.5",rx:"1.5"}),i.createElement("rect",{width:"3",height:"3",x:"44",y:"0",opacity:"0.5",rx:"1.5"}),i.createElement("rect",{width:"3",height:"3",x:"33",y:"0",opacity:"0.5",rx:"1.5"}),i.createElement("rect",{width:"3",height:"3",x:"22",y:"0",opacity:"0.5",rx:"1.5"}),i.createElement("rect",{width:"3",height:"3",x:"11",y:"0",rx:"1.5"})),i.createElement("rect",{fill:"url(#slider-dots)",x:1.5*-o,y:"0",width:4*o,height:"3",transform:"translate("+n+", 0)"}))};Qc.defaultProps={height:3,width:102,x:-102};var eu=function(e){var t=e.alt,o=e.className;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 16 16",className:o},i.createElement("title",null,t),i.createElement("defs",null,i.createElement("path",{id:"rotate-icon",d:"M132 0l1.25 1.57a8.01 8.01 0 0110.41.77 8.015 8.015 0 010 11.32c-.33.33-.67.62-1.04.859-1.38.991-3 1.481-4.62 1.481v-2c1.22 0 2.44-.37 3.47-1.111a6 6 0 00.77-9.129 5.992 5.992 0 00-7.73-.63L136 5h-5l1-5zm2.43 12.82c.5.38 1.06.67 1.66.87l-.64 1.89a7.56 7.56 0 01-1.48-.67l-.03-.01v-.01h-.02v-.01h-.01c0-.01-.01-.01-.01-.01h-.01v-.01h-.02v-.01h-.01l-.01-.01s-.01 0-.01-.01h-.01c-.2-.12-.4-.26-.6-.4zm-2.15-3.02c.18.6.47 1.17.83 1.68l-1.63 1.16v-.01s-.01 0-.01-.01c0 0 0-.01-.01-.01v-.01h-.01v-.01c-.01 0-.01-.01-.01-.01v-.01h-.01v-.01h-.01v-.01c0-.01-.01-.01-.01-.01v-.01c-.01 0-.01 0-.01-.01-.27-.39-.49-.79-.68-1.21-.01 0-.01-.01-.01-.01v-.01h-.01v-.02l-.01-.01c0-.02-.01-.02-.01-.02v-.02h-.01v-.02h-.01v-.03h-.01v-.02h-.01v-.02c-.01 0-.01 0-.01-.01v-.01c-.1-.23-.19-.47-.26-.7z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-130)"},i.createElement("mask",{fill:"none"},i.createElement("use",{xlinkHref:"#rotate-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#rotate-icon"})))};eu.defaultProps={alt:"Rotate"};var tu,ou={adjustment:function(){return i.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Adjustments",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{id:"icon/fidelity/adjust",fill:"none",fillRule:"evenodd"},i.createElement("g",{id:"ic_adjust"},i.createElement("g",{fill:"#D8D8D8",opacity:"0"},i.createElement("rect",{width:"48",height:"48"})),i.createElement("g",{transform:"translate(12 12)"},i.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),i.createElement("g",{transform:"translate(2 13)",fill:"currentColor"},i.createElement("path",{d:"M3.02746439,4 C3.00931666,4.16416693 3,4.33099545 3,4.5 C3,4.66900455 3.00931666,4.83583307 3.02746439,5 L0,5 L0,4 L3.02746439,4 Z M13,4 L20,4 L20,5 L13,5 L13,4 Z",fillOpacity:"0.2"}),i.createElement("path",{d:"M5.09842503,6.29819429 C5.0340931,6.05140089 5,5.7851211 5,5.5 C5,3.56700338 6.56700338,2 8.5,2 C8.7851211,2 9.05140089,2.0340931 9.29819429,2.09842503 C10.0278893,2.64566496 10.5,3.5176988 10.5,4.5 C10.5,6.15685425 9.15685425,7.5 7.5,7.5 C6.5176988,7.5 5.64566496,7.02788926 5.09842503,6.29819429 Z M11.1637159,7.11349161 C10.874061,7.51881791 10.5188179,7.87406095 10.1134916,8.16371592 C10.5772175,7.93004328 10.9300433,7.5772175 11.1637159,7.11349161 Z",fillOpacity:"0.2"}),i.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,0 7.5,0 C9.98528137,0 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"})),i.createElement("g",{transform:"rotate(-180 11 5.5)",fill:"currentColor"},i.createElement("path",{d:"M11.9725356,4 L20,4 L20,5 L11.9725356,5 C11.9906833,4.83583307 12,4.66900455 12,4.5 C12,4.33099545 11.9906833,4.16416693 11.9725356,4 Z M0,4 L2,4 L2,5 L0,5 L0,4 Z",fillOpacity:"0.2"}),i.createElement("g",{transform:"rotate(-180 5 3.5)",fillOpacity:"0.2"},i.createElement("path",{d:"M0.0984250251,4.29819429 C0.0340930963,4.05140089 0,3.7851211 0,3.5 C0,1.56700338 1.56700338,0 3.5,0 C3.7851211,0 4.05140089,0.0340930963 4.29819429,0.0984250251 C5.02788926,0.645664963 5.5,1.5176988 5.5,2.5 C5.5,4.15685425 4.15685425,5.5 2.5,5.5 C1.5176988,5.5 0.645664963,5.02788926 0.0984250251,4.29819429 Z M6.16371592,5.11349161 C5.87406095,5.51881791 5.51881791,5.87406095 5.11349161,6.16371592 C5.5772175,5.93004328 5.93004328,5.5772175 6.16371592,5.11349161 Z"})),i.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,-3.6739404e-16 7.5,-3.6739404e-16 C9.98528137,-3.6739404e-16 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"}))))))},filter:function(){return i.createElement("svg",{"aria-hidden":"true",focusable:"false","aria-label":"Filter",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{id:"icon/fidelity/filter",fill:"none",fillRule:"evenodd"},i.createElement("g",{id:"ic_filter"},i.createElement("g",{fill:"#D8D8D8",opacity:"0"},i.createElement("rect",{width:"48",height:"48"})),i.createElement("g",{transform:"translate(16 14)",fill:"currentColor"},i.createElement("g",null,i.createElement("path",{d:"M1.53468397,11.3244256 C2.30584171,10.1516526 4.0927284,8.69757613 8,10 C11.5643313,11.1881104 13.1877038,10.2588113 13.9183327,9.30853287 C14.2918933,10.1286474 14.5,11.0400207 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.41014913,18.5 1.5,15.5898509 1.5,12 C1.5,11.7718729 1.51175212,11.5464906 1.53468397,11.3244256 Z",fillOpacity:"0.2"}),i.createElement("path",{d:"M1.53471819,12.6759057 C2.39408133,13.5811739 4.12541941,14.1109247 5.5,13.5 C9.81068889,11.5841383 9.99203585,9.66827654 14.3948028,10.8290113 C14.4639074,11.2088572 14.5,11.6002137 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.63838968,18.5 1.87279864,15.9481381 1.53471819,12.6759057 Z",fillOpacity:"0.25"}),i.createElement("path",{d:"M11,1.44328993e-15 L11,4.58151705 C13.9318303,5.7682918 16,8.64262245 16,12 C16,16.418278 12.418278,20 8,20 C3.581722,20 0,16.418278 0,12 C0,8.64262245 2.06816966,5.7682918 5,4.58151705 L5,1.60982339e-15 L6.5,1.44328993e-15 L6.5,5.67393184 C3.6333,6.35109564 1.5,8.92641836 1.5,12 C1.5,15.5898509 4.41014913,18.5 8,18.5 C11.5898509,18.5 14.5,15.5898509 14.5,12 C14.5,8.92641836 12.3667,6.35109564 9.5,5.67393184 L9.5,1.77635684e-15 L11,1.44328993e-15 Z",fillOpacity:"0.87"}))))))},library:function(){return i.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Library",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{id:"icon/fidelity/library",fill:"none",fillRule:"evenodd"},i.createElement("g",{id:"ic_library",transform:"translate(15 15)",fill:"currentColor"},i.createElement("g",null,i.createElement("polygon",{id:"Rectangle-5",fillOpacity:"0.2",points:"3 3 12.5 1.5 12.5 15.5 1.5 15.5"}),i.createElement("path",{d:"M1.5,1.5 L1.5,15.5 L12.5,15.5 L12.5,1.5 L1.5,1.5 Z M0,0 L14,0 L14,17 L0,17 L0,0 Z",id:"Rectangle-11",fillOpacity:"0.87"}),i.createElement("polygon",{id:"Path-5",fillOpacity:"0.25",points:"3 11 6 7 8 9 9 8.5 11 11"}),i.createElement("circle",{id:"Oval-4",fillOpacity:"0.25",cx:"9",cy:"5",r:"1"}),i.createElement("rect",{id:"Rectangle-13",fillOpacity:"0.25",x:"3",y:"13",width:"8",height:"1"}),i.createElement("g",{transform:"rotate(14 -2.352 56.952)",fillOpacity:"0.2"},i.createElement("path",{d:"M1.32904158,1.07500967e-13 L5,1.07500967e-13 L5,14.7234101 L4,10.7126291 L4,1 L1.57836958,1 L1.32904158,1.07500967e-13 Z M5,14.9745817 L5,16 L0.887271787,16 L5,14.9745817 Z"}),i.createElement("path",{d:"M1.82769758,2 L3,2 L3,6.70184819 L1.82769758,2 Z",id:"Rectangle-12"}))))))},overlay:function(){return i.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Overlays",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{id:"icon/fidelity/overlay",fill:"none",fillRule:"evenodd"},i.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},i.createElement("path",{d:"M13.5,4 L13.5,13.5 L4,13.5 L4,5 C4,4.44771525 4.44771525,4 5,4 L13.5,4 Z M15,4 L17,4 C17.5522847,4 18,4.44771525 18,5 L18,17 C18,17.5522847 17.5522847,18 17,18 L5,18 C4.44771525,18 4,17.5522847 4,17 L4,15 L14,15 C14.5522847,15 15,14.5522847 15,14 L15,4 Z",fillOpacity:"0.2"}),i.createElement("path",{d:"M1.5,1.5 L1.5,13.5 L13.5,13.5 L13.5,1.5 L1.5,1.5 Z M1,0 L14,0 C14.5522847,-1.01453063e-16 15,0.44771525 15,1 L15,14 C15,14.5522847 14.5522847,15 14,15 L1,15 C0.44771525,15 6.76353751e-17,14.5522847 0,14 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 Z",id:"Rectangle-27",fillOpacity:"0.87"}))))},focus:function(){return i.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Focus",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{id:"icon/fidelity/blur",fill:"none",fillRule:"evenodd"},i.createElement("g",{id:"ic_blur"},i.createElement("g",{fill:"#D8D8D8",opacity:"0"},i.createElement("rect",{width:"48",height:"48"})),i.createElement("g",{id:"icon",transform:"translate(12 12)"},i.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),i.createElement("g",{transform:"translate(4 2)",fill:"currentColor"},i.createElement("path",{d:"M8.51312274,19.9836057 C8.77273397,19.9669655 9.02898229,19.9377873 9.2812837,19.8966625 C9.14309542,19.9643562 9.04607398,20 9,20 C8.83633495,20 8.67398178,19.9944755 8.51312274,19.9836057 Z M2.27242753,15.0235117 C2.09503729,14.4174909 2,13.7771617 2,13.115 C2,8.89625769 7.39855682,4.1952443 9.03524007,2.8669743 C9.66704719,3.45933018 10.2896864,4.09178959 10.8802638,4.75434357 C12.9939648,7.12565193 14.310818,9.45010207 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C5.525182,18.5 3.37015673,17.0943182 2.27242753,15.0235117 Z M15.999821,11.9547651 C15.9999402,11.9698392 16,11.9849176 16,12 C16,12.0581275 15.9984809,12.1163475 15.9954873,12.1746435 C15.9978914,12.1015915 15.9993401,12.0282946 15.999821,11.9547651 Z",fillOpacity:"0.2"}),i.createElement("path",{d:"M3.47269084,16.6357644 C3.47244857,13.6389249 9.59189484,15.3529683 12,11.5 C13.2066771,9.56931667 12.316614,7.05620551 11.0727604,4.97270186 C13.0737756,7.26814668 14.316054,9.51197209 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C6.2411126,18.5 4.64375705,17.7899702 3.47269084,16.6357644 Z",fillOpacity:"0.25"}),i.createElement("path",{d:"M7.73975027,2.16383649 C6.84545319,2.94914111 5.95084629,3.82194197 5.11973623,4.75434357 C3.00603518,7.12565193 1.68918197,9.45010207 1.51870896,11.4644804 C1.50624591,11.6117488 1.5,11.7569175 1.5,11.9 C1.5,15.5492218 4.41434886,18.5 8,18.5 C11.5855665,18.5 14.5,15.5490785 14.5,11.9 C14.5,11.7569175 14.4937541,11.6117488 14.481291,11.4644804 C14.310818,9.45010207 12.9939648,7.12565193 10.8802638,4.75434357 C10.0491537,3.82194197 9.15454681,2.94914111 8.26024973,2.16383649 C8.17157048,2.08596503 8.08476013,2.01060875 8,1.93784184 C7.91523987,2.01060875 7.82842952,2.08596503 7.73975027,2.16383649 Z M8,20 C3.581722,20 0,16.3735065 0,11.9 C0,6.05 8,0 8,0 C8,0 16,6.05 16,11.9 C16,16.3732777 12.418278,20 8,20 Z",id:"Oval-7",fillOpacity:"0.87"}))))))},sticker:function(){return i.createElement("svg",{focusable:"false","aria-hidden":"true",width:"48px",height:"48px",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-label":"Stickers",viewBox:"0 0 48 48"},i.createElement("g",{id:"icon/fidelity/sticker",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.createElement("g",{id:"ic_sticker"},i.createElement("g",{transform:"translate(14.000000, 14.000000)",fill:"currentColor"},i.createElement("g",{transform:"translate(2.000000, 2.000000)",fillOpacity:"0.2"},i.createElement("path",{d:"M11.5840291,0.290311095 C14.1040281,1.4637822 15.9529364,3.83641178 16.3972985,6.6747443 C11.4538042,7.5567274 7.55733385,11.4556991 6.68374109,16.3973312 C3.83946575,15.9530468 1.46423317,14.1041207 0.290132399,11.5832649 C0.0988489957,10.7650202 3.01980663e-14,9.89786431 3.01980663e-14,9 C3.01980663e-14,6.64646143 0.903391324,4.50392121 2.38232909,2.90022422 C4.02683831,1.11698861 6.38297582,-3.55271368e-15 9,-3.55271368e-15 C9.89814387,-3.55271368e-15 10.7655602,0.0989105588 11.5840291,0.290311095 Z"}),i.createElement("path",{d:"M17.9877222,8 L8,17.9877222 C8.2591955,12.5923102 12.5906864,8.26470667 17.9877222,8 Z"})),i.createElement("path",{d:"M9.87290303,14.9211604 C9.09408801,14.4293124 5,11.7146562 5,9 C5,7.34 6.34,6 8,6 C8.77,6 9.47,6.52 10,7 C10.53,6.52 11.23,6 12,6 C13.66,6 15,7.34 15,9 C15,9.30171667 14.9494261,9.60343334 14.8584511,9.90209822 C12.7354304,11.0373368 10.9933363,12.7905402 9.87290303,14.9211604 Z",fillOpacity:"0.25"}),i.createElement("path",{d:"M10,1.5 C5.30557963,1.5 1.5,5.30557963 1.5,10 C1.5,14.2449983 4.61102233,17.7611603 8.68374109,18.3973312 C9.55733385,13.4556991 13.4538042,9.5567274 18.3972985,8.6747443 C17.7608961,4.60976745 14.2436106,1.5 10,1.5 Z M0,10 C0,4.4771525 4.4771525,0 10,0 C15.5228475,0 20,4.4771525 20,10 C14.5988732,10.2649073 10.2649073,14.5988732 10.0116954,19.9999933 C4.4771525,20 0,15.5228475 0,10 Z",fillOpacity:"0.87"})))))},text:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Texts",width:"48",height:"48"},i.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{fillOpacity:"0.2",d:"M17.883 19.5H16.07L11.702 6.833l1.235-1.411L17.883 19.5z",transform:"translate(12 12)"}),i.createElement("path",{fillOpacity:"0.87",d:"M10.8 8.818L8.483 14.5h4.275l-1.96-5.682zM10 6.5l3.5-4 5.973 17H21V21h-8v-1.5h1.483L13.276 16H7.873l-1.426 3.5H8V21H3v-1.5h1.704L10 6.5zm1.702.333L16.069 19.5h1.814L12.937 5.422l-1.235 1.411z",transform:"translate(12 12)"}),i.createElement("path",{fillOpacity:"0.2",d:"M19.55 15l-.35-1H21v1h-1.45zm1.05 3l-.35-1H21v1h-.4zM7.639 8L7.25 9H3V8h4.639zm1.167-3l-.39 1H7V5h1.806zm-2.334 6l-.389 1H6v-1h.472zm-1.166 3l-.39 1H3v-1h2.306zm-1.167 3l-.389 1H3v-1h1.139zM15.35 3L15 2h1v1h-.65zm3.15 9l-.35-1H21v1h-2.5zm-1.05-3l-.35-1H21v1h-3.55zM16.4 6l-.35-1H18v1h-1.6zm-5.9-3H9V2h2.5l-1 1zM3 5h3v1H3V5zm16 0h2v1h-2V5zM3 11h2v1H3v-1zm18-8h-4V2h4v1zM8 3H3V2h5v1z",transform:"translate(12 12)"})))},textdesign:function(){return i.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Text Design",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{fillOpacity:"0.87",d:"M1 0h14a1 1 0 011 1v19l-8-6-8 6V1a1 1 0 011-1zm.5 1.5V17L8 12.125 14.5 17V1.5h-13z",transform:"translate(14 14) translate(2)"}),i.createElement("path",{fillOpacity:"0.2",d:"M1.5 1.5h13V17L8 12.125 1.5 17V1.5z",transform:"translate(14 14) translate(2)"}),i.createElement("path",{fillOpacity:"0.25",d:"M9 4l2.52 7H10.2l-.7-1.85H6.45L5.77 11H4.49L6.9 4H9zm-1.04.78h-.05L6.73 8.14H9.2L7.96 4.78z",transform:"translate(14 14) translate(2)"})))},frame:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",focusable:"false","aria-hidden":"true","aria-label":"Frames",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},i.createElement("path",{fillOpacity:"0.2",d:"M8 8L17 7 17 17 7 17z"}),i.createElement("path",{fillOpacity:"0.87",d:"M4.5 19.5h15v-15h-15v15zM3 3h18v18H3V3z"}),i.createElement("path",{fillOpacity:"0.87",d:"M7 17h10V7H7v10zM6 6h12v12H6V6z"}),i.createElement("path",{fillOpacity:"0.25",d:"M9 15L11 12 13 14 14 13.5 15 15z"})))},transform:function(){return i.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Transform",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},i.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},i.createElement("path",{fillOpacity:"0.2",d:"M10 10L15 9 15 15 9 15z"}),i.createElement("path",{fillOpacity:"0.87",d:"M9 15h6V9H9v6zm-1.5 0V7.5H15V3h1.5v13.5H3V15h4.5zm0 2.5H9V21H7.5v-3.5zM21 7.5V9h-3.5V7.5H21z"}),i.createElement("g",{fillOpacity:"0.2"},i.createElement("path",{d:"M0 10h1a9.003 9.003 0 015.5-8.294L7 3 10.942.044C10.632.014 10.318 0 10 0 4.477 0 0 4.477 0 10z",transform:"translate(2 2)"}),i.createElement("path",{d:"M9 20h1a9.003 9.003 0 015.5-8.294L16 13l3.942-2.956c-.31-.03-.624-.044-.942-.044-5.523 0-10 4.477-10 10z",transform:"translate(2 2) rotate(-180 14.47 15)"}))))},brush:function(){return i.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Brush",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},i.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{fillOpacity:"0.87",d:"M14.73 18.86C13.293 19.503 11.624 20 10 20 2 20 0 13 0 10c.486.972 2.37 5.848 7.537 4.165C7.873 17.125 10.427 19 13 19c.6 0 1.177-.05 1.73-.14zM8.422 8.63a7.352 7.352 0 00-1.127 1.616L2.401 3.705c-.215-.287-.178-.807.072-1.056l.088-.088L8.5 8.5l-.078.13z",opacity:"0.5",transform:"translate(12 12) translate(2 2)"}),i.createElement("path",{fillOpacity:"0.87",d:"M7.295 10.246c-.27.526-.48 1.09-.615 1.68L1.2 4.603c-.663-.885-.564-2.24.212-3.015l.176-.176c.78-.78 2.121-.881 3.015-.212l7.245 5.421a6.088 6.088 0 00-1.67.624L3.706 2.401c-.294-.22-.801-.184-1.056.072l-.176.176c-.25.25-.287.769-.072 1.056l4.894 6.54z",transform:"translate(12 12) translate(2 2)"}),i.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858z",opacity:"0.5",transform:"translate(12 12) translate(2 2) translate(7 7)"}),i.createElement("path",{fillOpacity:"0.25",d:"M10.379 9.027c.053.135.108.263.165.385C8.914 10.158 7.545 10.5 6 10.5c-2.165 0-4-1.706-4-4 0-1.528.79-2.921 1.88-3.74-.882 2.084-1.025 6.482 6.499 6.267z",transform:"translate(12 12) translate(2 2) translate(7 7)"}),i.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858zM6 12C3.239 12 .5 9.842.5 6.5S3.239.5 6 .5c6.5 0 4 8 7 9.342C11 10.947 8.761 12 6 12z",transform:"translate(12 12) translate(2 2) translate(7 7)"})))}},nu={left:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Left Align",width:"26",height:"26"},i.createElement("defs",null,i.createElement("path",{id:"align-left-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("mask",{fill:"#fff"},i.createElement("use",{xlinkHref:"#align-left-icon"})),i.createElement("use",{fill:"currentColor",xlinkHref:"#align-left-icon"})))},right:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",width:"26",height:"26",focusable:"false","aria-hidden":"true","aria-label":"Right Align"},i.createElement("defs",null,i.createElement("path",{id:"align-right-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H48V48H0z"}),i.createElement("mask",{fill:"#fff"},i.createElement("use",{xlinkHref:"#align-right-icon"})),i.createElement("use",{fill:"currentColor",transform:"matrix(-1 0 0 1 48 0)",xlinkHref:"#align-right-icon"})))},center:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Center Align",width:"26",height:"26"},i.createElement("defs",null,i.createElement("path",{id:"align-center-icon",d:"M31.5 30v3h-15v-3h15zm4.5-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("mask",{fill:"#fff"},i.createElement("use",{xlinkHref:"#align-center-icon"})),i.createElement("use",{fill:"currentColor",xlinkHref:"#align-center-icon"})))}},ru={addText:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},i.createElement("defs",null,i.createElement("path",{id:"icon-add-text",d:"M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm1 6h-2v5H6v2h5v5h2v-5h5v-2h-5V6z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#icon-add-text"})),i.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#icon-add-text"})))},openWebcam:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M12 1c5.523 0 10 4.477 10 10a9.98 9.98 0 01-3.678 7.749c1.877.92 3.445 2.251 4.502 3.88l.176.283-1.743 1.02c-1.04-1.735-2.824-3.102-4.995-3.884A9.94 9.94 0 0112 21a9.962 9.962 0 01-4.255-.948c-2.076.748-3.797 2.033-4.852 3.661l-.147.237L1 22.935c1.053-1.766 2.694-3.204 4.684-4.183A9.975 9.975 0 012 11C2 5.477 6.477 1 12 1zm0 2a8 8 0 100 16 8 8 0 000-16zm0 5a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6zm1-4v1h-2V6h2z"}))},reset:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M16.23 10.885a2.292 2.292 0 00-2.285-2.286 2.292 2.292 0 00-2.286 2.286 2.292 2.292 0 002.286 2.286 2.292 2.292 0 002.286-2.286zM13.946.599C8.265.6 3.66 5.205 3.66 10.885H.231l4.571 4.571 4.572-4.571H5.945c0-4.423 3.577-8 8-8s8 3.577 8 8a7.994 7.994 0 01-12.64 6.514l-1.623 1.646a10.3 10.3 0 006.263 2.126c5.68 0 10.286-4.606 10.286-10.286S19.625.599 13.945.599z",transform:"rotate(56 11.298 10.261)"}))},shuffle:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},i.createElement("defs",null,i.createElement("path",{id:"a",d:"M24 10v8a3 3 0 01-3 3H6v3l-6-4 6-4v3h15a1 1 0 001-1v-8h2zM18 0l6 4-6 4V5H3a1 1 0 00-1 1v8H0V6a3 3 0 013-3h15V0z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#a"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#a"})))},uploadImage:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},i.createElement("defs",null,i.createElement("path",{id:"upload-icon",d:"M4.143 17.286l-.001 3.142h15.715v-3.142H23v6.285H1v-6.285h3.143zM12 0l9.429 9.429-2.2 2.2L13.57 5.97v9.743H10.43V5.971L4.77 11.63l-2.2-2.2L12 0z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#upload-icon"})),i.createElement("use",{fill:"currentColor",xlinkHref:"#upload-icon"})))}},iu={undo:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},i.createElement("defs",null,i.createElement("path",{id:"undo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#undo-icon"})),i.createElement("use",{fill:"currentColor",transform:"rotate(90 12.25 12)",xlinkHref:"#undo-icon"})))},redo:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},i.createElement("defs",null,i.createElement("path",{id:"redo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#redo-icon"})),i.createElement("use",{fill:"currentColor",transform:"matrix(0 1 1 0 .25 -.25)",xlinkHref:"#redo-icon"})))},close:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},i.createElement("defs",null,i.createElement("path",{id:"close-icon",d:"M21.583 0L24 2.416 14.416 12 24 21.584 21.583 24 12 14.416 2.417 24 0 21.584 9.584 12 0 2.416 2.417 0 12 9.584 21.583 0z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#close-icon"})),i.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#close-icon"})))},export:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},i.createElement("defs",null,i.createElement("path",{id:"export-icon",d:"M22 1.5a1.5 1.5 0 011.493 1.356L23.5 3H22h1.5v17a1.5 1.5 0 01-1.5 1.5H12a1.5 1.5 0 01-1.493-1.356L10.5 20v-6h2v5.499h9v-16h-9V9h-2V3A1.5 1.5 0 0112 1.5h10zM6.15 5.817L7.634 7.3l-3.171 3.171h13.978v2H4.47l3.171 3.17-1.483 1.483L.5 11.467l5.65-5.65z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("mask",{fill:"#fff"},i.createElement("use",{xlinkHref:"#export-icon"})),i.createElement("use",{fill:"currentcolor",fillOpacity:"0.9",transform:"rotate(90 12 11.5)",xlinkHref:"#export-icon"})))}},au={dots:Qc,duplicate:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},i.createElement("defs",null,i.createElement("path",{id:"duplicate-icon",d:"M3.429 8.571v12h12v-12h-12zM1.714 5.143h15.429c.947 0 1.714.767 1.714 1.714v15.429c0 .946-.767 1.714-1.714 1.714H1.714A1.714 1.714 0 010 22.286V6.857c0-.947.768-1.714 1.714-1.714zM22.286 0C23.232 0 24 .768 24 1.714v15.429c0 .947-.768 1.714-1.714 1.714H20.57V3.429L5.142 3.428V1.714C5.143.768 5.91 0 6.858 0h15.429z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#duplicate-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#duplicate-icon"})))},edit:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},i.createElement("path",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M2.087 7.115h7.66v15.32h5.027l.223-15.32h7.438V2.087H2.087v5.028zM14.075 24h-4.15a2.42 2.42 0 01-1.718-.711 2.423 2.423 0 01-.711-1.717V9.01H2.429c-.67 0-1.278-.273-1.718-.713A2.426 2.426 0 010 6.579V2.43C0 1.76.272 1.153.711.713A2.424 2.424 0 012.43 0h19.142c.671 0 1.278.272 1.718.713.439.44.711 1.047.711 1.718v4.148c0 .671-.272 1.278-.711 1.718-.44.44-1.047.713-1.718.713h-5.067v12.562c0 .67-.272 1.278-.711 1.717a2.42 2.42 0 01-1.718.711z"}))},bringToFront:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},i.createElement("defs",null,i.createElement("path",{id:"bring-to-front-icon",d:"M21 16a2 2 0 012 2v4a2 2 0 01-2 2H3a2 2 0 01-2-2v-4a2 2 0 012-2h18zM12.006 1l5.996 5.996-1.414 1.414-3.578-3.577V12h-2.008V4.833L7.418 8.417 6.004 7.003 12.006 1z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H24V24H0z"}),i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#bring-to-front-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#bring-to-front-icon"})))},delete:function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},i.createElement("defs",null,i.createElement("path",{id:"delete-icon",d:"M20 6l-2.312 15.718A1.5 1.5 0 0116.204 23H5.796a1.5 1.5 0 01-1.484-1.282L2 6h18zM7 1a1 1 0 011-1h6a1 1 0 011 1v1h7v2H0V2h7V1z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#delete-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#delete-icon"})))},flipHorizontal:function(e){var t=e.className;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",transform:"scale(-1, 1)",className:t},i.createElement("title",null,"Flip Horizontal"),i.createElement("defs",null,i.createElement("path",{id:"flip-horizontal-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},i.createElement("mask",{fill:"none"},i.createElement("use",{xlinkHref:"#flip-horizontal-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#flip-horizontal-icon"})))},flipVertical:function(e){var t=e.className;return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",className:t},i.createElement("title",null,"Flip Vertical"),i.createElement("defs",null,i.createElement("path",{id:"flip-vertical-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},i.createElement("mask",{fill:"none"},i.createElement("use",{xlinkHref:"#flip-vertical-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(-90 41.417 8)",xlinkHref:"#flip-vertical-icon"})))},rotate:eu},su=((tu={})[r.AdjustmentIdentifier.BRIGHTNESS]=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("path",{id:"brightness-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),i.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("mask",null,i.createElement("use",{xlinkHref:"#brightness-icon"})),i.createElement("use",{fillOpacity:"0.9",transform:"rotate(-45 24.039 24)",xlinkHref:"#brightness-icon"})))},tu[r.AdjustmentIdentifier.CONTRAST]=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("path",{id:"contrast-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c-6.62 0-12 5.38-12 12s5.38 12 12 12 12-5.38 12-12-5.38-12-12-12"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H48V48H0z"}),i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#contrast-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#contrast-icon"})))},tu[r.AdjustmentIdentifier.SATURATION]=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("path",{id:"saturation-icon",d:"M17 31c1.334 1.099 2 2.177 2 3.234 0 .797-.454 1.39-1.211 1.655-.165.057-.428.094-.789.111l-.172-.01a2.54 2.54 0 01-.617-.101C15.454 35.624 15 35.03 15 34.234c0-1.057.666-2.135 2-3.234zm8.7-6l-4.24 4H17v-3.81l.2-.19h8.5zm-.7-7.59l4.24 4.25L26.76 24h-8.54L25 17.41zm7.778-3.532a3 3 0 01.135 4.1l-.135.143-1.414 1.414 1.414 1.415-1.414 1.414-7.07-7.071 1.413-1.414 1.414 1.413 1.414-1.414a3.001 3.001 0 014.243 0z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H48V48H0z"}),i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#saturation-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#saturation-icon"})))},tu[r.AdjustmentIdentifier.CLARITY]=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("path",{id:"clarity-icon",d:"M24 12L13 24.001 24 36l11-11.999L24 12zm-8.29 12.001H21l3-9.041 8.29 9.041-8.28 9.029L28 24.001h-7l2.99 9.029-8.28-9.029z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H48V48H0z"}),i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#clarity-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#clarity-icon"})))},tu[r.AdjustmentIdentifier.SHADOWS]=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("path",{id:"shadows-icon",d:"M30.365 17.637l3.076 3.076c.382 1.09.566 2.234.56 3.387l-5.05-5.049-1.414 1.414 6.123 6.124a9.674 9.674 0 01-.792 2.036l-6.746-6.745-1.414 1.414 7.036 7.036c-.212.254-.43.502-.672.742-.24.24-.488.46-.742.672l-7.036-7.036-1.414 1.414 6.745 6.746a9.674 9.674 0 01-2.036.792l-6.124-6.123-1.414 1.414L24.101 34a10.012 10.012 0 01-3.388-.558l-3.076-3.076-.707.707c-3.896-3.896-3.896-10.246 0-14.142 3.896-3.896 10.246-3.896 14.142 0l-.707.707zm-14.849-2.12c-4.688 4.687-4.688 12.281 0 16.97a12.036 12.036 0 004.108 2.693c.064.022.127.057.191.078 4.264 1.577 9.242.658 12.671-2.772 3.43-3.429 4.35-8.407 2.772-12.67-.02-.065-.056-.128-.078-.192a12.036 12.036 0 00-2.694-4.108c-4.688-4.688-12.282-4.688-16.97 0z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H48V48H0z"}),i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#shadows-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#shadows-icon"})))},tu[r.AdjustmentIdentifier.HIGHLIGHTS]=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("path",{id:"highlights-icon",d:"M31.07 31.07A9.932 9.932 0 0124 34c-2.67 0-5.18-1.04-7.07-2.93l14.14-14.14c3.9 3.9 3.9 10.24 0 14.14m1.42-15.56A11.995 11.995 0 0024 12c-3.07 0-6.14 1.17-8.49 3.51-4.68 4.69-4.68 12.29 0 16.98C17.86 34.83 20.93 36 24 36c3.07 0 6.14-1.17 8.49-3.51 4.68-4.69 4.68-12.29 0-16.98"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H48V48H0z"}),i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#highlights-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#highlights-icon"})))},tu[r.AdjustmentIdentifier.EXPOSURE]=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("path",{id:"exposure-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c6.62 0 12 5.38 12 12s-5.38 12-12 12-12-5.38-12-12 5.38-12 12-12zm-3.536 8.464l-2.121 2.122-2.121-2.122-1.414 1.415L16.929 24l-2.121 2.121 1.414 1.415 2.121-2.122 2.121 2.122 1.415-1.415L19.757 24l2.122-2.121-1.415-1.415zm5.304 4.597l4.242-4.243 1.415 1.414-4.243 4.243-1.414-1.414z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H48V48H0z"}),i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#exposure-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(45 24 24)",xlinkHref:"#exposure-icon"})))},tu[r.AdjustmentIdentifier.GAMMA]=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("path",{id:"gamma-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H48V48H0z"}),i.createElement("mask",{fill:"#fff"},i.createElement("use",{xlinkHref:"#gamma-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#gamma-icon"})))},tu[r.AdjustmentIdentifier.BLACKS]=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("path",{id:"blacks-icon",d:"M24 12c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12m0 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10m4 12c0 2.788-2.326 3.879-7 3V18.5c4.148-.459 6.516.226 6.516 2.623 0 1.207-.492 1.998-1.512 2.474C27.504 23.999 28 24.619 28 26zm-5-6v3c2.244.068 2.775-.719 2.775-1.536 0-1.22-.531-1.812-2.775-1.464zm0 7.5c2.19.193 3.038-.04 3.038-1.484 0-1.37-1.096-1.695-3.038-1.516v3z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H48V48H0z"}),i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#blacks-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#blacks-icon"})))},tu[r.AdjustmentIdentifier.WHITES]=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("path",{id:"whites-icon",d:"M24 12c6.627 0 12 5.373 12 12s-5.373 12-12 12-12-5.373-12-12 5.373-12 12-12zm-2 6.46h-2c.221 4.539.762 9.051 1 11.04h1.5l1.5-5.52 1.5 5.52H27c.238-1.989.779-6.501 1-11.04h-2c-.051 1.071-.432 7.446-.5 7.973-.459-1.717-.541-3.111-1-4.811h-1c-.442 1.7-.541 2.975-1 4.811-.051-.527-.466-6.902-.5-7.973z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H48V48H0z"}),i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#whites-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#whites-icon"})))},tu[r.AdjustmentIdentifier.TEMPERATURE]=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("path",{id:"temperature-icon",d:"M24 12a4 4 0 014 4v7.255a7 7 0 11-8 0V16a4 4 0 014-4zm0 2a2 2 0 00-2 2v8.298l-.856.597a5 5 0 105.712 0L26 24.298V16a2 2 0 00-2-2zm1 6v5.126A4.002 4.002 0 0124 33a4 4 0 01-1-7.874V20h2z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H48V48H0z"}),i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#temperature-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#temperature-icon"})))},tu[r.AdjustmentIdentifier.SHARPNESS]=function(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},i.createElement("defs",null,i.createElement("path",{id:"sharpness-icon",d:"M24 12l11 24H13l11-24zm0 4.8V34h7.883L24 16.8z"})),i.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},i.createElement("path",{d:"M0 0H48V48H0z"}),i.createElement("mask",{fill:"currentColor"},i.createElement("use",{xlinkHref:"#sharpness-icon"})),i.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#sharpness-icon"})))},tu),lu={Container:qi,Button:{Index:ya,Primary:xa,Secondary:_a},ColorItem:function(e){var t=e.isActive,o=e.onClick,n=e.color,r=e.label,a=e.isDisabled;return i.createElement(ja,{className:t?"active":"",disabled:a,onClick:function(e){o(e)},onKeyDown:function(e){"Space"!==e.code&&"Enter"!==e.code||o(e)},"aria-label":r},i.createElement(Fa,null),i.createElement(La,{className:t?"active":"",backgroundColor:n}),t&&i.createElement(Ba,{className:"colorItemActive"},i.createElement(Na,null),i.createElement(Na,null),i.createElement(Na,null)))},Loader:fs,Spacer:Ms,Modal:Uc,Draggable:Nc,DraggableCore:Fc,Toast:Ia,Card:{CommonStyles:Ps,Label:function(e){var t=e.children,o=e.caret,n=e.isActive,r=e.style,a=e.withBackground;if(e.hidden)return i.createElement(Ts,null,t);return i.createElement(ms,{withBackground:a,style:r},i.createElement("span",{className:"label"},t,o&&i.createElement(Os,null,i.createElement(gs,{"aria-hidden":!0,rotation:n?180:0}))))}},Input:{Label:js,File:gl,Search:function(e){return i.createElement("div",null,i.createElement(js,{show:!1,name:"Search"}),i.createElement(ol,{id:"Search",onChange:function(t){e.onChange(t.target.value)},placeholder:e.placeholder}))},Slider:el,CarouselSlider:ec,Selection:tc,Checkbox:Il,Dropdown:Pl,Text:Vs,TextEdit:fl,Form:function(e){var t=e.children;return i.createElement("form",{onSubmit:function(e){e.preventDefault()}},t)}},Switch:{Index:Xc,Case:Yc,Default:Kc},Common:{FontSize:Jc}},cu={slide:$c,scale:Zc,ripple:ua},uu={Button:ba,PrimaryButton:va,HiddenScrollbar:Cs,VisuallyHidden:ks,Focused:da,CommonInputStyles:Bs,CardLabel:ms,Card:Ps};exports.$mobx="$mobx",exports.AdjustmentIcons=su,exports.AlignIcons=nu,exports.CommonStyles=uu,exports.Components=lu,exports.Editor=Ki,exports.EditorIcons=iu,exports.Reaction=at,exports.SimpleBar=Xi,exports.ToolControlBarIcons=ru,exports.ToolbarIcons=ou,exports.TransformIcons=au,exports.allowStateChanges=function(e,t){var o,n=We(e);try{o=t()}finally{Ge(n)}return o},exports.animations=cu,exports.configure=function(e){var t=e.enforceActions,o=e.computedRequiresReaction,n=e.computedConfigurable,r=e.disableErrorBoundaries,i=e.arrayBuffer,a=e.reactionScheduler,s=e.reactionRequiresObservable,l=e.observableRequiresReaction;if(!0===e.isolateGlobalState&&((Je.pendingReactions.length||Je.inBatch||Je.isRunningReactions)&&E("isolateGlobalState should be called before MobX is running any reactions"),Ze=!0,$e&&(0==--O().__mobxInstanceCount&&(O().__mobxGlobals=void 0),Je=new qe)),void 0!==t){"boolean"!=typeof t&&"strict"!==t||z("Deprecated value for 'enforceActions', use 'false' => '\"never\"', 'true' => '\"observed\"', '\"strict\"' => \"'always'\" instead");var c=void 0;switch(t){case!0:case"observed":c=!0;break;case!1:case"never":c=!1;break;case"strict":case"always":c="strict";break;default:E("Invalid value for 'enforceActions': '"+t+"', expected 'never', 'always' or 'observed'")}Je.enforceActions=c,Je.allowStateChanges=!0!==c&&"strict"!==c}void 0!==o&&(Je.computedRequiresReaction=!!o),void 0!==s&&(Je.reactionRequiresObservable=!!s),void 0!==l&&(Je.observableRequiresReaction=!!l,Je.allowStateReads=!Je.observableRequiresReaction),void 0!==n&&(Je.computedConfigurable=!!n),void 0!==r&&(!0===r&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors if this is on."),Je.disableErrorBoundaries=!!r),"number"==typeof i&&no(i),a&&dt(a)},exports.convertToColorString=u,exports.createAtom=J,exports.debounce=Kr,exports.deepmergeAll=vn,exports.defaultConfig=m,exports.defaultTheme=On,exports.getDebugName=So,exports.isObservableArray=io,exports.isObservableMap=co,exports.isObservableObject=_o,exports.measurements=zn,exports.spy=yt,exports.untracked=Ie;
